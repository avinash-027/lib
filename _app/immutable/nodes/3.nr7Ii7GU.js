import{a as p,f as b,c as ie}from"../chunks/DIo1Mb-Q.js";import{i as oe}from"../chunks/BaBAM0Xm.js";import{o as de}from"../chunks/Ou4Y_0Z5.js";import{$ as le,M as ve,aQ as ce,af as pe,e as ue,u as r,aR as be,aS as fe,q as _e,U as Aa,aD as mt,D as ge,aT as Ga,aU as me,E as Ka,F as $,G as he,y as a,aV as xe,I as s,K as o,W as g,aW as we,J as e,V as K,z as Ta,aP as ye,aX as ke}from"../chunks/BKQwOs6K.js";import{a as Ce,e as M,s as N,r as $e}from"../chunks/UijS7mQC.js";import{i as m,s as Te,a as Ee}from"../chunks/BezKbsVq.js";import{g as Ja,d as Fa,s as oa,a as je,b as Se,c as ma,E as Ae,e as ca,i as pa,R as ut,r as bt,f as ft,h as _t,j as ha,S as ea}from"../chunks/uHcNKebj.js";import{h as Le}from"../chunks/B3mhA-Ep.js";import{s as Ne,b as Me,g as De}from"../chunks/CyTIuLfi.js";const Fe=()=>performance.now(),da={tick:l=>requestAnimationFrame(l),now:()=>Fe(),tasks:new Set};function ht(){const l=da.now();da.tasks.forEach(v=>{v.c(l)||(da.tasks.delete(v),v.f())}),da.tasks.size!==0&&da.tick(ht)}function ze(l){let v;return da.tasks.size===0&&da.tick(ht),{promise:new Promise(E=>{da.tasks.add(v={c:l,f:E})}),abort(){da.tasks.delete(v)}}}function za(l,v){mt(()=>{l.dispatchEvent(new CustomEvent(v))})}function Ie(l){if(l==="float")return"cssFloat";if(l==="offset")return"cssOffset";if(l.startsWith("--"))return l;const v=l.split("-");return v.length===1?v[0]:v[0]+v.slice(1).map(E=>E[0].toUpperCase()+E.slice(1)).join("")}function gt(l){const v={},E=l.split(";");for(const A of E){const[L,w]=A.split(":");if(!L||w===void 0)break;const y=Ie(L.trim());v[y]=w.trim()}return v}const Be=l=>l;function Re(l,v,E,A){var L=(l&be)!==0,w="both",y,H=v.inert,t=v.style.overflow,x,k;function G(){return mt(()=>y??=E()(v,A?.()??{},{direction:w}))}var I={is_global:L,in(){v.inert=H,x=Qa(v,G(),k,1,()=>{za(v,"introend"),x?.abort(),x=y=void 0,v.style.overflow=t})},out(B){v.inert=!0,k=Qa(v,G(),x,0,()=>{za(v,"outroend"),B?.()})},stop:()=>{x?.abort(),k?.abort()}},J=le;if((J.nodes.t??=[]).push(I),Ce){var Q=L;if(!Q){for(var C=J.parent;C&&(C.f&ve)!==0;)for(;(C=C.parent)&&(C.f&ce)===0;);Q=!C||(C.f&pe)!==0}Q&&ue(()=>{r(()=>I.in())})}}function Qa(l,v,E,A,L){var w=A===1;if(fe(v)){var y,H=!1;return _e(()=>{if(!H){var B=v({direction:w?"in":"out"});y=Qa(l,B,E,A,L)}}),{abort:()=>{H=!0,y?.abort()},deactivate:()=>y.deactivate(),reset:()=>y.reset(),t:()=>y.t()}}if(E?.deactivate(),!v?.duration&&!v?.delay)return za(l,w?"introstart":"outrostart"),L(),{abort:Aa,deactivate:Aa,reset:Aa,t:()=>A};const{delay:t=0,css:x,tick:k,easing:G=Be}=v;var I=[];if(w&&E===void 0&&(k&&k(0,1),x)){var J=gt(x(0,1));I.push(J,J)}var Q=()=>1-A,C=l.animate(I,{duration:t,fill:"forwards"});return C.onfinish=()=>{C.cancel(),za(l,w?"introstart":"outrostart");var B=E?.t()??1-A;E?.abort();var j=A-B,ua=v.duration*Math.abs(j),Ea=[];if(ua>0){var La=!1;if(x)for(var Na=Math.ceil(ua/16.666666666666668),ja=0;ja<=Na;ja+=1){var ba=B+j*G(ja/Na),Ma=gt(x(ba,1-ba));Ea.push(Ma),La||=Ma.overflow==="hidden"}La&&(l.style.overflow="hidden"),Q=()=>{var wa=C.currentTime;return B+j*G(wa/ua)},k&&ze(()=>{if(C.playState!=="running")return!1;var wa=Q();return k(wa,1-wa),!0})}C=l.animate(Ea,{duration:ua,fill:"forwards"}),C.onfinish=()=>{Q=()=>A,k?.(A,1-A),L()}},{abort:()=>{C&&(C.cancel(),C.effect=null,C.onfinish=Aa)},deactivate:()=>{L=Aa},reset:()=>{A===0&&k?.(1,0)},t:()=>Q()}}const Oe=!1,Pe=!1,Os=Object.freeze(Object.defineProperty({__proto__:null,prerender:Oe,ssr:Pe},Symbol.toStringTag,{value:"Module"}));function Ue(l){const v=l-1;return v*v*v+1}function qe(l,{delay:v=0,duration:E=400,easing:A=Ue,axis:L="y"}={}){const w=getComputedStyle(l),y=+w.opacity,H=L==="y"?"height":"width",t=parseFloat(w[H]),x=L==="y"?["top","bottom"]:["left","right"],k=x.map(j=>`${j[0].toUpperCase()}${j.slice(1)}`),G=parseFloat(w[`padding${k[0]}`]),I=parseFloat(w[`padding${k[1]}`]),J=parseFloat(w[`margin${k[0]}`]),Q=parseFloat(w[`margin${k[1]}`]),C=parseFloat(w[`border${k[0]}Width`]),B=parseFloat(w[`border${k[1]}Width`]);return{delay:v,duration:E,easing:A,css:j=>`overflow: hidden;opacity: ${Math.min(j*20,1)*y};${H}: ${j*t}px;padding-${x[0]}: ${j*G}px;padding-${x[1]}: ${j*I}px;margin-${x[0]}: ${j*J}px;margin-${x[1]}: ${j*Q}px;border-${x[0]}-width: ${j*C}px;border-${x[1]}-width: ${j*B}px;min-${H}: 0`}}function xa(l,v){let E=0;async function A(w){try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(w);else{const y=document.createElement("input");y.value=w,document.body.appendChild(y),y.select(),document.execCommand("copy"),document.body.removeChild(y)}l.classList.add("copied"),setTimeout(()=>l.classList.remove("copied"),500)}catch(y){console.error("Copy failed",y)}}function L(w){const y=new Date().getTime(),H=y-E;H<300&&H>0&&A(v??l.textContent??""),E=y}return l.addEventListener("click",L),l.addEventListener("touchend",L),{destroy(){l.removeEventListener("click",L),l.removeEventListener("touchend",L)}}}const He=()=>{const l=Ne;return{page:{subscribe:l.page.subscribe},navigating:{subscribe:l.navigating.subscribe},updated:l.updated}},We={subscribe(l){return He().page.subscribe(l)}};var Ve=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50" role="dialog" aria-modal="true"><div class="bg-base-100 rounded-lg p-4 m-4 shadow-lg w-96"><h3 class="text-lg font-bold mb-4">Confirm Delete</h3> <p class="mb-6">Are you sure you want to delete this entry?</p> <div class="flex justify-end gap-2"><button class="btn btn-soft">Cancel</button> <button class="btn btn-error">Delete</button></div></div></div>'),Ge=b('<div class="fixed inset-0 bg-base-100/69 flex items-center justify-center z-50 p-4"><img class="max-h-full max-w-full rounded-lg shadow-2xl"/> <button class="absolute bottom-5 right-5 btn btn-circle btn-md btn-ghost text-white bg-base-300">✕</button></div>'),Ke=b('<img class="w-31 h-46 md:w-35 md:h-55 object-cover rounded-lg"/>'),Je=b('<div class="w-34 h-50 bg-base-300 rounded-lg flex items-center justify-center text-base-content/20"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-16 h-16 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'),Qe=b('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words hidden md:inline-block"> </p>'),Xe=b('<span class="badge badge-primary badge-sm md:badge-md"> </span>'),Ye=b('<div class="flex flex-wrap gap-1 md:gap-2 mb-2 md:mb-4" title="badges"></div>'),Ze=b('<button class="btn badge-soft badge-outline badge-sm md:badge-md block break-all whitespace-normal line-clamp-2" title="category"> </button>'),as=b('<div class="badge badge-dash badge-sm md:badge-md" title="dataType"> </div>'),ts=b('<span class="text-xm badge badge-sm badge-ghost gap-0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" class="w-3 h-3 stroke-current fill-base-content"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l2.122 6.53a1 1 0 00.95.69h6.866c.969 0 1.371 1.24.588 1.81l-5.556 4.04a1 1 0 00-.364 1.118l2.122 6.53c.3.921-.755 1.688-1.54 1.118l-5.556-4.04a1 1 0 00-1.176 0l-5.556 4.04c-.784.57-1.838-.197-1.539-1.118l2.122-6.53a1 1 0 00-.364-1.118L.47 11.957c-.783-.57-.38-1.81.588-1.81h6.866a1 1 0 00.95-.69l2.122-6.53z"></path></svg> </span>'),es=b('<input type="radio" name="rating" class="mask mask-star-2 mask-half-1 bg-base-content"/> <input type="radio" name="rating" class="mask mask-star-2 mask-half-2 bg-base-content"/>',1),ss=b('<div><div class="rating rating-lg rating-half mt-2"></div></div>'),rs=b('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words inline-block md:hidden"> </p>'),ns=b('<span class="badge badge-info badge-sm md:badge-md"> </span>'),is=b('<div class="flex flex-wrap gap-1 md:gap-2 mb-2 mt-1 justify-end" title="tags"></div>'),os=b('<img class="w-15 h-15 md:w-18 md:h-18 rounded-full object-cover"/>'),ds=b('<div class="w-15 h-15 md:w-18 md:h-18 rounded-full bg-base-300 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-8 h-8 stroke-current text-base-content/20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div>'),ls=b('<span class="indicator-item indicator-bottom indicator-center status status-info"></span>'),vs=b('<div class="flex flex-col items-center gap-2 flex-shrink-0 w-18 md:w-22 text-center cursor-pointer"><!> <div class="text-sm text-center leading-tight break-all line-clamp-2"><!> <span> </span></div></div>'),cs=b('<div class="break-all"><span class="font-semibold">Role:</span> <span class="text-base-content"> </span></div>'),ps=b('<div class="break-all"><span class="font-semibold">Description:</span> <span class="text-base-content"> </span></div>'),us=b('<div class="break-words"><span class="font-semibold">Alternative Names:</span> <span class="text-base-content"> </span></div>'),bs=b('<span class="badge badge-info badge-xs"> </span>'),fs=b('<div class="flex flex-wrap gap-1 font-semibold">Tags: <span class="text-base-content"></span></div>'),_s=b('<div><ul class="list bg-base-200 rounded-xl shadow-md"><li class="list-row items-center py-1"><div><button class="h-14 w-14 btn btn-soft btn-outline btn-sm rounded-xl"><!></button></div> <div class="p-2 w-full bg-base-200 rounded-md text-xs text-left space-y-1 text-info"><div class="break-all"><span class="font-semibold">Name:</span> <span class="text-success"> </span></div> <!> <!> <!> <!></div></li></ul></div>'),gs=b('<div class="card bg-base-100 shadow-xl"><div class="card-body p-5 md:p-6"><h2 class="card-title">Characters <button class="btn btn-ghost btn-sm ml-auto" aria-label="Edit Characters"><!></button> <button class="btn btn-ghost btn-sm"><!></button></h2> <div class="flex gap-2 md:gap-4 overflow-x-auto pb-1 scrollbar-hide"></div> <!></div></div>'),ms=b('<div class="card bg-base-100 shadow-xl"><div class="card-body gap-1 md:gap-2 p-4 md:p-6"><h2 class="card-title">Description <button class="btn btn-square btn-ghost ml-auto" aria-label="Edit Description"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></h2> <div class="ml-2 break-words prose prose-sm max-w-none prose-p:my-1 prose-ul:my-0 prose-li:my-0 prose-h1:my-0 prose-h2:my-0"><!></div></div></div>'),hs=b('<span class="bg-base-300/70 rounded-lg px-1 break-words"> </span>'),xs=b('<div class="flex flex-wrap justify-start content-start gap-1"></div>'),ws=b('<div class="p-1 text-sm text-base-content/70 bg-base-200/50 border border-base-content/10 border-t-0 rounded-b-lg"><span class="ml-2 text-base-content/60">↳ <span class="font-semibold">Description:</span></span> <span class="inline prose prose-sm prose-neutral prose-p:m-0 prose-strong:inline prose-em:inline prose-code:inline"><!></span></div>'),ys=b('<div class="py-1 px-[2px] bg-base-200"><div aria-label="Edit Chapters" class="grid grid-cols-[16vw_1fr_2fr] md:grid-cols-[7vw_1fr_2fr] gap-4 px-4 py-3 bg-base-100 divide-x-[2px] divide-base-content/10 border border-base-content/10 rounded-t-lg rounded-b-md cursor-pointer hover:bg-base-200 z-1"><div class="font-semibold break-words"> </div> <div> </div> <!></div> <div><!></div></div>'),ks=b('<div class="card bg-base-100 shadow-xl"><div class="card-body p-3 md:p-6"><h2 class="card-title ml-1">Chapters <button class="btn btn-ghost btn-sm ml-auto"><!></button> <button class="btn btn-ghost btn-sm"><!></button></h2> <div class="overflow-x-auto text-xs md:text-sm"><div class="w-full border border-base-300 rounded-lg"><div class="grid grid-cols-[16vw_1fr_2fr] md:grid-cols-[7vw_1fr_2fr] gap-4 px-4 py-3 font-semibold bg-base-200 rounded-t-lg"><div>Chapter</div> <div>Characters</div> <div>Tags</div></div> <!></div></div></div></div>'),Cs=b('<div><span class="font-semibold text-base-content">Created:</span> <span> </span></div>'),$s=b('<div><span class="font-semibold text-base-content">Last opened:</span> <span> </span></div>'),Ts=b('<div><span class="font-semibold text-base-content">Last edited:</span> <span> </span></div>'),Es=b('<details class="collapse bg-base-100"><summary class="collapse-title font-semibold">Timestamps</summary> <div class="collapse-content text-sm"><div class="rounded-lg bg-base-200 p-3 text-xs text-gray-500 space-y-1"><!> <!> <!></div></div></details>'),js=b('<div class="container mx-auto p-2 md:p-4 max-w-4xl space-y-2 md:space-y-6"><div class="card bg-base-100 shadow-xl"><div class="card-body p-4 md:p-6"><div class="flex flex-row md:flex-row gap-3 md:gap-5"><div class="flex-shrink-0"><!></div> <div class="flex-1 min-w-0 flex flex-col justify-center"><h1 class="text-2xl font-bold mb-2 whitespace-pre-wrap break-words" title="Title"> </h1> <!> <!> <div class="flex flex-wrap gap-1.5 md:gap-2 mt-2"><!> <!> <!></div> <!></div></div> <div><!> <!></div></div></div> <!> <!> <!> <!></div>'),Ss=b('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),As=b('<!> <div class="min-h-screen bg-base-200"><div class="sticky top-0 z-50 navbar bg-base-100 shadow-lg"><div class="flex-none"><a class="btn btn-square btn-ghost" aria-label="Go back"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></a></div> <div class="flex-1"><span class="text-xl font-bold">Details</span></div> <div class="flex-none gap-2"><button class="btn btn-square btn-ghost" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="btn btn-square btn-ghost text-error" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <!> <!></div> <!>',1);function Ps(l,v){ge(v,!1);const E=()=>Ee(We,"$page",A),[A,L]=Te(),w=K(),y=K(),H=K();let t=K(null),x=K(!1),k=K(),G=K(!1),I=K(0),J=K(null);function Q(c){g(J,a(J)===c?null:c)}const C=["main","lead","mc","fmc","protagonist"];let B=K("All");function j(c="All"){g(B,c),g(x,!0)}de(async()=>{g(k,parseInt(E().params.id)),await ua(),await Fa.markAsOpened(a(k))});async function ua(){g(t,await Fa.getEntryById(a(k))),g(I,a(t)?.rating??0)}async function Ea(c){a(k)&&(g(I,c),await Fa.updateEntryPartial(a(k),{rating:a(I)}),a(t)&&ke(t,a(t).rating=a(I)))}function La(){history.length>1?window.history.back():De("/")}async function Na(){g(x,!1),await ua()}function ja(){g(x,!1)}let ba=K(!1);function Ma(){g(ba,!0)}async function wa(){await Fa.deleteEntry(a(k)),g(ba,!1),La()}function xt(){g(ba,!1)}function wt(c){return Ja.parseInline(c)}function yt(c,S){const R=parseFloat(c),X=parseFloat(S),Y=!isNaN(R),sa=!isNaN(X);return Y&&!sa?-1:!Y&&sa?1:Y&&sa?R-X:c.localeCompare(S,void 0,{numeric:!0,sensitivity:"base"})}function Ia(c){return c?new Date(c).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null}let Ba=K(null);function kt(){g(Ba,{chapterSE:"",description:"",characters:"",tags:[],_tagsText:""}),g(B,"1chapters1"),g(x,!0)}function Ct(c){g(Ba,{...structuredClone(c),_tagsText:(c.tags??[]).join(", ")}),g(B,"1chapters1"),g(x,!0)}let Ra=K(null);function $t(){g(Ra,{name:"",role:"",image:"",description:"",tags:[],_tagsString:"",alternativeNames:[],_alternativeNamesString:""}),g(B,"1characters1"),g(x,!0)}function Tt(c){g(Ra,{...structuredClone(c),_alternativeNamesString:(c.alternativeNames??[]).join(", "),_tagsString:(c.tags??[]).join(", ")}),g(B,"1characters1"),g(x,!0)}Ga(()=>a(t),()=>{g(w,a(t)?.characters?[...a(t).characters].sort((c,S)=>{const R=C.includes(c.role.toLowerCase())?0:1,X=C.includes(S.role.toLowerCase())?0:1;return R-X}):[])}),Ga(()=>(a(t),Ja),()=>{g(y,a(t)?.description?Ja.parse(a(t).description):"")}),Ga(()=>a(t),()=>{g(H,(a(t)?.rows??[]).slice().sort((c,S)=>yt(c.chapterSE,S.chapterSE)))}),me(),oe();var Xa=As();Le("9y3fua",c=>{xe(()=>{we.title=`${a(t),r(()=>a(t)?.title||"Loading...")??""} - lib`})});var Ya=Ka(Xa);{var Et=c=>{var S=Ve(),R=s(S),X=o(s(R),4),Y=s(X),sa=o(Y,2);e(X),e(R),e(S),M("click",Y,xt),M("click",sa,wa),p(c,S)};m(Ya,c=>{a(ba)&&c(Et)})}var Oa=o(Ya,2),Pa=s(Oa),Ua=s(Pa),jt=s(Ua);e(Ua);var Za=o(Ua,4),at=s(Za),St=o(at,2);e(Za),e(Pa);var tt=o(Pa,2);{var At=c=>{var S=Ge(),R=s(S),X=o(R,2);e(S),$(()=>{oa(R,"src",(a(t),r(()=>a(t).coverImageUrl))),oa(R,"alt",(a(t),r(()=>a(t).title)))}),M("click",R,je(function(Y){Se.call(this,v,Y)})),M("click",X,()=>g(G,!1)),M("click",S,()=>g(G,!1)),p(c,S)};m(tt,c=>{a(G),a(t),r(()=>a(G)&&a(t)&&a(t).coverImageUrl)&&c(At)})}var Lt=o(tt,2);{var Nt=c=>{var S=js(),R=s(S),X=s(R),Y=s(X),sa=s(Y),zt=s(sa);{var It=i=>{var n=Ke();$(()=>{oa(n,"src",(a(t),r(()=>a(t).coverImageUrl))),oa(n,"alt",(a(t),r(()=>a(t).title)))}),M("click",n,()=>g(G,!0)),p(i,n)},Bt=i=>{var n=Je();p(i,n)};m(zt,i=>{a(t),r(()=>a(t).coverImageUrl)?i(It):i(Bt,!1)})}e(sa);var et=o(sa,2),Da=s(et),Rt=s(Da,!0);e(Da),ma(Da,(i,n)=>xa?.(i,n),()=>a(t)?.title);var st=o(Da,2);{var Ot=i=>{var n=Qe(),h=s(n,!0);e(n),ma(n,(f,u)=>xa?.(f,u),()=>a(t).alternativeTitles.join(", ")),$(f=>N(h,f),[()=>(a(t),r(()=>a(t).alternativeTitles.join(", ")))]),p(i,n)};m(st,i=>{a(t),r(()=>(a(t).alternativeTitles??[]).length>0)&&i(Ot)})}var rt=o(st,2);{var Pt=i=>{var n=Ye();ca(n,5,()=>(a(t),r(()=>a(t).badges)),pa,(h,f)=>{var u=Xe(),P=s(u,!0);e(u),ma(u,(T,U)=>xa?.(T,U),()=>a(f)),$(()=>N(P,a(f))),p(h,u)}),e(n),p(i,n)};m(rt,i=>{a(t),r(()=>(a(t).badges??[]).length>0)&&i(Pt)})}var qa=o(rt,2),nt=s(qa);{var Ut=i=>{var n=Ze(),h=s(n,!0);e(n),$(()=>N(h,(a(t),r(()=>a(t).category)))),M("click",n,()=>j("category")),p(i,n)};m(nt,i=>{a(t),r(()=>a(t).category)&&i(Ut)})}var it=o(nt,2);{var qt=i=>{var n=as(),h=s(n,!0);e(n),$(()=>N(h,(a(t),r(()=>a(t).dataType)))),p(i,n)};m(it,i=>{a(t),r(()=>a(t).dataType)&&i(qt)})}var Ht=o(it,2);{var Wt=i=>{var n=ts(),h=o(s(n));e(n),$(()=>N(h,` ${Ta(ut),a(I),r(()=>ut[a(I)])??""}`)),p(i,n)};m(Ht,i=>{a(t),r(()=>a(t).rating)&&i(Wt)})}e(qa);var Vt=o(qa,2);{var Gt=i=>{var n=ss(),h=s(n);ca(h,4,()=>r(()=>Array.from({length:5},(f,u)=>u+1)),pa,(f,u)=>{var P=es(),T=Ka(P);bt(T);var U=o(T,2);bt(U),$(()=>{ft(T,u*2-1),_t(T,a(I)===u*2-1),oa(T,"aria-label",`${u-.5} star`),ft(U,u*2),_t(U,a(I)===u*2),oa(U,"aria-label",`${u} star`)}),M("change",T,()=>Ea(u*2-1)),M("change",U,()=>Ea(u*2)),p(f,P)}),e(h),e(n),p(i,n)};m(Vt,i=>{a(t),r(()=>a(t).rating)&&i(Gt)})}e(et),e(Y);var ot=o(Y,2),dt=s(ot);{var Kt=i=>{var n=rs(),h=s(n,!0);e(n),ma(n,(f,u)=>xa?.(f,u),()=>a(t).alternativeTitles.join(", ")),$(f=>N(h,f),[()=>(a(t),r(()=>a(t).alternativeTitles.join(", ")))]),p(i,n)};m(dt,i=>{a(t),r(()=>(a(t).alternativeTitles??[]).length>0)&&i(Kt)})}var Jt=o(dt,2);{var Qt=i=>{var n=is();ca(n,5,()=>(a(t),r(()=>a(t).tags)),pa,(h,f)=>{var u=ns(),P=s(u,!0);e(u),ma(u,(T,U)=>xa?.(T,U),()=>a(f)),$(()=>N(P,a(f))),p(h,u)}),e(n),p(i,n)};m(Jt,i=>{a(t),r(()=>(a(t).tags??[]).length>0)&&i(Qt)})}e(ot),e(X),e(R);var lt=o(R,2);{var Xt=i=>{var n=gs(),h=s(n),f=s(h),u=o(s(f)),P=s(u);ha(P,()=>(Ta(ea),r(()=>ea.edit))),e(u);var T=o(u,2),U=s(T);ha(U,()=>(Ta(ea),r(()=>ea.add))),e(T),e(f);var la=o(f,2);ca(la,5,()=>a(w),pa,(D,d)=>{var _=vs(),W=s(_);{var V=O=>{var q=os();ma(q,(Z,aa)=>xa?.(Z,aa),()=>a(d).name),$(()=>{oa(q,"src",(a(d),r(()=>a(d).image))),oa(q,"alt",(a(d),r(()=>a(d).name)))}),$e(q),p(O,q)},ra=O=>{var q=ds();p(O,q)};m(W,O=>{a(d),r(()=>a(d).image)?O(V):O(ra,!1)})}var na=o(W,2),ia=s(na);{var ka=O=>{var q=ls();p(O,q)},fa=ye(()=>(a(d),r(()=>C.includes(a(d).role.toLowerCase()))));m(ia,O=>{a(fa)&&O(ka)})}var va=o(ia,2),Ca=s(va,!0);e(va),e(na),e(_),$(()=>N(Ca,(a(d),r(()=>a(d).name)))),M("click",_,()=>Q(a(d).name)),p(D,_)}),e(la);var ya=o(la,2);ca(ya,1,()=>a(w),pa,(D,d)=>{var _=ie(),W=Ka(_);{var V=ra=>{var na=_s(),ia=s(na),ka=s(ia),fa=s(ka),va=s(fa),Ca=s(va);ha(Ca,()=>(Ta(ea),r(()=>ea.edit))),e(va),e(fa);var O=o(fa,2),q=s(O),Z=o(s(q),2),aa=s(Z,!0);e(Z),e(q);var _a=o(q,2);{var Sa=F=>{var z=cs(),ta=o(s(z),2),ga=s(ta,!0);e(ta),e(z),$(()=>N(ga,(a(d),r(()=>a(d).role)))),p(F,z)};m(_a,F=>{a(d),r(()=>a(d).role)&&F(Sa)})}var $a=o(_a,2);{var Ha=F=>{var z=ps(),ta=o(s(z),2),ga=s(ta,!0);e(ta),e(z),$(()=>N(ga,(a(d),r(()=>a(d).description)))),p(F,z)};m($a,F=>{a(d),r(()=>a(d).description)&&F(Ha)})}var pt=o($a,2);{var ee=F=>{var z=us(),ta=o(s(z),2),ga=s(ta,!0);e(ta),e(z),$(Wa=>N(ga,Wa),[()=>(a(d),r(()=>a(d).alternativeNames.join(", ")))]),p(F,z)};m(pt,F=>{a(d),r(()=>(a(d).alternativeNames??[]).length>0)&&F(ee)})}var se=o(pt,2);{var re=F=>{var z=fs(),ta=o(s(z));ca(ta,5,()=>(a(d),r(()=>a(d).tags)),pa,(ga,Wa)=>{var Va=bs(),ne=s(Va,!0);e(Va),$(()=>N(ne,a(Wa))),p(ga,Va)}),e(ta),e(z),p(F,z)};m(se,F=>{a(d),r(()=>(a(d).tags??[]).length>0)&&F(re)})}e(O),ma(O,(F,z)=>xa?.(F,z),()=>a(d).name),e(ka),e(ia),e(na),$(()=>N(aa,(a(d),r(()=>a(d).name)))),M("click",va,()=>Tt(a(d))),Re(3,na,()=>qe,()=>({duration:200})),p(ra,na)};m(W,ra=>{a(J),a(d),r(()=>a(J)===a(d).name&&(a(d).name||a(d).role||(a(d).alternativeNames??[]).length>0||(a(d).tags??[]).length>0))&&ra(V)})}p(D,_)}),e(h),e(n),M("click",u,()=>j("characters")),M("click",T,$t),p(i,n)};m(lt,i=>{a(t),r(()=>(a(t).characters??[]).length>0)&&i(Xt)})}var vt=o(lt,2);{var Yt=i=>{var n=ms(),h=s(n),f=s(h),u=o(s(f));e(f);var P=o(f,2),T=s(P);ha(T,()=>a(y)),e(P),e(h),e(n),M("click",u,()=>j("description")),p(i,n)};m(vt,i=>{a(t),r(()=>a(t).description)&&i(Yt)})}var ct=o(vt,2);{var Zt=i=>{var n=ks(),h=s(n),f=s(h),u=o(s(f)),P=s(u);ha(P,()=>(Ta(ea),r(()=>ea.edit))),e(u);var T=o(u,2),U=s(T);ha(U,()=>(Ta(ea),r(()=>ea.add))),e(T),e(f);var la=o(f,2),ya=s(la),D=o(s(ya),2);ca(D,1,()=>a(H),pa,(d,_)=>{var W=ys(),V=s(W),ra=s(V),na=s(ra,!0);e(ra);var ia=o(ra,2),ka=s(ia,!0);e(ia);var fa=o(ia,2);{var va=Z=>{var aa=xs();ca(aa,5,()=>(a(_),r(()=>a(_).tags)),pa,(_a,Sa)=>{var $a=hs(),Ha=s($a,!0);e($a),$(()=>N(Ha,a(Sa))),p(_a,$a)}),e(aa),p(Z,aa)};m(fa,Z=>{a(_),r(()=>(a(_).tags??[]).length>0)&&Z(va)})}e(V);var Ca=o(V,2),O=s(Ca);{var q=Z=>{var aa=ws(),_a=o(s(aa),2),Sa=s(_a);ha(Sa,()=>(a(_),r(()=>wt(a(_).description)))),e(_a),e(aa),p(Z,aa)};m(O,Z=>{a(_),r(()=>a(_).description)&&Z(q)})}e(Ca),e(W),$(()=>{N(na,(a(_),r(()=>a(_).chapterSE))),N(ka,(a(_),r(()=>a(_).characters)))}),M("click",V,()=>Ct(a(_))),p(d,W)}),e(ya),e(la),e(h),e(n),M("click",u,()=>j("chapters")),M("click",T,kt),p(i,n)};m(ct,i=>{a(t),r(()=>(a(t).rows??[]).length>0)&&i(Zt)})}var ae=o(ct,2);{var te=i=>{var n=Es(),h=o(s(n),2),f=s(h),u=s(f);{var P=D=>{var d=Cs(),_=o(s(d),2),W=s(_,!0);e(_),e(d),$(V=>N(W,V),[()=>(a(t),r(()=>Ia(a(t).createdAt)))]),p(D,d)};m(u,D=>{a(t),r(()=>a(t).createdAt)&&D(P)})}var T=o(u,2);{var U=D=>{var d=$s(),_=o(s(d),2),W=s(_,!0);e(_),e(d),$(V=>N(W,V),[()=>(a(t),r(()=>Ia(a(t).openedAt)))]),p(D,d)};m(T,D=>{a(t),r(()=>a(t).openedAt)&&D(U)})}var la=o(T,2);{var ya=D=>{var d=Ts(),_=o(s(d),2),W=s(_,!0);e(_),e(d),$(V=>N(W,V),[()=>(a(t),r(()=>Ia(a(t).editedAt)))]),p(D,d)};m(la,D=>{a(t),r(()=>a(t).editedAt)&&D(ya)})}e(f),e(h),e(n),p(i,n)};m(ae,i=>{a(t),r(()=>a(t).createdAt||a(t).openedAt||a(t).editedAt)&&i(te)})}e(S),$(()=>N(Rt,(a(t),r(()=>a(t).title)))),p(c,S)},Mt=c=>{var S=Ss();p(c,S)};m(Lt,c=>{a(t)?c(Nt):c(Mt,!1)})}e(Oa);var Dt=o(Oa,2);{var Ft=c=>{Ae(c,{get entryId(){return a(k)},get editSection(){return a(B)},get selectedChapter(){return a(Ba)},get selectedCharacter(){return a(Ra)},$$events:{save:Na,cancel:ja}})};m(Dt,c=>{a(x)&&c(Ft)})}$(()=>oa(jt,"href",`${Me??""}/`)),M("click",at,()=>j("All")),M("click",St,Ma),p(l,Xa),he(),L()}export{Ps as component,Os as universal};

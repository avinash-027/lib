import{c as St,a as w,f as E,d as aa}from"../chunks/DLeEY7fs.js";import{i as Je}from"../chunks/D56Uv2cy.js";import{h as Yt,z as Ue,A as Ge,D as qe,w as K,o as D,E as a,G as l,v as e,F as t,B as ee,aP as pa,W as s,aN as Ct,aT as Ve,aU as Wt,V as C,ax as De,aY as _t,aZ as je,a_ as ga,O as fa,aW as ma}from"../chunks/BPO9GtFz.js";import{h as ha}from"../chunks/CuXflmye.js";import{d as wa,w as Bt,c as pt,o as zt,g as xa}from"../chunks/Dpa3FFmK.js";import{s as de,e as v,r as _a}from"../chunks/DfAXxMbk.js";import{p as ue,i as J,b as Ht,a as ke,s as gt}from"../chunks/CrlJmSwP.js";import{t as ya,d as le,e as Ie,k as Le,c as ka,s as At,j as ve,S as F,r as ce,l as ae,m as la,a as We,b as at,g as Ca,i as ze,n as Zt,R as Xt,o as He,f as Sa,h as Aa,p as Kt,q as ea,E as Ea}from"../chunks/CdRAzi-M.js";import{g as Ta,b as $a}from"../chunks/DHe1YFyg.js";function sa(x,i,_,p){var f=x.__style;if(Yt||f!==i){var y=ya(i);(!Yt||y!==x.getAttribute("style"))&&(y==null?x.removeAttribute("style"):x.style.cssText=y),x.__style=i}return p}function Ma(){const{subscribe:x,set:i,update:_}=Bt([]);return{subscribe:x,set:i,update:_,load:async()=>{const p=await le.getAllEntries();return i(p),p},add:async p=>{const f=await le.addEntry(p);_(y=>[...y,{...p,id:f}])},updateEntry:async(p,f)=>{await le.updateEntry(p,f),_(y=>y.map(d=>d.id===p?{...d,...f}:d))},deleteEntry:async p=>{await le.deleteEntry(p),_(f=>f.filter(y=>y.id!==p))}}}const Ot=Ma(),Ne=Bt(""),ut=Bt("default"),bt=Jt("libsettings:selectedCategory","All"),yt=Jt("libsettings:sortField","createdAt"),kt=Jt("libsettings:sortOrder","desc"),ta=Jt("lib:gridCols",4),ja=wa([Ot,bt,Ne,ut,yt,kt],([x,i,_,p,f,y])=>{let d=[...x];if(i!=="All"&&(d=d.filter(m=>m.category===i)),_){const m=_.toLowerCase();d=d.filter(o=>{switch(p){case"a":return o.alternativeTitles.join(" ").toLowerCase().includes(m);case"t":return o.tags.join(" ").toLowerCase().includes(m);case"b":return o.badges.join(" ").toLowerCase().includes(m);case"c":return o.characters.map(N=>N.Name).join(" ").toLowerCase().includes(m);case"d":return o.dataType.toLowerCase().includes(m);default:return o.title.toLowerCase().includes(m)||o.alternativeTitles.join(" ").toLowerCase().includes(m)}})}return d=d.sort((m,o)=>{const N=m[f]??"",B=o[f]??"";return y==="asc"?N>B?1:-1:N<B?1:-1}),d});function Jt(x,i){const _=localStorage.getItem(x),{subscribe:p,set:f,update:y}=Bt(_?JSON.parse(_):i);return{subscribe:p,set:d=>{localStorage.setItem(x,JSON.stringify(d)),f(d)},update:d=>{y(m=>{const o=d(m);return localStorage.setItem(x,JSON.stringify(o)),o})}}}let Ft=null;async function Na(){if(localStorage.getItem("autoBackupEnabled")!=="true")return;const i=await(await le.getDB()).get("settings","backupDirHandle");i&&ra(i)}async function Da(x){const i=await le.exportToJSON(),p=await(await x.getFileHandle("lib-autobackup.json",{create:!0})).createWritable();await p.write(JSON.stringify(i,null,2)),await p.close(),console.log("‚úÖ Auto backup saved at",new Date().toLocaleString())}function ra(x){Ft&&clearTimeout(Ft);const i=new Date,_=new Date;_.setHours(12,0,0,0);const p=new Date;p.setHours(24,0,0,0);let f;i<_?f=_:f=p;const y=f.getTime()-i.getTime();Ft=window.setTimeout(async()=>{await x.queryPermission({mode:"readwrite"})==="granted"&&await Da(x),ra(x)},y)}function Ia(x){const i=new IntersectionObserver(([_],p)=>{if(_.isIntersecting){const f=x.dataset.src;f&&(x.src=f),x.classList.add("lozad-loaded"),p.unobserve(x)}});return i.observe(x),{destroy(){i.unobserve(x)}}}var La=E('<div class="px-1 w-full opacity-80 text-sm h-65 md:h-55 flex items-end justify-center text-base-content/50 scroll-smooth"><div>No entries found. <ul class="list-disc list-inside mt-1"><li>Add new entries by clicking the <b>"+"</b> button.</li> <li>To Manage categories, click the "Categories" button in the <b>Menu</b>.</li> <li class="text-success mt-1">ID (auto-generated) and slug are <b>unique identifiers</b></li> <li class="text-success"><b>Import</b> uses fingerprint matching (slug prioritized)</li></ul></div></div>'),Oa=E('<button type="button"><!></button>'),Ba=E('<img class="w-full h-full object-cover lozad"/>'),za=E('<div class="w-full h-full flex items-center justify-center text-base-content/20"><!></div>'),Ja=E('<span class="absolute bottom-0 left-0 rounded-se-md text-[.7em] md:text-sm bg-base-200/85 px-1 py-0"> </span>'),Ua=E('<span class="absolute top-0.5 left-0.5 rounded-2xl text-xs md:text-sm bg-info text-base-300 px-1 py-0 font-semibold"> </span>'),qa=E('<div class="relative"><!> <button class="card bg-base-100 shadow-xl cursor-pointer hover:shadow-2xl transition-shadow w-full h-full"><figure class="relative aspect-[3/4] bg-base-300"><!> <!></figure> <div class="card-body p-2"><!> <h3 class="card-title text-xs sm:text-sm line-clamp-2"> </h3></div></button></div>'),Ra=E("<div></div>");function Fa(x,i){Ue(i,!1);let _=ue(i,"entries",24,()=>[]),p=ue(i,"selectionMode",8,!1),f=ue(i,"selectedEntries",24,()=>new Set),y=ue(i,"gridCols",8,4);const d=pt();function m(A){!p()&&A!==void 0&&Ta(`${$a}/detail/${A}`)}function o(A){d("toggleSelect",A)}const N={2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5"};Je();var B=St(),U=Ge(B);{var O=A=>{var L=La();w(A,L)},T=A=>{var L=Ra();Ie(L,5,_,z=>z.id,(z,k)=>{var h=qa(),c=a(h);{var g=u=>{var S=Oa();let W;var Ce=a(S);{var be=se=>{var Z=St(),X=Ge(Z);ve(X,()=>(K(F),D(()=>F.selectTick))),w(se,Z)},oe=pa(()=>(K(f()),e(k),D(()=>f().has(e(k).id))));J(Ce,se=>{e(oe)&&se(be)})}t(S),ee(se=>W=Le(S,1,"rounded-xl absolute inset-0 z-10 flex items-center justify-center bg-black/20 cursor-pointer transition-opacity",null,W,se),[()=>({selected:f().has(e(k).id)})]),v("click",S,se=>{se.stopPropagation(),o(e(k).id)}),w(u,S)};J(c,u=>{p()&&u(g)})}var M=l(c,2),I=a(M),V=a(I);{var G=u=>{var S=Ba();ka(S,W=>Ia?.(W)),ee(()=>{At(S,"src",(e(k),D(()=>e(k).coverImageUrl))),At(S,"alt",(e(k),D(()=>e(k).title)))}),_a(S),w(u,S)},R=u=>{var S=za(),W=a(S);ve(W,()=>(K(F),D(()=>F.imgIcon))),t(S),w(u,S)};J(V,u=>{e(k),D(()=>e(k).coverImageUrl)?u(G):u(R,!1)})}var P=l(V,2);{var Q=u=>{var S=Ja(),W=a(S,!0);t(S),ee(()=>de(W,(e(k),D(()=>e(k).dataType)))),w(u,S)};J(P,u=>{e(k),D(()=>e(k).dataType)&&u(Q)})}t(I);var j=l(I,2),H=a(j);{var re=u=>{var S=Ua(),W=a(S,!0);t(S),ee(()=>de(W,(e(k),D(()=>e(k).rating)))),w(u,S)};J(H,u=>{e(k),D(()=>e(k).rating!==null&&e(k).rating>0)&&u(re)})}var ne=l(H,2),Y=a(ne,!0);t(ne),t(j),t(M),t(h),ee(()=>de(Y,(e(k),D(()=>e(k).title)))),v("click",M,()=>m(e(k).id)),w(z,h)}),t(L),ee(()=>Le(L,1,(K(y()),D(()=>`grid gap-2 ${N[y()]} md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 scroll-smooth`)))),w(A,L)};J(U,A=>{K(_()),D(()=>_().length===0)?A(O):A(T,!1)})}w(x,B),qe()}var Ha=E("alternative titles <br/>('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)",1),Wa=E("tags <br/>('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)",1),Va=E("badges <br/>('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)",1),Ga=E("characters <br/>('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)",1),Pa=E('<div class="text-xs text-info mt-2">Searching in: <!> <!> <!> <!></div>'),Qa=E(`<div class="bg-base-200 px-4 pt-3 pb-1 shadow-lg"><div class="flex gap-2 items-center"><input type="text" placeholder="Search ('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)" class="input input-bordered flex-1"/> <button class="btn px-[10px] btn-secondary btn-soft rounded-full" aria-label="Close search"><!></button></div> <!></div>`);function Ya(x,i){Ue(i,!1);const _=()=>ke(Ne,"$searchQuery",f),p=()=>ke(ut,"$searchMode",f),[f,y]=gt();let d=ue(i,"show",12,!1),m=C(""),o=C(),N=C(!1);zt(async()=>{const h=_(),c=p();h&&(d(!0),s(m,c!=="default"?`${c}:${h}`:h)),await Ct(),s(N,!0)});function B(){s(m,""),Ne.set(""),ut.set("default"),d(!1)}Ve(()=>Ne,()=>{xa(Ne)&&d(!0)}),Ve(()=>(K(d()),e(o),Ct),()=>{d()&&e(o)&&Ct().then(()=>e(o).focus())}),Ve(()=>(e(N),e(m),Ne),()=>{if(e(N)){const h=e(m).trim(),c=h.toLowerCase();c.startsWith("a:")?(ut.set("a"),Ne.set(h.slice(2))):c.startsWith("t:")?(ut.set("t"),Ne.set(h.slice(2))):(ut.set("default"),Ne.set(h))}}),Wt(),Je();var U=Qa(),O=a(U),T=a(O);ce(T),Ht(T,h=>s(o,h),()=>e(o));var A=l(T,2),L=a(A);ve(L,()=>(K(F),D(()=>F.closeCross))),t(A),t(O);var z=l(O,2);{var k=h=>{var c=Pa(),g=l(a(c));{var M=j=>{var H=Ha();De(2),w(j,H)};J(g,j=>{p()==="a"&&j(M)})}var I=l(g,2);{var V=j=>{var H=Wa();De(2),w(j,H)};J(I,j=>{p()==="t"&&j(V)})}var G=l(I,2);{var R=j=>{var H=Va();De(2),w(j,H)};J(G,j=>{p()==="b"&&j(R)})}var P=l(G,2);{var Q=j=>{var H=Ga();De(2),w(j,H)};J(P,j=>{p()==="c"&&j(Q)})}t(c),w(h,c)};J(z,h=>{p()!=="default"&&h(k)})}t(U),ae(T,()=>e(m),h=>s(m,h)),v("click",A,B),w(x,U),qe(),y()}var Za=E('<div class="fixed inset-0 bg-black/50 z-150 flex items-end" role="presentation"><div class="bg-base-100 w-full rounded-t-2xl p-6 max-h-[80vh] overflow-auto" role="dialog" tabindex="-1"><h3 class="text-2xl font-bold mb-6">Sort & Filter</h3> <div class="form-control mb-4"><label class="label" for="sort-field"><span class="label-text font-semibold">Sort By</span></label> <select id="sort-field" class="select select-bordered w-full"><option>Title (A-Z)</option><option>Rating</option><option>Last Edited</option><option>Date Created</option><option>Last Opened</option></select></div> <div class="form-control mb-6"><label class="label" for="sort-order"><span class="label-text font-semibold">Order</span></label> <div class="flex gap-2"><button>Ascending</button> <button>Descending</button></div></div> <div class="flex gap-2"><button class="btn btn-outline flex-1">Reset</button> <button class="btn btn-primary flex-1">Apply</button></div></div></div>');function Xa(x,i){Ue(i,!1);const _=()=>ke(yt,"$sortField",f),p=()=>ke(kt,"$sortOrder",f),[f,y]=gt();let d=ue(i,"show",12,!1),m=C(_()),o=C(p());yt.subscribe(A=>s(m,A)),kt.subscribe(A=>s(o,A));function N(){yt.set(e(m)),kt.set(e(o)),d(!1)}function B(){s(m,"title"),s(o,"asc"),yt.set(e(m)),kt.set(e(o)),d(!1)}Je();var U=St(),O=Ge(U);{var T=A=>{var L=Za(),z=a(L),k=l(a(z),2),h=l(a(k),2),c=a(h);c.value=c.__value="title";var g=l(c);g.value=g.__value="rating";var M=l(g);M.value=M.__value="editedAt";var I=l(M);I.value=I.__value="createdAt";var V=l(I);V.value=V.__value="openedAt",t(h),t(k);var G=l(k,2),R=l(a(G),2),P=a(R);let Q;var j=l(P,2);let H;t(R),t(G);var re=l(G,2),ne=a(re),Y=l(ne,2);t(re),t(z),t(L),ee(()=>{Q=Le(P,1,"btn flex-1",null,Q,{"btn-primary":e(o)==="asc"}),At(P,"aria-pressed",e(o)==="asc"),H=Le(j,1,"btn flex-1",null,H,{"btn-primary":e(o)==="desc"}),At(j,"aria-pressed",e(o)==="desc")}),la(h,()=>e(m),u=>s(m,u)),v("click",P,()=>s(o,"asc")),v("click",j,()=>s(o,"desc")),v("click",ne,B),v("click",Y,N),v("click",z,We(function(u){at.call(this,i,u)})),v("keydown",z,function(u){at.call(this,i,u)}),v("click",L,()=>d(!1)),v("keydown",L,function(u){at.call(this,i,u)}),w(A,L)};J(O,A=>{d()&&A(T)})}w(x,U),qe(),y()}const Ka=`\`\`\`json\r
// Example\r
[\r
  {\r
    "id": 2,\r
    "title": "Solo Leveling",\r
    "slug": "solo-leveling",\r
    "alternativeTitles": [ "Only I Level Up", "Na Honja Level Up" ],\r
    "coverImageUrl": "https://example.com/covers/solo-leveling.jpg",\r
    "description": "In a world where gates connect Earth to deadly dungeons, the weakest hunter awakens a mysterious system that allows him to level up alone.",\r
    "badges": ["Manhwa", "Action", "Fantasy", "Completed"],\r
    "tags": [ "gates", "hunters", "dungeons", "system", "shadows", "awakening"],\r
    "rating": null,\r
    "createdAt": "2024-12-15T08:20:00.000Z",\r
    "openedAt": "2025-02-07T14:10:30.000Z",\r
    "editedAt": "2025-02-07T18:45:10.000Z",\r
    "characters": [\r
      {\r
        "Name": "Sung Jin-Woo",\r
        "Image": "https://example.com/characters/sung-jin-woo.png",\r
        "role": "Main",\r
        "alternativeNames": [ "Jinwoo"],\r
        "tags": ["MC", "Solo-Player"],\r
        "description": ""\r
      },\r
      {\r
        "Name": "Cha Hae-In",\r
        "role": "Main",\r
        "Image": "https://example.com/characters/cha-hae-in.png"\r
      },\r
      {\r
        "Name": "Go Gun-Hee",\r
        "role": "supporting",\r
        "Image": "https://example.com/characters/go-gun-hee.png"\r
      }\r
    ],\r
    "rows": [\r
      {\r
        "ChapterSE": "Episode 1 ‚Äì The Weakest Hunter",\r
        "Description": "E-rank hunter Sung Jin-Woo barely survives a low-level dungeon while struggling to pay his family‚Äôs medical bills.",\r
        "Tags": ["introduction", "low-rank", "desperation"],\r
        "Characters": "Sung Jin-Woo"\r
      },\r
      {\r
        "ChapterSE": "Episode 2 ‚Äì Double Dungeon",\r
        "Description": "A hidden dungeon reveals a deadly trial where survival depends on following cryptic rules.",\r
        "Tags": ["double-dungeon", "statues", "death"],\r
        "Characters": "Sung Jin-Woo, Dungeon Party"\r
      },\r
      {\r
        "ChapterSE": "Episode 3 ‚Äì The System",\r
        "Description": "After facing death, Jin-Woo awakens to a mysterious system that only he can see.",\r
        "Tags": ["awakening", "system", "rebirth"],\r
        "Characters": "Sung Jin-Woo"\r
      }\r
    ],\r
    "category": "Manhwa",\r
    "dataType": "json"\r
  },\r
  // ...\r
]\r
\`\`\``;var el=E('<div role="alert" class="fixed bottom-2 left-2 z-300 alert alert-info alert-outline bg-base-100"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 shrink-0 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>');function na(x,i){let _=ue(i,"showAlert",8,!1),p=ue(i,"message",8,"");var f=St(),y=Ge(f);{var d=m=>{var o=el(),N=l(a(o),2),B=a(N,!0);t(N),t(o),ee(()=>de(B,p())),w(m,o)};J(y,m=>{_()&&m(d)})}w(x,f)}var tl=E('<div class="text-left p-4 gap-1"><span class="loading loading-bars loading-sm text-primary"></span>Importing<span class="loading loading-bars loading-sm text-primary"></span></div>'),al=E('<div class="fixed inset-0 bg-black/50 z-150 flex" role="presentation"><div class="bg-base-100 w-80 h-full shadow-xl p-6 flex flex-col justify-between" role="dialog" tabindex="-1"><div><h2 class="text-2xl font-bold mb-6">Menu <button class="float-right cursor-pointer" aria-label="Close menu" type="button"><!></button></h2> <ul class="menu bg-base-200 rounded-box gap-1 md:gap-3"><li><button aria-label="Import JSON" class="btn btn-md btn-ghost"><!> Import JSON</button></li> <li><button aria-label="Export data" class="btn btn-md btn-ghost"><!> Export JSON</button></li> <li><button class="btn btn-md btn-ghost" aria-label="Export Markdown"><!> Export Md</button></li> <li><button aria-label="Open categories" class="btn btn-md btn-ghost"><!> Categories</button></li> <li><button class="btn btn-md btn-ghost">JSON Format</button></li></ul> <!></div> <dialog class="modal"><div class="modal-box max-w-3xl w-85 md:w-full h-auto max-h-[65vh]"><form method="dialog"><button type="button" aria-label="CloseJSONmodal" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2 text-lg p-5"><!></button></form> <h3 class="font-bold mb-2">Import JSON Structure</h3> <div class="prose max-w-full overflow-auto text-sm"><!></div></div></dialog> <div class="text-sm text-gray-500 disable"><div class="divider"></div> <p class="font-semibold my-4">ü§ñ AI √ó <a href="https://github.com/avinash-027/" target="_blank" class="link link-primary no-underline">User-A027</a> üë®‚Äçüíª</p></div></div></div>'),ll=E('<!> <!> <input type="file" accept=".json" class="hidden"/>',1);function sl(x,i){Ue(i,!1);let _=ue(i,"show",12,!1),p=C(""),f=C(!1);const y=pt();let d=C(),m=ue(i,"importing",8,!1);function o(){e(d).click()}function N(g){const I=g.target.files?.[0];if(!I)return;const V=new FileReader;V.onload=G=>{try{const R=JSON.parse(G.target?.result),P=Array.isArray(R)?R:[R];y("import",P)}catch{s(p,"Invalid JSON file"),s(f,!0),setTimeout(()=>{s(f,!1)},2e3)}},V.readAsText(I)}function B(){y("export")}let U=Ca.parse(Ka),O=C();function T(){e(O).showModal()}function A(){e(O).close()}Je();var L=ll(),z=Ge(L);na(z,{get showAlert(){return e(f)},get message(){return e(p)}});var k=l(z,2);{var h=g=>{var M=al(),I=a(M),V=a(I),G=a(V),R=l(a(G)),P=a(R);ve(P,()=>(K(F),D(()=>F.circleClose))),t(R),t(G);var Q=l(G,2),j=a(Q),H=a(j),re=a(H);ve(re,()=>(K(F),D(()=>F.import))),De(),t(H),t(j);var ne=l(j,2),Y=a(ne),u=a(Y);ve(u,()=>(K(F),D(()=>F.export))),De(),t(Y),t(ne);var S=l(ne,2),W=a(S),Ce=a(W);ve(Ce,()=>(K(F),D(()=>F.export))),De(),t(W),t(S);var be=l(S,2),oe=a(be),se=a(oe);ve(se,()=>(K(F),D(()=>F.category))),De(),t(oe),t(be);var Z=l(be,2),X=a(Z);t(Z),t(Q);var ge=l(Q,2);{var Ee=te=>{var lt=tl();w(te,lt)};J(ge,te=>{m()&&te(Ee)})}t(V);var Se=l(V,2),fe=a(Se),me=a(fe),xe=a(me),Te=a(xe);ve(Te,()=>(K(F),D(()=>F.circleClose))),t(xe),t(me);var Oe=l(me,4),Be=a(Oe);ve(Be,()=>U),t(Oe),t(fe),t(Se),Ht(Se,te=>s(O,te),()=>e(O)),De(2),t(I),t(M),v("click",R,()=>_(!1)),v("click",H,o),v("click",Y,B),v("click",W,()=>y("exportMd")),v("click",oe,()=>y("showCategories")),v("click",X,T),v("click",xe,A),v("click",Se,te=>{te.target===e(O)&&A()}),v("click",I,We(function(te){at.call(this,i,te)})),v("keydown",I,We(function(te){at.call(this,i,te)})),v("click",M,()=>_(!1)),v("keydown",M,te=>te.key==="Escape"&&_(!1)),w(g,M)};J(k,g=>{_()&&g(h)})}var c=l(k,2);Ht(c,g=>s(d,g),()=>e(d)),v("change",c,N),w(x,L),qe()}var rl=E('<p class="text-error text-sm mt-1"> </p>'),nl=E('<option class="border border-base-200"> </option>'),ol=E("<span>|</span>"),il=E("<span> </span>"),dl=E('<div class="flex gap-2 flex-wrap mb-2 p-2 rounded-lg bg-base-200 border border-base-300"><div class="flex gap-2 w-full"><label class="floating-label w-full" for="charName"><span><span class="label-text">Name **</span></span> <input type="text" id="charName" placeholder="Name *" class="input input-sm w-full"/></label> <label class="floating-label w-full" for="charRole"><span><span class="label-text">Role</span></span> <input type="text" id="charRole" placeholder="role" class="input input-sm w-full"/></label> <button class="btn btn-sm btn-square btn-error btn-outline">‚úï</button></div> <label class="floating-label w-full" for="charImgUrl"><span><span class="label-text">Image URL</span></span> <input type="text" id="charImgUrl" placeholder="Img URL" class="input input-sm w-full"/></label> <details class="w-full mt-2"><summary class="cursor-pointer text-sm font-medium text-primary text-center">Extra Details</summary> <div class="space-y-2 mt-2"><label class="floating-label w-full" for="charAltNames"><span><span class="label-text">alternativeNames</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <input id="charAltNames" placeholder="Alternative Names [Ex: Name01, name-01]" class="input input-sm w-full"/></label> <label class="floating-label w-full" for="charTags"><span><span class="label-text">char-Tags</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <input id="charTags" placeholder="Tags [Ex: Hero, Villain]" class="input input-sm w-full"/></label> <label class="floating-label w-full" for="charDescription"><span><span class="label-text">Description</span></span> <textarea id="charDescription" placeholder="Description" class="textarea textarea-bordered w-full"></textarea></label></div></details></div>'),cl=E('<div class="card bg-base-200 border border-base-300 p-4"><div class="flex gap-2 mb-2"><label class="floating-label w-full"><span>Chapter *</span> <input type="text" placeholder="Chapter (e.g., 1-5)" class="input input-bordered w-full input-sm flex-1"/></label> <button class="btn btn-square btn-error btn-outline btn-sm"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-4 h-4 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <label class="floating-label w-full"><span>Description</span> <textarea placeholder="Description" class="textarea textarea-bordered w-full textarea-sm mb-2"></textarea></label> <label class="floating-label w-full"><span>Tags (comma separated)</span> <input type="text" placeholder="Tags (comma separated)" class="input input-bordered w-full input-sm mb-2"/></label> <label class="floating-label w-full"><span>Characters</span> <input type="text" placeholder="Characters" class="input input-bordered w-full input-sm"/></label></div>'),vl=E('<div class="fixed inset-0 bg-black/50 z-150 flex items-center justify-center p-4"><div class="bg-base-100 w-full max-w-4xl max-h-[90vh] overflow-auto rounded-lg shadow-xl"><div class="bg-base-100 border-b border-base-300 p-4 flex justify-between items-center"><h2 class="text-2xl font-bold"> </h2> <button class="btn btn-square btn-ghost btn-sm"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-4"><div class="form-control"><label for="newtitle" class="floating-label"><span>Title <span class="label-text-alt text-info italic">: required</span></span> <input id="newtitle" type="text" placeholder="Title" class="input input-bordered w-full" required=""/></label> <!></div> <div class="form-control"><label for="newAltTitles" class="floating-label"><span><span class="label-text">Alternative Titles</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <input id="newAltTitles" type="text" placeholder="Alternative Titles [Ex: Title1, Title2]" class="input input-bordered w-full"/></label></div> <div class="form-control"><label for="newCoverImg" class="floating-label"><span class="label-text">Cover Image URL</span> <input id="newCoverImg" type="text" placeholder="Cover Image URL: Web Img Link" class="input input-bordered w-full"/></label></div> <div class="form-control"><label class="floating-label"><span class="label-text">Description</span> <textarea placeholder="Description" class="textarea textarea-bordered w-full h-24"></textarea></label></div> <div class="form-control"><label for="newBadges" class="floating-label"><span><span class="label-text">Badges</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <textarea id="newBadges" placeholder="Badges [Ex: Completed, Ongoing, Author, Artist, Favorite]" class="textarea textarea-bordered w-full"></textarea></label></div> <div class="form-control"><label for="newTags" class="floating-label"><span><span class="label-text">Tags</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <textarea id="newTags" placeholder="Tags [Ex: Themes, Genres]" class="textarea textarea-bordered w-full"></textarea></label></div> <div class="form-control"><label class="floating-label"><span class="label-text font-semibold">Category</span></label> <select class="select select-bordered w-full"><option class="border border-base-content/20 hover:bg-base-200">All</option><!></select></div> <div class="form-control"><label class="flex flex-wrap gap-2 justify-between"><span><span class="label-text font-semibold">Rating <span class="text-info">(0‚Äì10)</span></span></span> <div class="text-xs md:text-sm text-info"><span class="font-semibold">Value:</span> </div></label> <div class="w-full max-w-xs"><input type="range" min="0" max="10" step="1" class="range range-xs range-info"/> <div class="flex justify-between px-2.5 mt-1 text-xs"></div> <div class="flex justify-between px-2.5 mt-1 text-xs"></div></div></div> <div class="divider">Characters</div> <div class="space-y-2"><!> <button class="btn btn-outline btn-sm">+ Add Character</button></div> <div class="divider">Chapters</div> <div class="space-y-2"><!> <button class="btn btn-outline btn-sm">+ Add Chapter</button></div></div> <div class="sticky bottom-0 bg-base-100 border-t border-base-300 p-4 flex gap-2 justify-end"><button class="btn btn-outline">Cancel</button> <button class="btn btn-primary">Save</button></div></div></div>');function ul(x,i){Ue(i,!1);const _=()=>ke(He,"$categories",p),[p,f]=gt(),y=C();let d=ue(i,"entryId",8,null);const m=pt();let o=C(""),N=C(""),B=C(""),U=C(""),O=C(""),T=C(0),A=C(""),L=C("All"),z=C(!1),k=C(""),h=C([]),c=C([]);zt(async()=>{if(d()!==null){const b=await le.getEntryById(d());b&&(s(o,b.title),s(N,b.alternativeTitles.join(", ")),s(B,b.coverImageUrl||""),s(U,b.description),s(O,b.badges.join(", ")),s(T,Number(b.rating)),s(A,b.tags.join(", ")),s(L,b.category),s(h,b.characters.map(n=>({...n,_alternativeNamesString:(n.alternativeNames??[]).join(", "),_tagsString:(n.tags??[]).join(", ")}))),s(c,b.rows.map(n=>({...structuredClone(n),_tagsText:n.tags.join(", ")}))))}});function g(){s(h,[...e(h),{name:"",image:"",role:"",alternativeNames:[],tags:[],description:"",_alternativeNamesString:"",_tagsString:""}])}function M(b){s(h,e(h).filter((n,q)=>q!==b))}function I(){s(c,[...e(c),{chapterSE:"",description:"",characters:"",tags:[],_tagsText:""}])}function V(b){s(c,e(c).filter((n,q)=>q!==b))}async function G(){const b={title:e(o),slug:e(o).toLowerCase().trim().replace(/[\s]+/g,"-").replace(/[^a-z0-9\-]/g,""),alternativeTitles:e(N).split(",").map(n=>n.trim()).filter(Boolean),coverImageUrl:e(B)||null,description:e(U),badges:e(O).split(",").map(n=>n.trim()).filter(Boolean),rating:Number(e(T)),createdAt:null,openedAt:null,editedAt:null,tags:e(A).split(",").map(n=>n.trim()).filter(Boolean),category:e(L)||"All",dataType:"Lib",characters:e(h).filter(n=>n.name).map(n=>({name:n.name,image:n.image,role:n.role,description:n.description,alternativeNames:(n._alternativeNamesString??"").split(",").map(q=>q.trim()).filter(Boolean),tags:(n._tagsString??"").split(",").map(q=>q.trim()).filter(Boolean)})),rows:e(c).filter(n=>n.chapterSE).map(n=>({chapterSE:n.chapterSE,description:n.description,characters:n.characters,tags:n._tagsText.split(",").map(q=>q.trim()).filter(Boolean)}))};d()!==null?await le.updateEntry(d(),b):await le.addEntry(b),m("save")}function R(){m("cancel")}Ve(()=>e(o),()=>{s(y,e(o).toLowerCase().trim().replace(/[\s]+/g,"-").replace(/[^a-z0-9\-]/g,""))}),Ve(()=>(e(o),K(d()),e(y),e(z),Ct),()=>{e(o)?(async()=>{if(d()!==null){const b=await le.getEntryBySlug(e(y));s(z,!!b&&b.id!==d())}else s(z,!!await le.getEntryBySlug(e(y)));s(k,e(z)?`This title generates a slug(${e(y)}) that already Exists. Change title text`:""),await Ct()})():(s(z,!1),s(k,""))}),Wt(),Je();var P=vl(),Q=a(P),j=a(Q),H=a(j),re=a(H,!0);t(H);var ne=l(H,2);t(j);var Y=l(j,2),u=a(Y),S=a(u),W=l(a(S),2);ce(W),t(S);var Ce=l(S,2);{var be=b=>{var n=rl(),q=a(n,!0);t(n),ee(()=>de(q,e(k))),w(b,n)};J(Ce,b=>{e(z)&&b(be)})}t(u);var oe=l(u,2),se=a(oe),Z=l(a(se),2);ce(Z),t(se),t(oe);var X=l(oe,2),ge=a(X),Ee=l(a(ge),2);ce(Ee),t(ge),t(X);var Se=l(X,2),fe=a(Se),me=l(a(fe),2);_t(me),t(fe),t(Se);var xe=l(Se,2),Te=a(xe),Oe=l(a(Te),2);_t(Oe),t(Te),t(xe);var Be=l(xe,2),te=a(Be),lt=l(a(te),2);_t(lt),t(te),t(Be);var Pe=l(Be,2),st=l(a(Pe),2),rt=a(st);rt.value=rt.__value="All";var Et=l(rt);Ie(Et,1,()=>(_(),D(()=>_().filter(b=>b!=="All"))),ze,(b,n)=>{var q=nl(),ie=a(q,!0);t(q);var _e={};ee(()=>{de(ie,e(n)),_e!==(_e=e(n))&&(q.value=(q.__value=e(n))??"")}),w(b,q)}),t(st),t(Pe);var ft=l(Pe,2),nt=a(ft),Qe=l(a(nt),2),Ut=l(a(Qe));t(Qe),t(nt);var ot=l(nt,2),Ye=a(ot);ce(Ye);var mt=l(Ye,2);Ie(mt,4,()=>D(()=>Array.from({length:11},(b,n)=>n)),ze,(b,n)=>{var q=ol();ee(()=>Le(q,1,Zt(n===e(T)?"text-info font-bold":""))),w(b,q)}),t(mt);var it=l(mt,2);Ie(it,4,()=>D(()=>Array.from({length:11},(b,n)=>n)),ze,(b,n)=>{var q=il(),ie=a(q,!0);t(q),ee(()=>{Le(q,1,Zt(n===e(T)?"text-info font-bold":"")),de(ie,n)}),w(b,q)}),t(it),t(ot),t(ft);var Ze=l(ft,4),Tt=a(Ze);Ie(Tt,1,()=>e(h),ze,(b,n,q)=>{var ie=dl(),_e=a(ie),$e=a(_e),Ke=l(a($e),2);ce(Ke),t($e);var et=l($e,2),Ae=l(a(et),2);ce(Ae),t(et);var vt=l(et,2);t(_e);var Me=l(_e,2),tt=l(a(Me),2);ce(tt),t(Me);var Re=l(Me,2),Fe=l(a(Re),2),ye=a(Fe),ht=l(a(ye),2);ce(ht),t(ye);var wt=l(ye,2),Dt=l(a(wt),2);ce(Dt),t(wt);var xt=l(wt,2),It=l(a(xt),2);_t(It),t(xt),t(Fe),t(Re),t(ie),ae(Ke,()=>e(n).name,he=>(e(n).name=he,je(()=>e(h)))),ae(Ae,()=>e(n).role,he=>(e(n).role=he,je(()=>e(h)))),v("click",vt,()=>M(q)),ae(tt,()=>e(n).image,he=>(e(n).image=he,je(()=>e(h)))),ae(ht,()=>e(n)._alternativeNamesString,he=>(e(n)._alternativeNamesString=he,je(()=>e(h)))),ae(Dt,()=>e(n)._tagsString,he=>(e(n)._tagsString=he,je(()=>e(h)))),ae(It,()=>e(n).description,he=>(e(n).description=he,je(()=>e(h)))),w(b,ie)});var dt=l(Tt,2);t(Ze);var $t=l(Ze,4),Mt=a($t);Ie(Mt,1,()=>e(c),ze,(b,n,q)=>{var ie=cl(),_e=a(ie),$e=a(_e),Ke=l(a($e),2);ce(Ke),t($e);var et=l($e,2);t(_e);var Ae=l(_e,2),vt=l(a(Ae),2);_t(vt),t(Ae);var Me=l(Ae,2),tt=l(a(Me),2);ce(tt),t(Me);var Re=l(Me,2),Fe=l(a(Re),2);ce(Fe),t(Re),t(ie),ae(Ke,()=>e(n).chapterSE,ye=>(e(n).chapterSE=ye,je(()=>e(c)))),v("click",et,()=>V(q)),ae(vt,()=>e(n).description,ye=>(e(n).description=ye,je(()=>e(c)))),ae(tt,()=>e(n)._tagsText,ye=>(e(n)._tagsText=ye,je(()=>e(c)))),ae(Fe,()=>e(n).characters,ye=>(e(n).characters=ye,je(()=>e(c)))),w(b,ie)});var jt=l(Mt,2);t($t),t(Y);var Nt=l(Y,2),ct=a(Nt),Xe=l(ct,2);t(Nt),t(Q),t(P),ee(()=>{de(re,d()!==null?"Edit Entry":"New Entry"),de(Ut,` ${e(T)??""} - ${K(Xt),e(T),D(()=>Xt[e(T)])??""}`),Xe.disabled=!e(o)||!e(L)||e(z)}),v("click",ne,R),ae(W,()=>e(o),b=>s(o,b)),ae(Z,()=>e(N),b=>s(N,b)),ae(Ee,()=>e(B),b=>s(B,b)),ae(me,()=>e(U),b=>s(U,b)),ae(Oe,()=>e(O),b=>s(O,b)),ae(lt,()=>e(A),b=>s(A,b)),la(st,()=>e(L),b=>s(L,b)),ae(Ye,()=>e(T),b=>s(T,b)),v("click",dt,g),v("click",jt,I),v("click",ct,R),v("click",Xe,G),v("click",Q,We(function(b){at.call(this,i,b)})),v("click",P,R),w(x,P),qe(),f()}var bl=E('<input class="input input-sm input-bordered flex-1 mr-2"/>'),pl=E('<span class="truncate cursor-pointer"> </span>'),gl=E('<button class="btn btn-sm btn-success">Save</button>'),fl=E('<button class="btn btn-xs btn-info">Edit</button> <button class="btn btn-xs btn-error">Delete</button>',1),ml=E('<div class="flex gap-2"><!></div>'),hl=E('<li class="mb-2 flex items-center justify-between"><!> <!></li>'),wl=E(`<div class="fixed inset-0 z-150 flex bg-black/50" role="button" tabindex="0" aria-label="Close categories modal"><div class="h-full w-96 bg-base-100 p-6 shadow-xl flex flex-col" role="document"><h2 class="mb-6 text-2xl font-bold">Categories</h2> <div class="flex-1 overflow-y-auto pr-1 border border-base-content/30 rounded-xl p-1 px-2"><ul class="mb-4"></ul></div> <div class="flex gap-2 mt-3"><input class="input-bordered input flex-1" placeholder="New category"/> <button aria-label="Add new category" class="btn btn-primary">Add</button></div> <button class="btn btn-soft mt-2 w-full">Close</button> <div class="mt-1 px-1 text-xs justify-center text-success"><span> </span></div> <div class="my-2 alert alert-default alert-soft "><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 shrink-0 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>When a category is <b>deleted</b>, all entries in that category are <b>moved to the 'All'</b> category</span></div></div></div>`);function xl(x,i){Ue(i,!1);const _=()=>ke(He,"$categories",p),[p,f]=gt();let y=ue(i,"show",8,!1);const d=pt();let m=C(""),o=C(null),N=C("");function B(g){s(o,g),s(N,g)}async function U(g){const M=e(N).trim();if(!M||M==="All"||M===g){s(o,null);return}await He.rename(g,M),d("rename",{old:g,new:M}),s(o,null),L(`Category renamed to "${M}"`)}async function O(){const g=e(m).trim();!g||g==="All"||(await He.add(g),s(m,""))}let T=C(""),A=C(!1);function L(g,M=2e3){s(T,g),s(A,!0),setTimeout(()=>{s(A,!1)},M)}async function z(g){g!=="All"&&(await le.moveCategoryToAll(g),await He.remove(g),L(`Category "${g}" deleted. Entries moved to 'All'.`))}zt(()=>{He.load()}),Je();var k=St(),h=Ge(k);{var c=g=>{var M=wl(),I=a(M),V=l(a(I),2),G=a(V);Ie(G,5,()=>(_(),D(()=>["All",..._().filter(Y=>Y!=="All")])),ze,(Y,u)=>{var S=hl(),W=a(S);{var Ce=Z=>{var X=bl();ce(X),ga(X),ae(X,()=>e(N),ge=>s(N,ge)),v("keydown",X,ge=>ge.key==="Enter"&&U(e(u))),v("blur",X,()=>U(e(u))),w(Z,X)},be=Z=>{var X=pl(),ge=a(X,!0);t(X),ee(()=>de(ge,e(u))),v("dblclick",X,()=>B(e(u))),w(Z,X)};J(W,Z=>{e(o)===e(u)?Z(Ce):Z(be,!1)})}var oe=l(W,2);{var se=Z=>{var X=ml(),ge=a(X);{var Ee=fe=>{var me=gl();v("click",me,We(()=>U(e(u)))),w(fe,me)},Se=fe=>{var me=fl(),xe=Ge(me),Te=l(xe,2);v("click",xe,We(()=>B(e(u)))),v("click",Te,We(()=>z(e(u)))),w(fe,me)};J(ge,fe=>{e(o)===e(u)?fe(Ee):fe(Se,!1)})}t(X),w(Z,X)};J(oe,Z=>{e(u)!=="All"&&Z(se)})}t(S),w(Y,S)}),t(G),t(V);var R=l(V,2),P=a(R);ce(P);var Q=l(P,2);t(R);var j=l(R,2),H=l(j,2),re=a(H),ne=a(re,!0);t(re),t(H),De(2),t(I),t(M),ee(()=>{sa(H,`min-height: 1.55rem; max-height: 1.55rem; visibility: ${e(A)?"visible":"hidden"}`),de(ne,e(T))}),ae(P,()=>e(m),Y=>s(m,Y)),v("click",Q,O),v("click",j,()=>d("close")),v("click",I,We(function(Y){at.call(this,i,Y)})),v("click",M,()=>d("close")),v("keydown",M,Y=>{(Y.key==="Enter"||Y.key===" ")&&d("close")}),w(g,M)};J(h,g=>{y()&&g(c)})}w(x,k),qe(),f()}var _l=E('<li><input type="radio" name="theme-dropdown" class="theme-controller btn btn-sm btn-block btn-ghost justify-start"/></li>'),yl=E('<div><div tabindex="0" role="button" class="btn p-2 m-0 rounded-2xl">üé® <svg width="12px" height="12px" class="inline-block h-1 w-1 fill-current opacity-60" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048"><path d="M1799 349l242 241-1017 1017L7 590l242-241 775 775 775-775z"></path></svg></div> <ul tabindex="-1" class="dropdown-content menu bg-base-300 rounded-2xl z-150 w-52 p-2 shadow-sm"></ul></div>');function kl(x,i){Ue(i,!1);const _=()=>ke(Kt,"$theme",p),[p,f]=gt(),y=["light","cupcake","night","dark","emerald","fantasy","luxury","acid","coffee","retro","business","dracula","dim","garden"];let d=ue(i,"dropdownDirection",8,"dropdown-end");function m(B){Kt.set(B)}Je();var o=yl(),N=l(a(o),2);Ie(N,5,()=>y,ze,(B,U)=>{var O=_l(),T=a(O);ce(T),t(O),ee(()=>{At(T,"aria-label",e(U)),Sa(T,e(U)),Aa(T,_()===e(U))}),v("change",T,()=>m(e(U))),w(B,O)}),t(N),t(o),ee(()=>Le(o,1,`dropdown ${d()}`)),w(x,o),qe(),f()}var Cl=E('<span class="absolute -top-6 -left-2 flex h-5 w-20 items-center justify-center rounded-full bg-red-600 text-xs font-bold text-white p-1"> </span>'),Sl=E('<li><button class="w-full border border-base-300 text-left hover:bg-base-200"> </button></li>'),Al=E('<ul class="dropdown-content menu mt-3 w-52 rounded-box bg-base-100 p-2 shadow-md"></ul>'),El=E('<div class="fixed top-16 left-1/2 z-50 flex items-center gap-4 rounded-lg border border-base-300 bg-base-100 p-2 shadow-md select-none"><div role="button" tabindex="0" class="cursor-grab rounded-md bg-base-200 p-2 hidden md:inline-block" aria-label="Drag toolbar">‚†ø</div> <div class="md:tooltip" data-tip="Delete"><button class="btn relative btn-square btn-error" aria-label="Delete selected"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 7h12M10 11v6m4-6v6M5 7l1 12a2 2 0 002 2h8a2 2 0 002-2l1-12M9 7V4a1 1 0 011-1h4a1 1 0 011 1v3"></path></svg> <!></button></div> <div class="md:tooltip" data-tip="Select all"><button class="btn btn-square btn-ghost" aria-label="Select all"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7M5 7l4 4L19 1"></path></svg></button></div> <div class="md:tooltip" data-tip="Deselect all"><button class="btn btn-square opacity-50 btn-ghost" aria-label="Deselect all"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current opacity-20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7M5 7l4 4L19 1"></path></svg></button></div> <div><div class="md:tooltip" data-tip="Move to category"><button class="btn btn-square btn-ghost" aria-label="Move to category"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4h16v4H4V4zm0 8h16v4H4v-4zm0 8h16v4H4v-4z"></path></svg></button></div> <!></div> <div class="md:tooltip" data-tip="Cancel"><button class="btn btn-square bg-red-700 text-white btn-ghost hover:bg-red-500" aria-label="Cancel selection"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div role="button" tabindex="0" class="drag-handle cursor-grab rounded-md bg-base-200 p-2" aria-label="Drag toolbar">‚†ø</div></div>');function Tl(x,i){Ue(i,!1);let _=ue(i,"selectedCount",8,0),p=ue(i,"categoryList",24,()=>[]),f=ue(i,"showCategoryDropdown",8,!1);const y=pt();let d=!1,m=0,o=0,N=C(0),B=C(0);function U(u){d=!0,m=u.clientX-e(N),o=u.clientY-e(B),window.addEventListener("pointermove",O),window.addEventListener("pointerup",T)}function O(u){d&&(s(N,u.clientX-m),s(B,u.clientY-o))}function T(){d=!1,window.removeEventListener("pointermove",O),window.removeEventListener("pointerup",T)}Je();var A=El(),L=a(A),z=l(L,2),k=a(z),h=l(a(k),2);{var c=u=>{var S=Cl(),W=a(S,!0);t(S),ee(()=>de(W,_())),w(u,S)};J(h,u=>{_()>0&&u(c)})}t(k),t(z);var g=l(z,2),M=a(g);t(g);var I=l(g,2),V=a(I);t(I);var G=l(I,2);let R;var P=a(G),Q=a(P);t(P);var j=l(P,2);{var H=u=>{var S=Al();Ie(S,5,p,ze,(W,Ce)=>{var be=Sl(),oe=a(be),se=a(oe,!0);t(oe),t(be),ee(()=>de(se,e(Ce))),v("click",oe,()=>y("moveCategory",e(Ce))),w(W,be)}),t(S),w(u,S)};J(j,u=>{K(f()),K(p()),D(()=>f()&&p().length>0)&&u(H)})}t(G);var re=l(G,2),ne=a(re);t(re);var Y=l(re,2);t(A),ee(()=>{sa(A,`transform: translate(calc(-50% + ${e(N)??""}px), ${e(B)??""}px);`),k.disabled=_()===0,R=Le(G,1,"dropdown dropdown-end",null,R,{"dropdown-open":f()}),Q.disabled=_()===0}),v("pointerdown",L,U),v("click",k,()=>y("delete")),v("click",M,()=>y("selectAll")),v("click",V,()=>y("deselectAll")),v("click",Q,()=>y("toggleCategoryDropdown")),v("click",ne,()=>y("cancel")),v("pointerdown",Y,U),w(x,A),qe()}var $l=aa('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-current" fill="none" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4h16v16H4V4z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M8 12h8"></path></svg>'),Ml=aa('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-current" fill="none" viewBox="0 0 24 24" stroke-width="2"><rect x="4" y="4" width="16" height="16" stroke="currentColor" stroke-width="2"></rect><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h8"></path></svg>'),jl=E('<button><div class="indicator"><span class="indicator-item bg-base-100 text-xs rounded-3xl px-1.5 py-0.5 -top-1"> </span> <div class="z-10"> </div></div></button>'),Nl=E('<div class="flex items-center justify-center"><span class="loading loading-dots loading-sm text-primary"></span> <span class="loading loading-ring loading-sm text-primary"></span> <span class="loading loading-dots loading-sm text-primary"></span></div>'),Dl=E('<div class="flex items-center justify-center"><span class="loading loading-bars loading-sm text-primary"></span></div>'),Il=E('<div class="flex h-screen flex-col"><div class="navbar bg-base-100 shadow-lg"><div class="flex-none"><button class="btn btn-square btn-ghost" aria-label="Open menu"><!></button></div> <div class="flex-1"><span class="text-md md:text-xl font-bold"> <span class="hide-on-320 svelte-j9gjs9"> </span></span></div> <div class="flex-none"><button class="btn btn-square btn-ghost" aria-label="Toggle search"><!></button> <div class="tooltip-bottom tooltip" data-tip="Open filters"><button class="btn btn-square btn-ghost" aria-label="Open filters"><!></button></div> <div class="tooltip-bottom tooltip" data-tip="Select entries"><button class="btn btn-square btn-ghost" aria-label="Select entries"><!></button></div> <button class="btn btn-square btn-ghost inline-block md:hidden" aria-label="Toggle grid columns" title="Toggle grid columns"><!></button> <!></div></div> <!> <div class="tabs tabs-border flex-nowrap gap-3 overflow-x-auto bg-base-200 px-2 pt-2 pb-1 scrollbar-hide"><button class="p-0 m-0" title="Toggle unique entries" aria-label="Show unique entries only"><!></button> <button><div class="z-10">All</div> <span class="bg-base-100 text-xs rounded-3xl px-1.5 py-0.5"> </span></button> <!></div> <button class="z-100 btn fixed right-6 bottom-6 btn-circle shadow-xl btn-lg btn-primary" aria-label="Add new entry"><!></button> <!>  <div class="flex-1 overflow-auto p-4"><!> <!> <!></div></div> <!> <!> <!> <!> <!> <!>',1);function Ll(x,i){Ue(i,!1);const _=()=>ke(Ne,"$searchQuery",o),p=()=>ke(ja,"$filteredEntries",o),f=()=>ke(bt,"$selectedCategory",o),y=()=>ke(He,"$categories",o),d=()=>ke(Ot,"$entries",o),m=()=>ke(ta,"$gridCols",o),[o,N]=gt(),B=C(),U=C();let O=C(!1),T=C(!1),A=C(!1),L=C(!1),z=C(null),k=C(null),h=C(!1),c=C(new Set),g=C(!1);const M=pt();let I=C(!1),V=C(!1),G=C(""),R=C(!1);function P(){ta.update(r=>r===3?4:3)}async function Q(){const r=await le.getAllEntries();Ot.set(r),Array.from(new Set(r.map($=>$.category).filter($=>$&&$!=="All"))),He.load()}zt(async()=>{await Q(),Na();const r=localStorage.getItem("selectedCategory");r&&bt.set(r)});function j(){s(z,null),s(L,!0),s(g,!1)}async function H(){s(L,!1),s(z,null),await Q()}function re(){s(L,!1),s(z,null)}async function ne(){s(A,!1),s(k,null),await Q()}function Y(){s(A,!1),s(k,null)}let u;function S(r){s(G,r),s(R,!0),clearTimeout(u),u=window.setTimeout(()=>{s(R,!1)},1500)}let W=C(!1);async function Ce(r){s(W,!0),await le.importFromJSON(r),await Q(),s(W,!1),s(T,!1)}async function be(){const r=await le.exportToJSON(),$=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),we=URL.createObjectURL($),pe=document.createElement("a");pe.href=we,pe.download=`lib-export-${new Date().toISOString()}.json`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(we),s(T,!1),S("Exported to JSON üëç :Downloads/")}async function oe(){const r=await le.exportToMarkdown(),$=new Blob([r],{type:"text/markdown"}),we=URL.createObjectURL($),pe=document.createElement("a");pe.href=we,pe.download=`lib-export-${new Date().toISOString()}.md`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(we),s(T,!1),S("Exported to Markdown üëç :Downloads/")}async function se(r){await le.moveCategoryToAll(r),f()===r&&bt.set("All"),await Q(),s(h,!1)}let Z=C(!1);async function X(r){for(const we of e(c))d().find(Lt=>Lt.id===we)&&await le.updateEntry(we,{category:r});e(c).clear(),s(c,new Set(e(c))),s(g,!1);const $=await le.getAllEntries();Ot.set($),s(Z,!1)}function ge(r){e(c).has(r)?e(c).delete(r):e(c).add(r),s(c,new Set(e(c)))}let Ee=C(!1);async function Se(){if(e(c).size===0)return;s(Ee,!0);const r=Array.from(e(c));for(const $ of r)await le.deleteEntry($);e(c).clear(),s(c,new Set(e(c))),await Q(),s(g,!1),s(Ee,!1)}function fe(){s(c,new Set(p().map(r=>r.id)))}function me(){e(c).clear(),s(c,new Set(e(c)))}Ve(()=>_(),()=>{_().trim().length>0&&s(I,!0)}),Ve(()=>(e(V),p(),ea),()=>{s(B,e(V)?Array.from(new Map(p().map(r=>[ea(r),r])).values()):p())}),Ve(()=>y(),()=>{s(U,y().filter(r=>r!=="All"))}),Wt(),Je();var xe=Il(),Te=Ge(xe),Oe=a(Te),Be=a(Oe),te=a(Be),lt=a(te);ve(lt,()=>(K(F),D(()=>F.menu))),t(te),t(Be);var Pe=l(Be,2),st=a(Pe),rt=a(st);rt.nodeValue="Lib ";var Et=l(rt),ft=a(Et);t(Et),t(st),t(Pe);var nt=l(Pe,2),Qe=a(nt),Ut=a(Qe);ve(Ut,()=>(K(F),D(()=>F.search))),t(Qe);var ot=l(Qe,2),Ye=a(ot),mt=a(Ye);ve(mt,()=>(K(F),D(()=>F.filter))),t(Ye),t(ot);var it=l(ot,2),Ze=a(it),Tt=a(Ze);ve(Tt,()=>(K(F),D(()=>F.select))),t(Ze),t(it);var dt=l(it,2),$t=a(dt);ve($t,()=>(K(F),D(()=>F.toggleGrid))),t(dt);var Mt=l(dt,2);kl(Mt,{dropdownDirection:"dropdown-bottom dropdown-end"}),t(nt),t(Oe);var jt=l(Oe,2);{var Nt=r=>{Ya(r,{get show(){return e(I)},set show($){s(I,$)},$$legacy:!0})};J(jt,r=>{e(I)&&r(Nt)})}var ct=l(jt,2),Xe=a(ct),b=a(Xe);{var n=r=>{var $=$l();w(r,$)},q=r=>{var $=Ml();w(r,$)};J(b,r=>{e(V)?r(n):r(q,!1)})}t(Xe);var ie=l(Xe,2);let _e;var $e=l(a(ie),2),Ke=a($e,!0);t($e),t(ie);var et=l(ie,2);Ie(et,1,()=>e(U),ze,(r,$)=>{var we=jl();let pe;var Lt=a(we),qt=a(Lt),ua=a(qt,!0);t(qt);var Qt=l(qt,2),ba=a(Qt,!0);t(Qt),t(Lt),t(we),ee(Rt=>{pe=Le(we,1,"tab",null,pe,{"tab-active":f()===e($)}),de(ua,Rt),de(ba,e($))},[()=>(d(),e($),D(()=>d().filter(Rt=>Rt.category===e($)).length))]),v("click",we,()=>bt.set(e($))),w(r,we)}),t(ct);var Ae=l(ct,2),vt=a(Ae);ve(vt,()=>(K(F),D(()=>F.add))),t(Ae);var Me=l(Ae,2);{var tt=r=>{Tl(r,{get selectedCount(){return e(c),D(()=>e(c).size)},get categoryList(){return e(U)},get showCategoryDropdown(){return e(Z)},$$events:{delete:Se,selectAll:fe,deselectAll:me,toggleCategoryDropdown:()=>s(Z,!e(Z)),moveCategory:$=>X($.detail),cancel:()=>{s(g,!1),s(Z,!1),e(c).clear(),s(c,new Set(e(c)))}}})};J(Me,r=>{e(g)&&r(tt)})}var Re=l(Me,2),Fe=a(Re);{var ye=r=>{var $=Nl();w(r,$)};J(Fe,r=>{e(Ee)&&r(ye)})}var ht=l(Fe,2);{var wt=r=>{var $=Dl();w(r,$)};J(ht,r=>{e(W)&&r(wt)})}var Dt=l(ht,2);Fa(Dt,{get entries(){return e(B)},get selectionMode(){return e(g)},get selectedEntries(){return e(c)},get gridCols(){return m()},$$events:{toggleSelect:r=>ge(r.detail)}}),t(Re),t(Te);var xt=l(Te,2);{var It=r=>{Xa(r,{get show(){return e(O)},set show($){s(O,$)},$$legacy:!0})};J(xt,r=>{e(O)&&r(It)})}var he=l(xt,2);{var oa=r=>{sl(r,{get importing(){return e(W)},get show(){return e(T)},set show($){s(T,$)},$$events:{import:$=>Ce($.detail),export:be,exportMd:oe,showCategories:()=>{s(T,!1),s(h,!0)}},$$legacy:!0})};J(he,r=>{e(T)&&r(oa)})}var Vt=l(he,2);{var ia=r=>{xl(r,{get show(){return e(h)},$$events:{close:()=>s(h,!1),rename:$=>M("renameCategory",$.detail),delete:$=>se($.detail)}})};J(Vt,r=>{e(h)&&r(ia)})}var Gt=l(Vt,2);{var da=r=>{Ea(r,{get entryId(){return e(k)},$$events:{save:ne,cancel:Y}})};J(Gt,r=>{e(A)&&r(da)})}var Pt=l(Gt,2);{var ca=r=>{ul(r,{get entryId(){return e(z)},$$events:{save:H,cancel:re}})};J(Pt,r=>{e(L)&&r(ca)})}var va=l(Pt,2);na(va,{get showAlert(){return e(R)},get message(){return e(G)}}),ee(()=>{de(ft,`(${d(),D(()=>d().length)??""})`),_e=Le(ie,1,"tab relative",null,_e,{"tab-active":f()==="All"}),de(Ke,(d(),D(()=>d().length)))}),v("click",te,()=>s(T,!0)),v("click",Qe,()=>{s(I,!e(I)),s(g,!1)}),v("click",Ye,()=>{s(O,!e(O)),s(g,!1)}),v("click",Ze,()=>{e(g)&&(e(c).clear(),s(c,new Set(e(c))),s(Z,!1)),s(g,!e(g))}),v("click",dt,P),v("click",Xe,()=>s(V,!e(V))),v("click",ie,()=>bt.set("All")),v("click",Ae,j),w(x,xe),qe(),N()}function Wl(x){ha("1uha8ag",i=>{fa(()=>{ma.title="lib"})}),Ll(x,{})}export{Wl as component};

import{c as sa,a as k,f as R,d as la}from"../chunks/DLeEY7fs.js";import{i as ct}from"../chunks/D56Uv2cy.js";import{h as ya,z as ut,A as $t,D as vt,w as de,o as U,E as s,G as d,v as n,F as i,B as le,aP as _a,W as v,aN as ir,aT as dt,aU as $r,V as M,ax as We,aY as er,aZ as Ke,a_ as pn,O as Xr,aW as bn}from"../chunks/BPO9GtFz.js";import{h as mn}from"../chunks/CuXflmye.js";import{c as qt,o as Pr,g as hn}from"../chunks/Dpa3FFmK.js";import{s as we,e as T,r as wn}from"../chunks/DfAXxMbk.js";import{p as Ae,i as J,b as Sr,a as je,s as Jt}from"../chunks/CrlJmSwP.js";import{t as yn,d as he,e as tt,k as at,c as ja,s as dr,j as Ce,S as Q,l as st,m as tr,r as Ee,n as ve,o as Dr,p as Er,q as za,a as _t,b as Lt,g as _n,i as yt,u as xa,R as Da,v as lt,f as xn,h as Dn,w as Ea,x as rr,y as Ta,z as Vr,A as Aa,B as En,E as Tn}from"../chunks/DoUvKx62.js";import{g as An,b as Sn}from"../chunks/7D7Z2yPD.js";function Ba(e,t,r,a){var l=e.__style;if(ya||l!==t){var o=yn(t);(!ya||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}return a}let qr=null;async function On(){if(localStorage.getItem("autoBackupEnabled")!=="true")return;const t=await(await he.getDB()).get("settings","backupDirHandle");t&&Ua(t)}async function Cn(e){const t=await he.exportToJSON(),a=await(await e.getFileHandle("lib-autobackup.json",{create:!0})).createWritable();await a.write(JSON.stringify(t,null,2)),await a.close(),console.log("‚úÖ Auto backup saved at",new Date().toLocaleString())}function Ua(e){qr&&clearTimeout(qr);const t=new Date,r=new Date;r.setHours(12,0,0,0);const a=new Date;a.setHours(24,0,0,0);let l;t<r?l=r:l=a;const o=l.getTime()-t.getTime();qr=window.setTimeout(async()=>{await e.queryPermission({mode:"readwrite"})==="granted"&&await Cn(e),Ua(e)},o)}function In(e){const t=new IntersectionObserver(([r],a)=>{if(r.isIntersecting){const l=e.dataset.src;l&&(e.src=l),e.classList.add("lozad-loaded"),a.unobserve(e)}});return t.observe(e),{destroy(){t.unobserve(e)}}}var kn=R('<div class="px-1 w-full opacity-80 text-sm h-65 md:h-55 flex items-end justify-center text-base-content/50 scroll-smooth"><div>No entries found. <ul class="list-disc list-inside mt-1"><li>Add new entries by clicking the <b>"+"</b> button.</li> <li>To Manage categories, click the "Categories" button in the <b>Menu</b>.</li> <li class="text-success mt-1">ID (auto-generated) and slug are <b>unique identifiers</b></li> <li class="text-success"><b>Import</b> uses fingerprint matching (slug prioritized)</li></ul></div></div>'),Nn=la('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-12 h-12 bg-base-300/50 rounded-xl  drop-shadow-[0_0_10px_rgba(239,68,68,0.8)]" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7M5 7l4 4L19 1"></path></svg>'),Mn=R('<button type="button"><!></button>'),Rn=R('<img class="w-full h-full object-cover lozad"/>'),Ln=R('<div class="w-full h-full flex items-center justify-center text-base-content/20"><!></div>'),Fn=R('<span class="absolute bottom-0 left-0 rounded-se-md text-[.7em] md:text-sm bg-base-200/85 px-1 py-0"> </span>'),$n=R('<span class="z-11 absolute -top-[5px] right-1 rounded-full text-[.6em] w-1/2 font-semibold px-1 py-0 line-clamp-1 break-words md:text-sm bg-info text-base-300 group-hover:hidden"> </span>'),Pn=R('<span class="absolute top-1 left-1 rounded-2xl text-xs md:text-sm bg-info text-base-300 px-1 py-0 font-semibold"> </span>'),jn=R('<div class="relative"><!> <button class="group card bg-base-100 shadow-xl cursor-pointer hover:shadow-info/30 transition-[1px] w-full h-full transition duration-150 ease-in-out hover:-translate-y-1 hover:scale-102"><figure class="relative aspect-[3/4] bg-base-300"><!> <!></figure> <!> <div class="card-body p-2"><!> <div class="card-title text-xs sm:text-sm line-clamp-2"> </div></div></button></div>'),zn=R("<div></div>");function Bn(e,t){ut(t,!1);let r=Ae(t,"entries",24,()=>[]),a=Ae(t,"selectionMode",8,!1),l=Ae(t,"selectedEntries",24,()=>new Set),o=Ae(t,"gridCols",8,4);const u=qt();function p(m){!a()&&m!==void 0&&An(`${Sn}/detail/${m}`)}function c(m){u("toggleSelect",m)}const _={2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5"};ct();var g=sa(),x=$t(g);{var f=m=>{var A=kn();k(m,A)},b=m=>{var A=zn();tt(A,5,r,C=>C.id,(C,y)=>{var D=jn(),w=s(D);{var $=B=>{var L=Mn();let Z;var be=s(L);{var ce=re=>{var oe=Nn();k(re,oe)},Se=_a(()=>(de(l()),n(y),U(()=>l().has(n(y).id))));J(be,re=>{n(Se)&&re(ce)})}i(L),le(re=>Z=at(L,1,"rounded-xl absolute inset-0 z-10 flex items-center justify-center bg-black/30 text-base-accent cursor-pointer transition-opacity",null,Z,re),[()=>({selected:l().has(n(y).id)})]),T("click",L,re=>{re.stopPropagation(),c(n(y).id)}),k(B,L)};J(w,B=>{a()&&B($)})}var V=d(w,2),S=s(V),F=s(S);{var P=B=>{var L=Rn();ja(L,Z=>In?.(Z)),le(()=>{dr(L,"src",(n(y),U(()=>n(y).coverImageUrl))),dr(L,"alt",(n(y),U(()=>n(y).title)))}),wn(L),k(B,L)},W=B=>{var L=Ln(),Z=s(L);Ce(Z,()=>(de(Q),U(()=>Q.imgIcon))),i(L),k(B,L)};J(F,B=>{n(y),U(()=>n(y).coverImageUrl)?B(P):B(W,!1)})}var z=d(F,2);{var G=B=>{var L=Fn(),Z=s(L,!0);i(L),le(()=>we(Z,(n(y),U(()=>n(y).dataType)))),k(B,L)};J(z,B=>{n(y),U(()=>n(y).dataType)&&B(G)})}i(S);var N=d(S,2);{var H=B=>{var L=$n(),Z=s(L,!0);i(L),le(()=>we(Z,(n(y),U(()=>n(y).category)))),k(B,L)},te=_a(()=>(n(y),U(()=>n(y).category&&n(y).category.trim().toLowerCase()!=="all")));J(N,B=>{n(te)&&B(H)})}var se=d(N,2),ne=s(se);{var I=B=>{var L=Pn(),Z=s(L,!0);i(L),le(()=>we(Z,(n(y),U(()=>n(y).rating)))),k(B,L)};J(ne,B=>{n(y),U(()=>n(y).rating!==null&&n(y).rating>0)&&B(I)})}var X=d(ne,2),q=s(X,!0);i(X),i(se),i(V),i(D),le(()=>we(q,(n(y),U(()=>n(y).title)))),T("click",V,()=>p(n(y).id)),k(C,D)}),i(A),le(()=>at(A,1,(de(o()),U(()=>`grid gap-2 ${_[o()]} md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 scroll-smooth`)))),k(m,A)};J(x,m=>{de(r()),U(()=>r().length===0)?m(f):m(b,!1)})}k(e,g),vt()}var Un=R("alternative titles <br/>('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)",1),Gn=R("tags <br/>('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)",1),Wn=R("badges <br/>('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)",1),Hn=R("characters <br/>('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)",1),Zn=R('<div class="text-xs text-info mt-2">Searching in: <!> <!> <!> <!></div>'),Yn=R(`<div class="bg-base-200 px-4 pt-3 pb-1 shadow-lg"><div class="flex gap-2 items-center"><input type="text" placeholder="Search ('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)" class="input input-bordered flex-1"/> <button class="btn px-[10px] btn-outline text-bg-accent rounded-full" aria-label="Close search"><!></button></div> <!></div>`);function Vn(e,t){ut(t,!1);const r=()=>je(st,"$searchQuery",l),a=()=>je(tr,"$searchMode",l),[l,o]=Jt();let u=Ae(t,"show",12,!1),p=M(""),c=M(),_=M(!1);Pr(async()=>{const D=r(),w=a();D&&(u(!0),v(p,w!=="default"?`${w}:${D}`:D)),await ir(),v(_,!0)});function g(){v(p,""),st.set(""),tr.set("default"),u(!1)}dt(()=>st,()=>{hn(st)&&u(!0)}),dt(()=>(de(u()),n(c),ir),()=>{u()&&n(c)&&ir().then(()=>n(c).focus())}),dt(()=>(n(_),n(p),st),()=>{if(n(_)){const D=n(p).trim(),w=D.toLowerCase();w.startsWith("a:")?(tr.set("a"),st.set(D.slice(2))):w.startsWith("t:")?(tr.set("t"),st.set(D.slice(2))):(tr.set("default"),st.set(D))}}),$r(),ct();var x=Yn(),f=s(x),b=s(f);Ee(b),Sr(b,D=>v(c,D),()=>n(c));var m=d(b,2),A=s(m);Ce(A,()=>(de(Q),U(()=>Q.closeCross))),i(m),i(f);var C=d(f,2);{var y=D=>{var w=Zn(),$=d(s(w));{var V=N=>{var H=Un();We(2),k(N,H)};J($,N=>{a()==="a"&&N(V)})}var S=d($,2);{var F=N=>{var H=Gn();We(2),k(N,H)};J(S,N=>{a()==="t"&&N(F)})}var P=d(S,2);{var W=N=>{var H=Wn();We(2),k(N,H)};J(P,N=>{a()==="b"&&N(W)})}var z=d(P,2);{var G=N=>{var H=Hn();We(2),k(N,H)};J(z,N=>{a()==="c"&&N(G)})}i(w),k(D,w)};J(C,D=>{a()!=="default"&&D(y)})}i(x),ve(b,()=>n(p),D=>v(p,D)),T("click",m,g),k(e,x),vt(),o()}var qn=R('<div class="fixed inset-0 bg-black/50 z-150 flex items-end" role="presentation"><div class="bg-base-100 w-full rounded-t-2xl p-6 max-h-[80vh] overflow-auto" role="dialog" tabindex="-1"><h3 class="text-2xl font-bold mb-6">Sort & Filter</h3> <div class="form-control mb-4"><label class="label" for="sort-field"><span class="label-text font-semibold">Sort By</span></label> <select id="sort-field" class="select select-bordered w-full"><option>Title (A-Z)</option><option>Rating</option><option>Last Edited</option><option>Date Created</option><option>Last Opened</option></select></div> <div class="form-control mb-6"><label class="label" for="sort-order"><span class="label-text font-semibold">Order</span></label> <div class="flex gap-2"><button>Ascending</button> <button>Descending</button></div></div> <div class="flex gap-2"><button class="btn btn-outline flex-1">Reset</button> <button class="btn btn-primary flex-1">Apply</button></div></div></div>');function Jn(e,t){ut(t,!1);const r=()=>je(Dr,"$sortField",l),a=()=>je(Er,"$sortOrder",l),[l,o]=Jt();let u=Ae(t,"show",12,!1),p=M(r()),c=M(a());Dr.subscribe(m=>v(p,m)),Er.subscribe(m=>v(c,m));function _(){Dr.set(n(p)),Er.set(n(c)),u(!1)}function g(){v(p,"title"),v(c,"asc"),Dr.set(n(p)),Er.set(n(c)),u(!1)}ct();var x=sa(),f=$t(x);{var b=m=>{var A=qn(),C=s(A),y=d(s(C),2),D=d(s(y),2),w=s(D);w.value=w.__value="title";var $=d(w);$.value=$.__value="rating";var V=d($);V.value=V.__value="editedAt";var S=d(V);S.value=S.__value="createdAt";var F=d(S);F.value=F.__value="openedAt",i(D),i(y);var P=d(y,2),W=d(s(P),2),z=s(W);let G;var N=d(z,2);let H;i(W),i(P);var te=d(P,2),se=s(te),ne=d(se,2);i(te),i(C),i(A),le(()=>{G=at(z,1,"btn flex-1",null,G,{"btn-primary":n(c)==="asc"}),dr(z,"aria-pressed",n(c)==="asc"),H=at(N,1,"btn flex-1",null,H,{"btn-primary":n(c)==="desc"}),dr(N,"aria-pressed",n(c)==="desc")}),za(D,()=>n(p),I=>v(p,I)),T("click",z,()=>v(c,"asc")),T("click",N,()=>v(c,"desc")),T("click",se,g),T("click",ne,_),T("click",C,_t(function(I){Lt.call(this,t,I)})),T("keydown",C,function(I){Lt.call(this,t,I)}),T("click",A,()=>u(!1)),T("keydown",A,function(I){Lt.call(this,t,I)}),k(m,A)};J(f,m=>{u()&&m(b)})}k(e,x),vt(),o()}const Xn=`\`\`\`json\r
// Example\r
[\r
  {\r
    "id": 2,\r
    "title": "Solo Leveling",\r
    "slug": "solo-leveling",\r
    "alternativeTitles": [ "Only I Level Up", "Na Honja Level Up" ],\r
    "coverImageUrl": "https://example.com/covers/solo-leveling.jpg",\r
    "description": "In a world where gates connect Earth to deadly dungeons, the weakest hunter awakens a mysterious system that allows him to level up alone.",\r
    "badges": ["Manhwa", "Action", "Fantasy", "Completed"],\r
    "tags": [ "gates", "hunters", "dungeons", "system", "shadows", "awakening"],\r
    "rating": null,\r
    "createdAt": "2024-12-15T08:20:00.000Z",\r
    "openedAt": "2025-02-07T14:10:30.000Z",\r
    "editedAt": "2025-02-07T18:45:10.000Z",\r
    "characters": [\r
      {\r
        "Name": "Sung Jin-Woo",\r
        "Image": "https://example.com/characters/sung-jin-woo.png",\r
        "role": "Main",\r
        "alternativeNames": [ "Jinwoo"],\r
        "tags": ["MC", "Solo-Player"],\r
        "description": ""\r
      },\r
      {\r
        "Name": "Cha Hae-In",\r
        "role": "Main",\r
        "Image": "https://example.com/characters/cha-hae-in.png"\r
      },\r
      {\r
        "Name": "Go Gun-Hee",\r
        "role": "supporting",\r
        "Image": "https://example.com/characters/go-gun-hee.png"\r
      }\r
    ],\r
    "rows": [\r
      {\r
        "ChapterSE": "Episode 1 ‚Äì The Weakest Hunter",\r
        "Description": "E-rank hunter Sung Jin-Woo barely survives a low-level dungeon while struggling to pay his family‚Äôs medical bills.",\r
        "Tags": ["introduction", "low-rank", "desperation"],\r
        "Characters": "Sung Jin-Woo"\r
      },\r
      {\r
        "ChapterSE": "Episode 2 ‚Äì Double Dungeon",\r
        "Description": "A hidden dungeon reveals a deadly trial where survival depends on following cryptic rules.",\r
        "Tags": ["double-dungeon", "statues", "death"],\r
        "Characters": "Sung Jin-Woo, Dungeon Party"\r
      },\r
      {\r
        "ChapterSE": "Episode 3 ‚Äì The System",\r
        "Description": "After facing death, Jin-Woo awakens to a mysterious system that only he can see.",\r
        "Tags": ["awakening", "system", "rebirth"],\r
        "Characters": "Sung Jin-Woo"\r
      }\r
    ],\r
    "category": "Manhwa",\r
    "dataType": "json"\r
  },\r
  // ...\r
]\r
\`\`\``;var Kn=R('<div role="alert" class="fixed bottom-2 left-2 z-300 alert alert-info alert-outline bg-base-100"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 shrink-0 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>');function Ga(e,t){let r=Ae(t,"showAlert",8,!1),a=Ae(t,"message",8,"");var l=sa(),o=$t(l);{var u=p=>{var c=Kn(),_=d(s(c),2),g=s(_,!0);i(_),i(c),le(()=>we(g,a())),k(p,c)};J(o,p=>{r()&&p(u)})}k(e,l)}var Qn=R('<div class="text-left p-4 gap-1"><span class="loading loading-bars loading-sm text-primary"></span>Importing<span class="loading loading-bars loading-sm text-primary"></span></div>'),eo=R('<div class="fixed inset-0 bg-black/50 z-150 flex" role="presentation"><div class="bg-base-100 w-80 h-full shadow-xl p-6 flex flex-col justify-between" role="dialog" tabindex="-1"><div><h2 class="text-2xl font-bold mb-6">Menu <button class="float-right cursor-pointer" aria-label="Close menu" type="button"><!></button></h2> <ul class="menu bg-base-200 rounded-box gap-1 md:gap-3"><li><button aria-label="Import JSON" class="btn btn-md btn-ghost"><!> Import JSON</button></li> <li><button aria-label="Export data" class="btn btn-md btn-ghost"><!> Export JSON</button></li> <li><button class="btn btn-md btn-ghost" aria-label="Export Markdown"><!> Export Md</button></li> <li><button aria-label="Open categories" class="btn btn-md btn-ghost"><!> Categories</button></li> <li><button class="btn btn-md btn-ghost">JSON Format</button></li> <li><button class="btn btn-md btn-error btn-outline" aria-label="Delete Database">üóëÔ∏è Delete Database</button></li></ul> <!></div> <dialog class="modal"><div class="modal-box max-w-md"><h3 class="font-bold text-lg text-error">‚ö† Confirm Deletion</h3> <p class="py-4">This will permanently delete(IndexedDB Database):</p> <ul class="list-disc list-inside text-sm opacity-80"><li>All Entries</li> <li>All Categories</li> <li>All Settings</li></ul> <p class="mt-4 text-sm text-error font-semibold">This action cannot be undone.</p> <div class="modal-action"><button class="btn btn-ghost">Cancel</button> <button class="btn btn-error">Yes, Delete Everything</button></div></div></dialog> <dialog class="modal"><div class="modal-box max-w-3xl w-85 md:w-full h-auto max-h-[65vh]"><form method="dialog"><button type="button" aria-label="CloseJSONmodal" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2 text-lg p-5"><!></button></form> <h3 class="font-bold mb-2">Import JSON Structure</h3> <div class="prose max-w-full overflow-auto text-sm"><!></div></div></dialog> <div class="text-sm text-gray-500 disable"><div class="divider"></div> <p class="font-semibold my-4">ü§ñ AI √ó <a href="https://github.com/avinash-027/" target="_blank" class="link link-primary no-underline">User-A027</a> üë®‚Äçüíª</p></div></div></div>'),to=R('<!> <!> <input type="file" accept=".json" class="hidden"/>',1);function ro(e,t){ut(t,!1);let r=Ae(t,"show",12,!1),a=M(""),l=M(!1);const o=qt();let u=M(),p=Ae(t,"importing",8,!1);function c(){n(u).click()}function _(P){const z=P.target.files?.[0];if(!z)return;const G=new FileReader;G.onload=N=>{try{const H=JSON.parse(N.target?.result),te=Array.isArray(H)?H:[H];o("import",te)}catch{v(a,"Invalid JSON file"),v(l,!0),setTimeout(()=>{v(l,!1)},2e3)}},G.readAsText(z)}function g(){o("export")}let x=_n.parse(Xn),f=M();function b(){n(f).showModal()}function m(){n(f).close()}let A=M();function C(){n(A).showModal()}function y(){n(A).close()}async function D(){await he.clearDatabase(),y(),indexedDB.databases().then(P=>{P.forEach(W=>indexedDB.deleteDatabase(W.name))}),location.reload()}ct();var w=to(),$=$t(w);Ga($,{get showAlert(){return n(l)},get message(){return n(a)}});var V=d($,2);{var S=P=>{var W=eo(),z=s(W),G=s(z),N=s(G),H=d(s(N)),te=s(H);Ce(te,()=>(de(Q),U(()=>Q.circleClose))),i(H),i(N);var se=d(N,2),ne=s(se),I=s(ne),X=s(I);Ce(X,()=>(de(Q),U(()=>Q.import))),We(),i(I),i(ne);var q=d(ne,2),B=s(q),L=s(B);Ce(L,()=>(de(Q),U(()=>Q.export))),We(),i(B),i(q);var Z=d(q,2),be=s(Z),ce=s(be);Ce(ce,()=>(de(Q),U(()=>Q.export))),We(),i(be),i(Z);var Se=d(Z,2),re=s(Se),oe=s(re);Ce(oe,()=>(de(Q),U(()=>Q.category))),We(),i(re),i(Se);var Y=d(Se,2),ee=s(Y);i(Y);var De=d(Y,2),Ye=s(De);i(De),i(se);var ft=d(se,2);{var gt=ae=>{var St=Qn();k(ae,St)};J(ft,ae=>{p()&&ae(gt)})}i(G);var Fe=d(G,2),nt=s(Fe),Tt=d(s(nt),8),Ve=s(Tt),pt=d(Ve,2);i(Tt),i(nt),i(Fe),Sr(Fe,ae=>v(A,ae),()=>n(A));var Ue=d(Fe,2),At=s(Ue),ot=s(At),qe=s(ot),it=s(qe);Ce(it,()=>(de(Q),U(()=>Q.circleClose))),i(qe),i(ot);var Pt=d(ot,4),bt=s(Pt);Ce(bt,()=>x),i(Pt),i(At),i(Ue),Sr(Ue,ae=>v(f,ae),()=>n(f)),We(2),i(z),i(W),T("click",H,()=>r(!1)),T("click",I,c),T("click",B,g),T("click",be,()=>o("exportMd")),T("click",re,()=>o("showCategories")),T("click",ee,b),T("click",Ye,C),T("click",Ve,y),T("click",pt,D),T("click",Fe,ae=>{ae.target===n(A)&&y()}),T("click",qe,m),T("click",Ue,ae=>{ae.target===n(f)&&m()}),T("click",z,_t(function(ae){Lt.call(this,t,ae)})),T("keydown",z,_t(function(ae){Lt.call(this,t,ae)})),T("click",W,()=>r(!1)),T("keydown",W,ae=>ae.key==="Escape"&&r(!1)),k(P,W)};J(V,P=>{r()&&P(S)})}var F=d(V,2);Sr(F,P=>v(u,P),()=>n(u)),T("change",F,_),k(e,w),vt()}var ao=R('<p class="text-error text-sm mt-1"> </p>'),no=R('<option class="border border-base-200"> </option>'),oo=R("<span>|</span>"),io=R("<span> </span>"),so=R('<div class="flex gap-2 flex-wrap mb-2 p-2 rounded-lg bg-base-200 border border-base-300"><div class="flex gap-2 w-full"><label class="floating-label w-full" for="charName"><span><span class="label-text">Name **</span></span> <input type="text" id="charName" placeholder="Name *" class="input input-sm w-full"/></label> <label class="floating-label w-full" for="charRole"><span><span class="label-text">Role</span></span> <input type="text" id="charRole" placeholder="role" class="input input-sm w-full"/></label> <button class="btn btn-sm btn-square btn-error btn-outline">‚úï</button></div> <label class="floating-label w-full" for="charImgUrl"><span><span class="label-text">Image URL</span></span> <input type="text" id="charImgUrl" placeholder="Img URL" class="input input-sm w-full"/></label> <details class="w-full mt-2"><summary class="cursor-pointer text-sm font-medium text-primary text-center">Extra Details</summary> <div class="space-y-2 mt-2"><label class="floating-label w-full" for="charAltNames"><span><span class="label-text">alternativeNames</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <input id="charAltNames" placeholder="Alternative Names [Ex: Name01, name-01]" class="input input-sm w-full"/></label> <label class="floating-label w-full" for="charTags"><span><span class="label-text">char-Tags</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <input id="charTags" placeholder="Tags [Ex: Hero, Villain]" class="input input-sm w-full"/></label> <label class="floating-label w-full" for="charDescription"><span><span class="label-text">Description</span></span> <textarea id="charDescription" placeholder="Description" class="textarea textarea-bordered w-full"></textarea></label></div></details></div>'),lo=R('<div class="card bg-base-200 border border-base-300 p-4"><div class="flex gap-2 mb-2"><label class="floating-label w-full"><span>Chapter *</span> <input type="text" placeholder="Chapter (e.g., 1-5)" class="input input-bordered w-full input-sm flex-1"/></label> <button class="btn btn-square btn-error btn-outline btn-sm"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-4 h-4 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <label class="floating-label w-full"><span>Description</span> <textarea placeholder="Description" class="textarea textarea-bordered w-full textarea-sm mb-2"></textarea></label> <label class="floating-label w-full"><span>Tags (comma separated)</span> <input type="text" placeholder="Tags (comma separated)" class="input input-bordered w-full input-sm mb-2"/></label> <label class="floating-label w-full"><span>Characters</span> <input type="text" placeholder="Characters" class="input input-bordered w-full input-sm"/></label></div>'),co=R('<div class="fixed inset-0 bg-black/50 z-150 flex items-center justify-center p-4"><div class="bg-base-100 w-full max-w-4xl max-h-[90vh] overflow-auto rounded-lg shadow-xl"><div class="bg-base-100 border-b border-base-300 p-4 flex justify-between items-center"><h2 class="text-2xl font-bold"> </h2> <button class="btn btn-square btn-ghost btn-sm"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-4"><div class="form-control"><label for="newtitle" class="floating-label"><span>Title <span class="label-text-alt text-info italic">: required</span></span> <input id="newtitle" type="text" placeholder="Title" class="input input-bordered w-full" required=""/></label> <!></div> <div class="form-control"><label for="newAltTitles" class="floating-label"><span><span class="label-text">Alternative Titles</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <input id="newAltTitles" type="text" placeholder="Alternative Titles [Ex: Title1, Title2]" class="input input-bordered w-full"/></label></div> <div class="form-control"><label for="newCoverImg" class="floating-label"><span class="label-text">Cover Image URL</span> <input id="newCoverImg" type="text" placeholder="Cover Image URL: Web Img Link" class="input input-bordered w-full"/></label></div> <div class="form-control"><label class="floating-label"><span class="label-text">Description</span> <textarea placeholder="Description" class="textarea textarea-bordered w-full h-24"></textarea></label></div> <div class="form-control"><label for="newBadges" class="floating-label"><span><span class="label-text">Badges</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <textarea id="newBadges" placeholder="Badges [Ex: Completed, Ongoing, Author, Artist, Favorite]" class="textarea textarea-bordered w-full"></textarea></label></div> <div class="form-control"><label for="newTags" class="floating-label"><span><span class="label-text">Tags</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <textarea id="newTags" placeholder="Tags [Ex: Themes, Genres]" class="textarea textarea-bordered w-full"></textarea></label></div> <div class="form-control"><label class="floating-label"><span class="label-text font-semibold">Category</span></label> <select class="select select-bordered w-full"><option class="border border-base-content/20 hover:bg-base-200">All</option><!></select></div> <div class="form-control"><label class="flex flex-wrap gap-2 justify-between"><span><span class="label-text font-semibold">Rating <span class="text-info">(0‚Äì10)</span></span></span> <div class="text-xs md:text-sm text-info"><span class="font-semibold">Value:</span> </div></label> <div class="w-full max-w-xs"><input type="range" min="0" max="10" step="1" class="range range-xs range-info"/> <div class="flex justify-between px-2.5 mt-1 text-xs"></div> <div class="flex justify-between px-2.5 mt-1 text-xs"></div></div></div> <div class="divider">Characters</div> <div class="space-y-2"><!> <button class="btn btn-outline btn-sm">+ Add Character</button></div> <div class="divider">Chapters</div> <div class="space-y-2"><!> <button class="btn btn-outline btn-sm">+ Add Chapter</button></div></div> <div class="sticky bottom-0 bg-base-100 border-t border-base-300 p-4 flex gap-2 justify-end"><button class="btn btn-outline">Cancel</button> <button class="btn btn-primary">Save</button></div></div></div>');function uo(e,t){ut(t,!1);const r=()=>je(lt,"$categories",a),[a,l]=Jt(),o=M();let u=Ae(t,"entryId",8,null);const p=qt();let c=M(""),_=M(""),g=M(""),x=M(""),f=M(""),b=M(0),m=M(""),A=M("All"),C=M(!1),y=M(""),D=M([]),w=M([]);Pr(async()=>{if(u()!==null){const O=await he.getEntryById(u());O&&(v(c,O.title),v(_,O.alternativeTitles.join(", ")),v(g,O.coverImageUrl||""),v(x,O.description),v(f,O.badges.join(", ")),v(b,Number(O.rating)),v(m,O.tags.join(", ")),v(A,O.category),v(D,O.characters.map(E=>({...E,_alternativeNamesString:(E.alternativeNames??[]).join(", "),_tagsString:(E.tags??[]).join(", ")}))),v(w,O.rows.map(E=>({...structuredClone(E),_tagsText:E.tags.join(", ")}))))}});function $(){v(D,[...n(D),{name:"",image:"",role:"",alternativeNames:[],tags:[],description:"",_alternativeNamesString:"",_tagsString:""}])}function V(O){v(D,n(D).filter((E,K)=>K!==O))}function S(){v(w,[...n(w),{chapterSE:"",description:"",characters:"",tags:[],_tagsText:""}])}function F(O){v(w,n(w).filter((E,K)=>K!==O))}async function P(){const O={title:n(c),slug:n(c).toLowerCase().trim().replace(/[\s]+/g,"-").replace(/[^a-z0-9\-]/g,""),alternativeTitles:n(_).split(",").map(E=>E.trim()).filter(Boolean),coverImageUrl:n(g)||null,description:n(x),badges:n(f).split(",").map(E=>E.trim()).filter(Boolean),rating:Number(n(b)),createdAt:null,openedAt:null,editedAt:null,tags:n(m).split(",").map(E=>E.trim()).filter(Boolean),category:n(A)||"All",dataType:"Lib",characters:n(D).filter(E=>E.name).map(E=>({name:E.name,image:E.image,role:E.role,description:E.description,alternativeNames:(E._alternativeNamesString??"").split(",").map(K=>K.trim()).filter(Boolean),tags:(E._tagsString??"").split(",").map(K=>K.trim()).filter(Boolean)})),rows:n(w).filter(E=>E.chapterSE).map(E=>({chapterSE:E.chapterSE,description:E.description,characters:E.characters,tags:E._tagsText.split(",").map(K=>K.trim()).filter(Boolean)}))};u()!==null?await he.updateEntry(u(),O):await he.addEntry(O),p("save")}function W(){p("cancel")}dt(()=>n(c),()=>{v(o,n(c).toLowerCase().trim().replace(/[\s]+/g,"-").replace(/[^a-z0-9\-]/g,""))}),dt(()=>(n(c),de(u()),n(o),n(C),ir),()=>{n(c)?(async()=>{if(u()!==null){const O=await he.getEntryBySlug(n(o));v(C,!!O&&O.id!==u())}else v(C,!!await he.getEntryBySlug(n(o)));v(y,n(C)?`This title generates a slug(${n(o)}) that already Exists. Change title text`:""),await ir()})():(v(C,!1),v(y,""))}),$r(),ct();var z=co(),G=s(z),N=s(G),H=s(N),te=s(H,!0);i(H);var se=d(H,2);i(N);var ne=d(N,2),I=s(ne),X=s(I),q=d(s(X),2);Ee(q),i(X);var B=d(X,2);{var L=O=>{var E=ao(),K=s(E,!0);i(E),le(()=>we(K,n(y))),k(O,E)};J(B,O=>{n(C)&&O(L)})}i(I);var Z=d(I,2),be=s(Z),ce=d(s(be),2);Ee(ce),i(be),i(Z);var Se=d(Z,2),re=s(Se),oe=d(s(re),2);Ee(oe),i(re),i(Se);var Y=d(Se,2),ee=s(Y),De=d(s(ee),2);er(De),i(ee),i(Y);var Ye=d(Y,2),ft=s(Ye),gt=d(s(ft),2);er(gt),i(ft),i(Ye);var Fe=d(Ye,2),nt=s(Fe),Tt=d(s(nt),2);er(Tt),i(nt),i(Fe);var Ve=d(Fe,2),pt=d(s(Ve),2),Ue=s(pt);Ue.value=Ue.__value="All";var At=d(Ue);tt(At,1,()=>(r(),U(()=>r().filter(O=>O!=="All"))),yt,(O,E)=>{var K=no(),ye=s(K,!0);i(K);var $e={};le(()=>{we(ye,n(E)),$e!==($e=n(E))&&(K.value=(K.__value=n(E))??"")}),k(O,K)}),i(pt),i(Ve);var ot=d(Ve,2),qe=s(ot),it=d(s(qe),2),Pt=d(s(it));i(it),i(qe);var bt=d(qe,2),ae=s(bt);Ee(ae);var St=d(ae,2);tt(St,4,()=>U(()=>Array.from({length:11},(O,E)=>E)),yt,(O,E)=>{var K=oo();le(()=>at(K,1,xa(E===n(b)?"text-info font-bold":""))),k(O,K)}),i(St);var jt=d(St,2);tt(jt,4,()=>U(()=>Array.from({length:11},(O,E)=>E)),yt,(O,E)=>{var K=io(),ye=s(K,!0);i(K),le(()=>{at(K,1,xa(E===n(b)?"text-info font-bold":"")),we(ye,E)}),k(O,K)}),i(jt),i(bt),i(ot);var Ot=d(ot,4),pr=s(Ot);tt(pr,1,()=>n(D),yt,(O,E,K)=>{var ye=so(),$e=s(ye),Je=s($e),It=d(s(Je),2);Ee(It),i(Je);var kt=d(Je,2),Ge=d(s(kt),2);Ee(Ge),i(kt);var Ut=d(kt,2);i($e);var Xe=d($e,2),Nt=d(s(Xe),2);Ee(Nt),i(Xe);var mt=d(Xe,2),ht=d(s(mt),2),Pe=s(ht),Xt=d(s(Pe),2);Ee(Xt),i(Pe);var Kt=d(Pe,2),yr=d(s(Kt),2);Ee(yr),i(Kt);var Qt=d(Kt,2),_r=d(s(Qt),2);er(_r),i(Qt),i(ht),i(mt),i(ye),ve(It,()=>n(E).name,ke=>(n(E).name=ke,Ke(()=>n(D)))),ve(Ge,()=>n(E).role,ke=>(n(E).role=ke,Ke(()=>n(D)))),T("click",Ut,()=>V(K)),ve(Nt,()=>n(E).image,ke=>(n(E).image=ke,Ke(()=>n(D)))),ve(Xt,()=>n(E)._alternativeNamesString,ke=>(n(E)._alternativeNamesString=ke,Ke(()=>n(D)))),ve(yr,()=>n(E)._tagsString,ke=>(n(E)._tagsString=ke,Ke(()=>n(D)))),ve(_r,()=>n(E).description,ke=>(n(E).description=ke,Ke(()=>n(D)))),k(O,ye)});var zt=d(pr,2);i(Ot);var br=d(Ot,4),mr=s(br);tt(mr,1,()=>n(w),yt,(O,E,K)=>{var ye=lo(),$e=s(ye),Je=s($e),It=d(s(Je),2);Ee(It),i(Je);var kt=d(Je,2);i($e);var Ge=d($e,2),Ut=d(s(Ge),2);er(Ut),i(Ge);var Xe=d(Ge,2),Nt=d(s(Xe),2);Ee(Nt),i(Xe);var mt=d(Xe,2),ht=d(s(mt),2);Ee(ht),i(mt),i(ye),ve(It,()=>n(E).chapterSE,Pe=>(n(E).chapterSE=Pe,Ke(()=>n(w)))),T("click",kt,()=>F(K)),ve(Ut,()=>n(E).description,Pe=>(n(E).description=Pe,Ke(()=>n(w)))),ve(Nt,()=>n(E)._tagsText,Pe=>(n(E)._tagsText=Pe,Ke(()=>n(w)))),ve(ht,()=>n(E).characters,Pe=>(n(E).characters=Pe,Ke(()=>n(w)))),k(O,ye)});var hr=d(mr,2);i(br),i(ne);var wr=d(ne,2),Bt=s(wr),Ct=d(Bt,2);i(wr),i(G),i(z),le(()=>{we(te,u()!==null?"Edit Entry":"New Entry"),we(Pt,` ${n(b)??""} - ${de(Da),n(b),U(()=>Da[n(b)])??""}`),Ct.disabled=!n(c)||!n(A)||n(C)}),T("click",se,W),ve(q,()=>n(c),O=>v(c,O)),ve(ce,()=>n(_),O=>v(_,O)),ve(oe,()=>n(g),O=>v(g,O)),ve(De,()=>n(x),O=>v(x,O)),ve(gt,()=>n(f),O=>v(f,O)),ve(Tt,()=>n(m),O=>v(m,O)),za(pt,()=>n(A),O=>v(A,O)),ve(ae,()=>n(b),O=>v(b,O)),T("click",zt,$),T("click",hr,S),T("click",Bt,W),T("click",Ct,P),T("click",G,_t(function(O){Lt.call(this,t,O)})),T("click",z,W),k(e,z),vt(),l()}function Sa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Ir(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sa(Object(r),!0).forEach(function(a){Zt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sa(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Gt(e){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(e)}function Zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vo(e,t){if(e==null)return{};var r={},a=Object.keys(e),l,o;for(o=0;o<a.length;o++)l=a[o],!(t.indexOf(l)>=0)&&(r[l]=e[l]);return r}function fo(e,t){if(e==null)return{};var r=vo(e,t),a,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)a=o[l],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function go(e,t){return bo(e)||ho(e,t)||da(e,t)||yo()}function Be(e){return po(e)||mo(e)||da(e)||wo()}function po(e){if(Array.isArray(e))return Kr(e)}function bo(e){if(Array.isArray(e))return e}function mo(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ho(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a=[],l=!0,o=!1,u,p;try{for(r=r.call(e);!(l=(u=r.next()).done)&&(a.push(u.value),!(t&&a.length===t));l=!0);}catch(c){o=!0,p=c}finally{try{!l&&r.return!=null&&r.return()}finally{if(o)throw p}}return a}}function da(e,t){if(e){if(typeof e=="string")return Kr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kr(e,t)}}function Kr(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function wo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vr(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=da(e))||t){r&&(e=r);var a=0,l=function(){};return{s:l,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(c){throw c},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,p;return{s:function(){r=r.call(e)},n:function(){var c=r.next();return o=c.done,c},e:function(c){u=!0,p=c},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(u)throw p}}}}var _o="finalize",xo="consider";function Yt(e,t,r){e.dispatchEvent(new CustomEvent(_o,{detail:{items:t,info:r}}))}function Et(e,t,r){e.dispatchEvent(new CustomEvent(xo,{detail:{items:t,info:r}}))}var jr="draggedEntered",fr="draggedLeft",zr="draggedOverIndex",ca="draggedLeftDocument",kr={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function Do(e,t,r){e.dispatchEvent(new CustomEvent(jr,{detail:{indexObj:t,draggedEl:r}}))}function Eo(e,t,r){e.dispatchEvent(new CustomEvent(fr,{detail:{draggedEl:t,type:kr.LEFT_FOR_ANOTHER,theOtherDz:r}}))}function To(e,t){e.dispatchEvent(new CustomEvent(fr,{detail:{draggedEl:t,type:kr.OUTSIDE_OF_ANY}}))}function Ao(e,t,r){e.dispatchEvent(new CustomEvent(zr,{detail:{indexObj:t,draggedEl:r}}))}function So(e){window.dispatchEvent(new CustomEvent(ca,{detail:{draggedEl:e}}))}var Ie={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:jr,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:zr,DRAGGED_LEFT:fr,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Le={POINTER:"pointer",KEYBOARD:"keyboard"},Br="isDndShadowItem",Ur="data-is-dnd-shadow-item-internal",Oo="data-is-dnd-shadow-item-hint",Wa="id:dnd-shadow-placeholder-0000",Co="dnd-action-dragged-el",pe="id",Qr=0;function Ha(){Qr++}function Za(){if(Qr===0)throw new Error("Bug! trying to decrement when there are no dropzones");Qr--}var ua=typeof window>"u";function ea(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r,a=t?No(e):e.getBoundingClientRect(),l=getComputedStyle(e),o=l.transform;if(o){var u,p,c,_;if(o.startsWith("matrix3d("))r=o.slice(9,-1).split(/, /),u=+r[0],p=+r[5],c=+r[12],_=+r[13];else if(o.startsWith("matrix("))r=o.slice(7,-1).split(/, /),u=+r[0],p=+r[3],c=+r[4],_=+r[5];else return a;var g=l.transformOrigin,x=a.x-c-(1-u)*parseFloat(g),f=a.y-_-(1-p)*parseFloat(g.slice(g.indexOf(" ")+1)),b=u?a.width/u:e.offsetWidth,m=p?a.height/p:e.offsetHeight;return{x,y:f,width:b,height:m,top:f,right:x+b,bottom:f+m,left:x}}else return a}function ta(e){var t=ea(e);return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function Ya(e){var t=e.getBoundingClientRect();return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function Va(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Io(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function sr(e,t){return e.y<=t.bottom&&e.y>=t.top&&e.x>=t.left&&e.x<=t.right}function qa(e){return Va(Ya(e))}function Oa(e,t){var r=qa(t);return Io(e,r)}function ko(e){var t=Ya(e);return t.right<0||t.left>document.documentElement.scrollWidth||t.bottom<0||t.top>document.documentElement.scrollHeight}function No(e){for(var t=e.getBoundingClientRect(),r={top:t.top,bottom:t.bottom,left:t.left,right:t.right},a=!1,l=!1,o=e.parentElement;o&&o!==document.body;){var u=window.getComputedStyle(o),p=u.overflowY,c=u.overflowX,_=p==="scroll"||p==="auto",g=c==="scroll"||c==="auto";if(_||g){var x=o.getBoundingClientRect();if(_){var f=Math.max(r.top,x.top),b=Math.min(r.bottom,x.bottom);(f!==r.top||b!==r.bottom)&&(a=!0),r.top=f,r.bottom=b}if(g){var m=Math.max(r.left,x.left),A=Math.min(r.right,x.right);(m!==r.left||A!==r.right)&&(l=!0),r.left=m,r.right=A}}o=o.parentElement}return a||l?{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}:{top:t.top,bottom:t.bottom,left:t.left,right:t.right,width:Math.max(0,t.right-t.left),height:Math.max(0,t.bottom-t.top)}}var Wt;function va(){Wt=new Map}va();function Mo(e){var t=Array.from(e.children).findIndex(function(r){return r.getAttribute(Ur)});if(t>=0)return Wt.has(e)||Wt.set(e,new Map),Wt.get(e).set(t,ta(e.children[t])),t}function Ro(e,t){var r=ta(t);if(!sr(e,r))return null;var a=t.children;if(a.length===0)return{index:0,isProximityBased:!0};for(var l=Mo(t),o=0;o<a.length;o++){var u=ta(a[o]);if(sr(e,u)){var p=Wt.has(t)&&Wt.get(t).get(o);return p&&!sr(e,p)?{index:l,isProximityBased:!1}:{index:o,isProximityBased:!1}}}for(var c=Number.MAX_VALUE,_=void 0,g=0;g<a.length;g++){var x=Oa(e,a[g]);x<c&&(c=x,_=g)}if(a.length>0){var f=a.length,b=a[f-1],m=b.cloneNode(!1);m.style.visibility="hidden",m.style.pointerEvents="none",t.appendChild(m);var A=Oa(e,m);A<c&&(_=f),t.removeChild(m)}return{index:_,isProximityBased:!0}}function ar(e){return JSON.stringify(e,null,2)}function Nr(e){if(!e)throw new Error("cannot get depth of a falsy node");return Ja(e,0)}function Ja(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?Ja(e.parentElement,t+1):t-1}function Lo(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!{}.hasOwnProperty.call(t,r)||t[r]!==e[r])return!1;return!0}function Fo(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var $o=200,Ca=10,ra;function Po(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$o,a=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,o,u,p=!1,c,_=Array.from(t).sort(function(x,f){return Nr(f)-Nr(x)});function g(){var x=l(),f=a.multiScrollIfNeeded();if(!f&&c&&Math.abs(c.x-x.x)<Ca&&Math.abs(c.y-x.y)<Ca){ra=window.setTimeout(g,r);return}if(ko(e)){So(e);return}c=x;var b=!1,m=vr(_),A;try{for(m.s();!(A=m.n()).done;){var C=A.value;f&&va();var y=Ro(x,C);if(y!==null){var D=y.index;b=!0,C!==o?(o&&Eo(o,e,C),Do(C,y,e),o=C):D!==u&&(Ao(C,y,e),u=D);break}}}catch(w){m.e(w)}finally{m.f()}!b&&p&&o?(To(o,e),o=void 0,u=void 0,p=!1):p=!0,ra=window.setTimeout(g,r)}g()}function jo(){clearTimeout(ra),va()}var nr=30;function zo(){var e;function t(){e={directionObj:void 0,stepPx:0}}t();function r(o){var u=e,p=u.directionObj,c=u.stepPx;p&&(o.scrollBy(p.x*c,p.y*c),window.requestAnimationFrame(function(){return r(o)}))}function a(o){return nr-o}function l(o,u){if(!u)return!1;var p=Bo(o,u),c=!!e.directionObj;if(p===null)return c&&t(),!1;var _=!1,g=!1;return u.scrollHeight>u.clientHeight&&(p.bottom<nr?(_=!0,e.directionObj={x:0,y:1},e.stepPx=a(p.bottom)):p.top<nr&&(_=!0,e.directionObj={x:0,y:-1},e.stepPx=a(p.top)),!c&&_)||u.scrollWidth>u.clientWidth&&(p.right<nr?(g=!0,e.directionObj={x:1,y:0},e.stepPx=a(p.right)):p.left<nr&&(g=!0,e.directionObj={x:-1,y:0},e.stepPx=a(p.left)),!c&&g)?(r(u),!0):(t(),!1)}return{scrollIfNeeded:l,resetScrolling:t}}function Bo(e,t){var r=t===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:t.getBoundingClientRect();return sr(e,r)?{top:e.y-r.top,bottom:r.bottom-e.y,left:e.x-r.left,right:r.right-e.x}:null}function Uo(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=Wo(e),a=Array.from(r).sort(function(c,_){return Nr(_)-Nr(c)}),l=zo(),o=l.scrollIfNeeded,u=l.resetScrolling;function p(){var c=t();if(!c||!a)return!1;for(var _=a.filter(function(f){return sr(c,f.getBoundingClientRect())||f===document.scrollingElement}),g=0;g<_.length;g++){var x=o(c,_[g]);if(x)return!0}return!1}return{multiScrollIfNeeded:r.size>0?p:function(){return!1},destroy:function(){return u()}}}function Go(e){if(!e)return[];for(var t=[],r=e;r;){var a=window.getComputedStyle(r),l=a.overflow;l.split(" ").some(function(o){return o.includes("auto")||o.includes("scroll")})&&t.push(r),r=r.parentElement}return t}function Wo(e){var t=new Set,r=vr(e),a;try{for(r.s();!(a=r.n()).done;){var l=a.value;Go(l).forEach(function(o){return t.add(o)})}}catch(o){r.e(o)}finally{r.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&t.add(document.scrollingElement),t}function Ho(e){var t=e.cloneNode(!0),r=[],a=e.tagName==="SELECT",l=a?[e]:Be(e.querySelectorAll("select")),o=vr(l),u;try{for(o.s();!(u=o.n()).done;){var p=u.value;r.push(p.value)}}catch(w){o.e(w)}finally{o.f()}if(l.length>0)for(var c=a?[t]:Be(t.querySelectorAll("select")),_=0;_<c.length;_++){var g=c[_],x=r[_],f=g.querySelector('option[value="'.concat(x,'"'));f&&f.setAttribute("selected",!0)}var b=e.tagName==="CANVAS",m=b?[e]:Be(e.querySelectorAll("canvas"));if(m.length>0)for(var A=b?[t]:Be(t.querySelectorAll("canvas")),C=0;C<A.length;C++){var y=m[C],D=A[C];D.width=y.width,D.height=y.height,y.width>0&&y.height>0&&D.getContext("2d").drawImage(y,0,0)}return t}var cr=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),Zo=Zt({},cr.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function Xa(e){if(!cr[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(cr)));return Zo[e]}var Yo=.2;function Mt(e){return"".concat(e," ").concat(Yo,"s ease")}function Vo(e,t){var r=e.getBoundingClientRect(),a=Ho(e);Ka(e,a),a.id=Co,a.style.position="fixed";var l=r.top,o=r.left;if(a.style.top="".concat(l,"px"),a.style.left="".concat(o,"px"),t){var u=Va(r);l-=u.y-t.y,o-=u.x-t.x,window.setTimeout(function(){a.style.top="".concat(l,"px"),a.style.left="".concat(o,"px")},0)}return a.style.margin="0",a.style.boxSizing="border-box",a.style.height="".concat(r.height,"px"),a.style.width="".concat(r.width,"px"),a.style.transition="".concat(Mt("top"),", ").concat(Mt("left"),", ").concat(Mt("background-color"),", ").concat(Mt("opacity"),", ").concat(Mt("color")," "),window.setTimeout(function(){return a.style.transition+=", ".concat(Mt("width"),", ").concat(Mt("height"))},0),a.style.zIndex="9999",a.style.cursor="grabbing",a}function qo(e){e.style.cursor="grab"}function Jo(e,t,r,a){Ka(t,e);var l=t.getBoundingClientRect(),o=e.getBoundingClientRect(),u=l.width-o.width,p=l.height-o.height;if(u||p){var c={left:(r-o.left)/o.width,top:(a-o.top)/o.height};Xa(cr.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(l.height,"px"),e.style.width="".concat(l.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-c.left*u,"px"),e.style.top="".concat(parseFloat(e.style.top)-c.top*p,"px")}}function Ka(e,t){var r=window.getComputedStyle(e);Array.from(r).filter(function(a){return a.startsWith("background")||a.startsWith("padding")||a.startsWith("font")||a.startsWith("text")||a.startsWith("align")||a.startsWith("justify")||a.startsWith("display")||a.startsWith("flex")||a.startsWith("border")||a==="opacity"||a==="color"||a==="list-style-type"||Xa(cr.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(a==="width"||a==="height")}).forEach(function(a){return t.style.setProperty(a,r.getPropertyValue(a),r.getPropertyPriority(a))})}function Xo(e,t){e.draggable=!1,e.ondragstart=function(){return!1},t?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function Qa(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function Ko(e){e.style.visibility="hidden",e.setAttribute(Ur,"true")}function Qo(e){e.style.visibility="",e.removeAttribute(Ur)}function Or(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(a){var l=t(a);Object.keys(l).forEach(function(o){a.style[o]=l[o]}),r(a).forEach(function(o){return a.classList.add(o)})})}function Mr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(a){var l=t(a);Object.keys(l).forEach(function(o){a.style[o]=""}),r(a).forEach(function(o){return a.classList.contains(o)&&a.classList.remove(o)})})}function ei(e){var t=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var r=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=t,e.style.minWidth=r}}var ti="--any--",ri=100,ai=20,Tr=3,ni=80,Ia={outline:"rgba(255, 255, 102, 0.7) solid 2px"},ka="data-is-dnd-original-dragged-item",Me,ge,Re,Gr,ie,Wr,Dt,xe,Qe,me,wt=!1,fa=!1,ga,gr=!1,Cr=[],lr,et,or=!1,pa=!1,Ze=new Map,ue=new Map,Jr=new WeakMap;function oi(e,t){Ze.has(t)||Ze.set(t,new Set),Ze.get(t).has(e)||(Ze.get(t).add(e),Ha())}function Na(e,t){Ze.get(t).delete(e),Za(),Ze.get(t).size===0&&Ze.delete(t)}function ii(){var e=Ze.get(Gr),t=vr(e),r;try{for(t.s();!(r=t.n()).done;){var a=r.value;a.addEventListener(jr,en),a.addEventListener(fr,tn),a.addEventListener(zr,rn)}}catch(p){t.e(p)}finally{t.f()}window.addEventListener(ca,Vt);var l=Math.max.apply(Math,Be(Array.from(e.keys()).map(function(p){return ue.get(p).dropAnimationDurationMs}))),o=l===0?ai:Math.max(l,ri);lr=Uo(e,function(){return me});var u=pa?function(){return{x:me.x+window.scrollX,y:me.y+window.scrollY}}:function(){return qa(ge)};Po(ge,e,o*1.07,lr,u)}function si(){var e=Ze.get(Gr),t=vr(e),r;try{for(t.s();!(r=t.n()).done;){var a=r.value;a.removeEventListener(jr,en),a.removeEventListener(fr,tn),a.removeEventListener(zr,rn)}}catch(l){t.e(l)}finally{t.f()}window.removeEventListener(ca,Vt),lr&&(lr.destroy(),lr=void 0),jo()}function Hr(e){return e.findIndex(function(t){return!!t[Br]})}function li(e){var t;return Ir(Ir({},e),{},(t={},Zt(t,Br,!0),Zt(t,pe,Wa),t))}function en(e){var t=ue.get(e.currentTarget),r=t.items,a=t.dropFromOthersDisabled;if(!(a&&e.currentTarget!==ie)){if(gr=!1,r=r.filter(function(p){return p[pe]!==Dt[pe]&&p[pe]!==Wa}),ie!==e.currentTarget){var l=ue.get(ie).items,o=l.filter(function(p){return!p[Br]});Et(ie,o,{trigger:Ie.DRAGGED_ENTERED_ANOTHER,id:Re[pe],source:Le.POINTER})}var u=e.detail.indexObj.index;xe=e.currentTarget,r.splice(u,0,Dt),Et(e.currentTarget,r,{trigger:Ie.DRAGGED_ENTERED,id:Re[pe],source:Le.POINTER})}}function tn(e){if(wt){var t=ue.get(e.currentTarget),r=t.items,a=t.dropFromOthersDisabled;if(!(a&&e.currentTarget!==ie&&e.currentTarget!==xe)){var l=Be(r),o=Hr(l);o!==-1&&l.splice(o,1);var u=xe;xe=void 0;var p=e.detail,c=p.type,_=p.theOtherDz;if(c===kr.OUTSIDE_OF_ANY||c===kr.LEFT_FOR_ANOTHER&&_!==ie&&ue.get(_).dropFromOthersDisabled){gr=!0,xe=ie;var g=u===ie?l:Be(ue.get(ie).items);g.splice(Wr,0,Dt),Et(ie,g,{trigger:Ie.DRAGGED_LEFT_ALL,id:Re[pe],source:Le.POINTER})}Et(e.currentTarget,l,{trigger:Ie.DRAGGED_LEFT,id:Re[pe],source:Le.POINTER})}}}function rn(e){var t=ue.get(e.currentTarget),r=t.items,a=t.dropFromOthersDisabled;if(!(a&&e.currentTarget!==ie)){var l=Be(r);gr=!1;var o=e.detail.indexObj.index,u=Hr(l);u!==-1&&l.splice(u,1),l.splice(o,0,Dt),Et(e.currentTarget,l,{trigger:Ie.DRAGGED_OVER_INDEX,id:Re[pe],source:Le.POINTER})}}function Rr(e){e.preventDefault();var t=e.touches?e.touches[0]:e;me={x:t.clientX,y:t.clientY},ge.style.transform="translate3d(".concat(me.x-Qe.x,"px, ").concat(me.y-Qe.y,"px, 0)")}function Vt(){fa=!0,window.removeEventListener("mousemove",Rr),window.removeEventListener("touchmove",Rr),window.removeEventListener("mouseup",Vt),window.removeEventListener("touchend",Vt),si(),qo(ge),xe||(xe=ie);var e=ue.get(xe),t=e.items,r=e.type;Mr(Ze.get(r),function(o){return ue.get(o).dropTargetStyle},function(o){return ue.get(o).dropTargetClasses});var a=Hr(t);a===-1&&xe===ie&&(a=Wr),t=t.map(function(o){return o[Br]?Re:o});function l(){ga(),Yt(xe,t,{trigger:gr?Ie.DROPPED_OUTSIDE_OF_ANY:Ie.DROPPED_INTO_ZONE,id:Re[pe],source:Le.POINTER}),xe!==ie&&Yt(ie,ue.get(ie).items,{trigger:Ie.DROPPED_INTO_ANOTHER,id:Re[pe],source:Le.POINTER});var o=Array.from(xe.children).find(function(u){return u.getAttribute(Ur)});o&&Qo(o),ui()}ue.get(xe).dropAnimationDisabled?l():di(a,l)}function di(e,t){var r=e>-1?ea(xe.children[e],!1):ea(xe,!1),a={x:r.left-parseFloat(ge.style.left),y:r.top-parseFloat(ge.style.top)},l=ue.get(xe),o=l.dropAnimationDurationMs,u="transform ".concat(o,"ms ease");ge.style.transition=ge.style.transition?ge.style.transition+","+u:u,ge.style.transform="translate3d(".concat(a.x,"px, ").concat(a.y,"px, 0)"),window.setTimeout(t,o)}function ci(e,t){Cr.push({dz:e,destroy:t}),window.requestAnimationFrame(function(){Qa(e),document.body.appendChild(e)})}function ui(){ge&&ge.remove&&ge.remove(),Me&&Me.remove&&Me.remove(),ge=void 0,Me=void 0,Re=void 0,Gr=void 0,ie=void 0,Wr=void 0,Dt=void 0,xe=void 0,Qe=void 0,me=void 0,wt=!1,fa=!1,ga=void 0,gr=!1,et&&clearTimeout(et),et=void 0,or=!1,pa=!1,Cr.length&&(Cr.forEach(function(e){var t=e.dz,r=e.destroy;r(),t.remove()}),Cr=[])}function vi(e,t){var r=!1,a={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Ia,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,useCursorForDetection:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},l=new Map;function o(){window.addEventListener("mousemove",c,{passive:!1}),window.addEventListener("touchmove",c,{passive:!1,capture:!1}),window.addEventListener("mouseup",p,{passive:!1}),window.addEventListener("touchend",p,{passive:!1})}function u(){window.removeEventListener("mousemove",c),window.removeEventListener("touchmove",c),window.removeEventListener("mouseup",p),window.removeEventListener("touchend",p),et&&(clearTimeout(et),et=void 0,or=!1)}function p(f){if(u(),Me=void 0,Qe=void 0,me=void 0,f.type==="touchend"){var b=new Event("click",{bubbles:!0,cancelable:!0});f.target.dispatchEvent(b)}}function c(f){var b=!!f.touches,m=b?f.touches[0]:f;if(b&&a.delayTouchStartMs>0&&!or){me={x:m.clientX,y:m.clientY},(Math.abs(me.x-Qe.x)>=Tr||Math.abs(me.y-Qe.y)>=Tr)&&(et&&(clearTimeout(et),et=void 0),p(f));return}f.preventDefault(),me={x:m.clientX,y:m.clientY},(Math.abs(me.x-Qe.x)>=Tr||Math.abs(me.y-Qe.y)>=Tr)&&(u(),g())}function _(f){if(!(f.target!==f.currentTarget&&(f.target.value!==void 0||f.target.isContentEditable))&&!f.button&&!wt){var b=!!f.touches,m=b&&a.delayTouchStartMs>0;m||f.preventDefault(),f.stopPropagation();var A=b?f.touches[0]:f;Qe={x:A.clientX,y:A.clientY},me=Ir({},Qe),Me=f.currentTarget,m&&(or=!1,et=window.setTimeout(function(){Me&&(or=!0,u(),g())},a.delayTouchStartMs)),o()}}function g(){wt=!0;var f=l.get(Me);Wr=f,ie=Me.parentElement;var b=ie.closest("dialog")||ie.closest("[popover]")||ie.getRootNode(),m=b.body||b,A=a.items,C=a.type,y=a.centreDraggedOnCursor,D=a.useCursorForDetection,w=Be(A);Re=w[f],Gr=C,Dt=li(Re),pa=D,ge=Vo(Me,y&&me),m.appendChild(ge);function $(){Me.parentElement?window.requestAnimationFrame($):(Me.setAttribute(ka,!0),m.appendChild(Me),ii(),Qa(Me),Dt[pe]=Re[pe],ge.focus())}window.requestAnimationFrame($),Or(Array.from(Ze.get(a.type)).filter(function(V){return V===ie||!ue.get(V).dropFromOthersDisabled}),function(V){return ue.get(V).dropTargetStyle},function(V){return ue.get(V).dropTargetClasses}),w.splice(f,1,Dt),ga=ei(ie),Et(ie,w,{trigger:Ie.DRAG_STARTED,id:Re[pe],source:Le.POINTER}),window.addEventListener("mousemove",Rr,{passive:!1}),window.addEventListener("touchmove",Rr,{passive:!1,capture:!1}),window.addEventListener("mouseup",Vt,{passive:!1}),window.addEventListener("touchend",Vt,{passive:!1})}function x(f){var b=f.items,m=b===void 0?void 0:b,A=f.flipDurationMs,C=A===void 0?0:A,y=f.type,D=y===void 0?ti:y,w=f.dragDisabled,$=w===void 0?!1:w,V=f.morphDisabled,S=V===void 0?!1:V,F=f.dropFromOthersDisabled,P=F===void 0?!1:F,W=f.dropTargetStyle,z=W===void 0?Ia:W,G=f.dropTargetClasses,N=G===void 0?[]:G,H=f.transformDraggedElement,te=H===void 0?function(){}:H,se=f.centreDraggedOnCursor,ne=se===void 0?!1:se,I=f.useCursorForDetection,X=I===void 0?!1:I,q=f.dropAnimationDisabled,B=q===void 0?!1:q,L=f.delayTouchStart,Z=L===void 0?!1:L;a.dropAnimationDurationMs=C;var be=0;Z===!0?be=ni:typeof Z=="number"&&isFinite(Z)&&Z>=0&&(be=Z),a.delayTouchStartMs=be,a.type&&D!==a.type&&Na(e,a.type),a.type=D,a.items=Be(m),a.dragDisabled=$,a.morphDisabled=S,a.transformDraggedElement=te,a.centreDraggedOnCursor=ne,a.useCursorForDetection=X,a.dropAnimationDisabled=B,r&&wt&&!fa&&(!Lo(z,a.dropTargetStyle)||!Fo(N,a.dropTargetClasses))&&(Mr([e],function(){return a.dropTargetStyle},function(){return N}),Or([e],function(){return z},function(){return N})),a.dropTargetStyle=z,a.dropTargetClasses=Be(N);function ce(Y,ee){return ue.get(Y)?ue.get(Y)[ee]:a[ee]}r&&wt&&a.dropFromOthersDisabled!==P&&(P?Mr([e],function(Y){return ce(Y,"dropTargetStyle")},function(Y){return ce(Y,"dropTargetClasses")}):Or([e],function(Y){return ce(Y,"dropTargetStyle")},function(Y){return ce(Y,"dropTargetClasses")})),a.dropFromOthersDisabled=P,ue.set(e,a),oi(e,D);for(var Se=wt?Hr(a.items):-1,re=0;re<e.children.length;re++){var oe=e.children[re];if(Xo(oe,$),re===Se){S||Jo(ge,oe,me.x,me.y),a.transformDraggedElement(ge,Re,re),Ko(oe);continue}oe.removeEventListener("mousedown",Jr.get(oe)),oe.removeEventListener("touchstart",Jr.get(oe)),$||(oe.addEventListener("mousedown",_),oe.addEventListener("touchstart",_),Jr.set(oe,_)),l.set(oe,re),r||(r=!0)}}return x(t),{update:function(b){x(b)},destroy:function(){function b(){Na(e,ue.get(e).type),ue.delete(e)}wt&&!e.closest("[".concat(ka,"]"))?ci(e,b):b()}}}var Ar,aa={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},an=(Ar={},Zt(Ar,aa.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),Zt(Ar,aa.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),Ar),fi="dnd-action-aria-alert",fe;function na(){fe||(fe=document.createElement("div"),(function(){fe.id=fi,fe.style.position="fixed",fe.style.bottom="0",fe.style.left="0",fe.style.zIndex="-5",fe.style.opacity="0",fe.style.height="0",fe.style.width="0",fe.setAttribute("role","alert")})(),document.body.prepend(fe),Object.entries(an).forEach(function(e){var t=go(e,2),r=t[0],a=t[1];return document.body.prepend(bi(r,a))}))}function gi(){return ua?null:(document.readyState==="complete"?na():window.addEventListener("DOMContentLoaded",na),Ir({},aa))}function pi(){ua||!fe||(Object.keys(an).forEach(function(e){var t;return(t=document.getElementById(e))===null||t===void 0?void 0:t.remove()}),fe.remove(),fe=void 0)}function bi(e,t){var r=document.createElement("div");return r.id=e,r.innerHTML="<p>".concat(t,"</p>"),r.style.display="none",r.style.position="fixed",r.style.zIndex="-5",r}function Ht(e){if(!ua){fe||na(),fe.innerHTML="";var t=document.createTextNode(e);fe.appendChild(t),fe.style.display="none",fe.style.display="inline"}}var mi="--any--",Ma={outline:"rgba(255, 255, 102, 0.7) solid 2px"},ze=!1,oa,Te,Ft="",Rt,rt,xt="",Lr=new WeakSet,Ra=new WeakMap,La=new WeakMap,ia=new Map,_e=new Map,He=new Map,Fr;function hi(e,t){He.size===0&&(Fr=gi(),window.addEventListener("keydown",nn),window.addEventListener("click",on)),He.has(t)||He.set(t,new Set),He.get(t).has(e)||(He.get(t).add(e),Ha())}function Fa(e,t){Te===e&&ur(),He.get(t).delete(e),Za(),He.get(t).size===0&&He.delete(t),He.size===0&&(window.removeEventListener("keydown",nn),window.removeEventListener("click",on),Fr=void 0,pi())}function nn(e){ze&&e.key==="Escape"&&ur()}function on(){ze&&(Lr.has(document.activeElement)||ur())}function wi(e){if(ze){var t=e.currentTarget;if(t!==Te){Ft=t.getAttribute("aria-label")||"";var r=_e.get(Te),a=r.items,l=a.find(function(x){return x[pe]===rt}),o=a.indexOf(l),u=a.splice(o,1)[0],p=_e.get(t),c=p.items,_=p.autoAriaDisabled;t.getBoundingClientRect().top<Te.getBoundingClientRect().top||t.getBoundingClientRect().left<Te.getBoundingClientRect().left?(c.push(u),_||Ht("Moved item ".concat(xt," to the end of the list ").concat(Ft))):(c.unshift(u),_||Ht("Moved item ".concat(xt," to the beginning of the list ").concat(Ft)));var g=Te;Yt(g,a,{trigger:Ie.DROPPED_INTO_ANOTHER,id:rt,source:Le.KEYBOARD}),Yt(t,c,{trigger:Ie.DROPPED_INTO_ZONE,id:rt,source:Le.KEYBOARD}),Te=t}}}function sn(){ia.forEach(function(e,t){var r=e.update;return r(_e.get(t))})}function ur(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;_e.get(Te).autoAriaDisabled||Ht("Stopped dragging item ".concat(xt)),Lr.has(document.activeElement)&&document.activeElement.blur(),e&&Et(Te,_e.get(Te).items,{trigger:Ie.DRAG_STOPPED,id:rt,source:Le.KEYBOARD}),Mr(He.get(oa),function(t){return _e.get(t).dropTargetStyle},function(t){return _e.get(t).dropTargetClasses}),Rt=null,rt=null,xt="",oa=null,Te=null,Ft="",ze=!1,sn()}function yi(e,t){var r={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Ma,dropTargetClasses:[],autoAriaDisabled:!1};function a(g,x,f){g.length<=1||g.splice(f,1,g.splice(x,1,g[f])[0])}function l(g){switch(g.key){case"Enter":case" ":{if((g.target.disabled!==void 0||g.target.href||g.target.isContentEditable)&&!Lr.has(g.target))return;g.preventDefault(),g.stopPropagation(),ze?ur():o(g);break}case"ArrowDown":case"ArrowRight":{if(!ze)return;g.preventDefault(),g.stopPropagation();var x=_e.get(e),f=x.items,b=Array.from(e.children),m=b.indexOf(g.currentTarget);m<b.length-1&&(r.autoAriaDisabled||Ht("Moved item ".concat(xt," to position ").concat(m+2," in the list ").concat(Ft)),a(f,m,m+1),Yt(e,f,{trigger:Ie.DROPPED_INTO_ZONE,id:rt,source:Le.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!ze)return;g.preventDefault(),g.stopPropagation();var A=_e.get(e),C=A.items,y=Array.from(e.children),D=y.indexOf(g.currentTarget);D>0&&(r.autoAriaDisabled||Ht("Moved item ".concat(xt," to position ").concat(D," in the list ").concat(Ft)),a(C,D,D-1),Yt(e,C,{trigger:Ie.DROPPED_INTO_ZONE,id:rt,source:Le.KEYBOARD}));break}}}function o(g){p(g.currentTarget),Te=e,oa=r.type,ze=!0;var x=Array.from(He.get(r.type)).filter(function(b){return b===Te||!_e.get(b).dropFromOthersDisabled});if(Or(x,function(b){return _e.get(b).dropTargetStyle},function(b){return _e.get(b).dropTargetClasses}),!r.autoAriaDisabled){var f="Started dragging item ".concat(xt,". Use the arrow keys to move it within its list ").concat(Ft);x.length>1&&(f+=", or tab to another list in order to move the item into it"),Ht(f)}Et(e,_e.get(e).items,{trigger:Ie.DRAG_STARTED,id:rt,source:Le.KEYBOARD}),sn()}function u(g){ze&&g.currentTarget!==Rt&&(g.stopPropagation(),ur(!1),o(g))}function p(g){var x=_e.get(e),f=x.items,b=Array.from(e.children),m=b.indexOf(g);Rt=g,Rt.tabIndex=r.zoneItemTabIndex,rt=f[m][pe],xt=b[m].getAttribute("aria-label")||""}function c(g){var x=g.items,f=x===void 0?[]:x,b=g.type,m=b===void 0?mi:b,A=g.dragDisabled,C=A===void 0?!1:A,y=g.zoneTabIndex,D=y===void 0?0:y,w=g.zoneItemTabIndex,$=w===void 0?0:w,V=g.dropFromOthersDisabled,S=V===void 0?!1:V,F=g.dropTargetStyle,P=F===void 0?Ma:F,W=g.dropTargetClasses,z=W===void 0?[]:W,G=g.autoAriaDisabled,N=G===void 0?!1:G;r.items=Be(f),r.dragDisabled=C,r.dropFromOthersDisabled=S,r.zoneTabIndex=D,r.zoneItemTabIndex=$,r.dropTargetStyle=P,r.dropTargetClasses=z,r.autoAriaDisabled=N,r.type&&m!==r.type&&Fa(e,r.type),r.type=m,hi(e,m),N||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",C?Fr.DND_ZONE_DRAG_DISABLED:Fr.DND_ZONE_ACTIVE)),_e.set(e,r),ze?e.tabIndex=e===Te||Rt.contains(e)||r.dropFromOthersDisabled||Te&&r.type!==_e.get(Te).type?-1:0:e.tabIndex=r.zoneTabIndex,e.addEventListener("focus",wi);for(var H=function(ne){var I=e.children[ne];Lr.add(I),I.tabIndex=ze?-1:r.zoneItemTabIndex,N||I.setAttribute("role","listitem"),I.removeEventListener("keydown",Ra.get(I)),I.removeEventListener("click",La.get(I)),C||(I.addEventListener("keydown",l),Ra.set(I,l),I.addEventListener("click",u),La.set(I,u)),ze&&r.items[ne][pe]===rt&&(Rt=I,Rt.tabIndex=r.zoneItemTabIndex,I.focus())},te=0;te<e.children.length;te++)H(te)}c(t);var _={update:function(x){c(x)},destroy:function(){Fa(e,r.type),_e.delete(e),ia.delete(e)}};return ia.set(e,_),_}var _i=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","useCursorForDetection","delayTouchStart","dropAnimationDisabled"];function xi(e,t){if(Di(e))return{update:function(){},destroy:function(){}};$a(t);var r=vi(e,t),a=yi(e,t);return{update:function(o){$a(o),r.update(o),a.update(o)},destroy:function(){r.destroy(),a.destroy()}}}function Di(e){return!!e.closest("[".concat(Oo,'="true"]'))}function $a(e){var t=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var r=e.zoneTabIndex,a=e.zoneItemTabIndex;e.dropTargetStyle;var l=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor,e.useCursorForDetection;var o=e.delayTouchStart;e.dropAnimationDisabled;var u=fo(e,_i);if(Object.keys(u).length>0&&console.warn("dndzone will ignore unknown options",u),!t)throw new Error("no 'items' key provided to dndzone");var p=t.find(function(g){return!{}.hasOwnProperty.call(g,pe)});if(p)throw new Error("missing '".concat(pe,"' property for item ").concat(ar(p)));if(l&&!Array.isArray(l))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(Gt(l),", ").concat(ar(l)));if(r&&!Pa(r))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(Gt(r),", ").concat(ar(r)));if(a&&!Pa(a))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(Gt(a),", ").concat(ar(a)));if(o!==void 0&&o!==!1){var c=o===!0,_=typeof o=="number"&&isFinite(o)&&o>=0;if(!c&&!_)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(Gt(o),", ").concat(ar(o)))}}function Pa(e){return!isNaN(e)&&(function(t){return(t|0)===t})(parseFloat(e))}var Ei=R('<input class="input-bordered input input-sm mr-2 flex-1 svelte-1enwfk9"/>'),Ti=R('<span class="cursor-pointer truncate svelte-1enwfk9"> </span>'),Ai=R('<button class="btn btn-sm btn-success svelte-1enwfk9">Save</button>'),Si=R('<button class="btn btn-xs btn-info svelte-1enwfk9">Edit</button> <button class="btn btn-xs btn-error svelte-1enwfk9">Delete</button>',1),Oi=R('<li class="mb-2 flex cursor-grab items-center justify-between rounded-lg p-1 transition-all duration-150 hover:bg-base-200 svelte-1enwfk9"><!> <div class="flex gap-2 svelte-1enwfk9"><!></div></li>'),Ci=R(`<div class="fixed inset-0 z-150 flex bg-black/50 svelte-1enwfk9" role="button" tabindex="0" aria-label="Close categories modal"><div class="flex h-full w-96 flex-col bg-base-100 p-6 shadow-xl svelte-1enwfk9" role="document"><h2 class="mb-6 text-2xl font-bold svelte-1enwfk9">Categories</h2> <div class="flex-1 overflow-y-auto rounded-md border border-base-content/30 p-1 px-2 pr-1 svelte-1enwfk9"><ul class="mb-4 svelte-1enwfk9"><li class="rounded-lg p-1 svelte-1enwfk9">All</li></ul> <ul class="border border-none outline-none focus:outline-none focus:ring-0 svelte-1enwfk9"></ul></div> <div class="mt-3 flex gap-2 svelte-1enwfk9"><input class="input-bordered input flex-1 svelte-1enwfk9" placeholder="New category"/> <button aria-label="Add new category" class="btn btn-primary svelte-1enwfk9">Add</button></div> <button class="btn mt-2 w-full btn-soft svelte-1enwfk9">Close</button> <div class="mt-1 justify-center px-1 text-xs text-success svelte-1enwfk9"><span class="svelte-1enwfk9"> </span></div> <div class="alert-default my-2 alert alert-soft svelte-1enwfk9"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 shrink-0 stroke-current svelte-1enwfk9"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-1enwfk9"></path></svg> <span class="svelte-1enwfk9">When a category is <b class="svelte-1enwfk9">deleted</b>, all entries in that category are <b class="svelte-1enwfk9">moved to the 'All'</b> category</span></div></div></div>`),Ii=R("/*! üåº daisyUI 5.5.18 */   <!>",1);function ki(e,t){ut(t,!1);const r=()=>je(lt,"$categories",a),[a,l]=Jt();let o=Ae(t,"show",8,!1);const u=qt();let p=M(""),c=M(null),_=M("");function g(S){v(c,S),v(_,S)}async function x(S){const F=n(_).trim();if(!F||F==="All"||F===S){v(c,null);return}await lt.rename(S,F),u("rename",{old:S,new:F}),v(c,null),A(`Category renamed to "${F}"`)}async function f(){const S=n(p).trim();!S||S==="All"||(await lt.add(S),v(p,""))}let b=M(""),m=M(!1);function A(S,F=2e3){v(b,S),v(m,!0),setTimeout(()=>{v(m,!1)},F)}async function C(S){S!=="All"&&(await he.moveCategoryToAll(S),await lt.remove(S),A(`Category "${S}" deleted. Entries moved to 'All'.`))}Pr(()=>{lt.load()});let y=M([]);async function D(S){if(v(y,S.detail.items),S.type==="finalize"){const F=n(y).map(P=>P.id);await he.reorderCategories(F),await lt.load()}}dt(()=>r(),()=>{v(y,r().filter(S=>S!=="All").map(S=>({id:S,name:S})))}),$r(),ct(),We();var w=Ii(),$=d($t(w));{var V=S=>{var F=Ci(),P=s(F),W=d(s(P),2),z=d(s(W),2);tt(z,5,()=>n(y),X=>X.id,(X,q)=>{var B=Oi(),L=s(B);{var Z=Y=>{var ee=Ei();Ee(ee),pn(ee),ve(ee,()=>n(_),De=>v(_,De)),T("keydown",ee,De=>De.key==="Enter"&&x(n(q).id)),T("blur",ee,()=>x(n(q).id)),k(Y,ee)},be=Y=>{var ee=Ti(),De=s(ee,!0);i(ee),le(()=>we(De,(n(q),U(()=>n(q).name)))),T("dblclick",ee,()=>g(n(q).id)),k(Y,ee)};J(L,Y=>{n(c),n(q),U(()=>n(c)===n(q).id)?Y(Z):Y(be,!1)})}var ce=d(L,2),Se=s(ce);{var re=Y=>{var ee=Ai();T("click",ee,_t(()=>x(cat))),k(Y,ee)},oe=Y=>{var ee=Si(),De=$t(ee),Ye=d(De,2);T("click",De,_t(()=>g(cat))),T("click",Ye,_t(()=>C(cat))),k(Y,ee)};J(Se,Y=>{n(c),n(q),U(()=>n(c)===n(q).id)?Y(re):Y(oe,!1)})}i(ce),i(B),k(X,B)}),i(z),ja(z,(X,q)=>xi?.(X,q),()=>({items:n(y),flipDurationMs:150})),Xr(()=>T("consider",z,D)),Xr(()=>T("finalize",z,D)),i(W);var G=d(W,2),N=s(G);Ee(N);var H=d(N,2);i(G);var te=d(G,2),se=d(te,2),ne=s(se),I=s(ne,!0);i(ne),i(se),We(2),i(P),i(F),le(()=>{Ba(se,`min-height: 1.55rem; max-height: 1.55rem; visibility: ${n(m)?"visible":"hidden"}`),we(I,n(b))}),ve(N,()=>n(p),X=>v(p,X)),T("click",H,f),T("click",te,()=>u("close")),T("click",P,_t(function(X){Lt.call(this,t,X)})),T("click",F,()=>u("close")),k(S,F)};J($,S=>{o()&&S(V)})}k(e,w),vt(),l()}var Ni=R('<li><input type="radio" name="theme-dropdown" class="theme-controller btn btn-sm btn-block btn-ghost justify-start"/></li>'),Mi=R('<div><div tabindex="0" role="button" class="btn p-2 m-0 rounded-2xl">üé® <svg width="12px" height="12px" class="inline-block h-1 w-1 fill-current opacity-60" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048"><path d="M1799 349l242 241-1017 1017L7 590l242-241 775 775 775-775z"></path></svg></div> <ul tabindex="-1" class="dropdown-content menu bg-base-300 rounded-2xl z-150 w-52 p-2 shadow-sm"></ul></div>');function Ri(e,t){ut(t,!1);const r=()=>je(Ea,"$theme",a),[a,l]=Jt(),o=["light","cupcake","night","dark","emerald","fantasy","luxury","acid","coffee","retro","business","dracula","dim","garden"];let u=Ae(t,"dropdownDirection",8,"dropdown-end");function p(g){Ea.set(g)}ct();var c=Mi(),_=d(s(c),2);tt(_,5,()=>o,yt,(g,x)=>{var f=Ni(),b=s(f);Ee(b),i(f),le(()=>{dr(b,"aria-label",n(x)),xn(b,n(x)),Dn(b,r()===n(x))}),T("change",b,()=>p(n(x))),k(g,f)}),i(_),i(c),le(()=>at(c,1,`dropdown ${u()}`)),k(e,c),vt(),l()}var Li=R('<span class="absolute -top-6 -left-2 flex h-5 w-20 items-center justify-center rounded-full bg-red-600 text-xs font-bold text-white p-1"> </span>'),Fi=R('<li><button class="w-full border border-base-300 text-left hover:bg-base-200"> </button></li>'),$i=R('<ul class="dropdown-content menu mt-3 w-52 rounded-box bg-base-100 p-2 shadow-md"></ul>'),Pi=R('<div class="fixed top-16 left-1/2 z-50 flex items-center gap-4 rounded-lg border border-base-300 bg-base-100 p-2 shadow-md select-none"><div role="button" tabindex="0" class="cursor-grab rounded-md bg-base-200 p-2 hidden md:inline-block" aria-label="Drag toolbar">‚†ø</div> <div class="md:tooltip" data-tip="Delete"><button class="btn relative btn-square btn-error" aria-label="Delete selected"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 7h12M10 11v6m4-6v6M5 7l1 12a2 2 0 002 2h8a2 2 0 002-2l1-12M9 7V4a1 1 0 011-1h4a1 1 0 011 1v3"></path></svg> <!></button></div> <div class="md:tooltip" data-tip="Select all"><button class="btn btn-square btn-ghost" aria-label="Select all"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7M5 7l4 4L19 1"></path></svg></button></div> <div class="md:tooltip" data-tip="Deselect all"><button class="btn btn-square opacity-50 btn-ghost" aria-label="Deselect all"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current opacity-20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7M5 7l4 4L19 1"></path></svg></button></div> <div><div class="md:tooltip" data-tip="Move to category"><button class="btn btn-square btn-ghost" aria-label="Move to category"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4h16v4H4V4zm0 8h16v4H4v-4zm0 8h16v4H4v-4z"></path></svg></button></div> <!></div> <div class="md:tooltip" data-tip="Cancel"><button class="btn btn-square bg-red-700 text-white btn-ghost hover:bg-red-500" aria-label="Cancel selection"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div role="button" tabindex="0" class="drag-handle cursor-grab rounded-md bg-base-200 p-2" aria-label="Drag toolbar">‚†ø</div></div>');function ji(e,t){ut(t,!1);let r=Ae(t,"selectedCount",8,0),a=Ae(t,"categoryList",24,()=>[]),l=Ae(t,"showCategoryDropdown",8,!1);const o=qt();let u=!1,p=0,c=0,_=M(0),g=M(0);function x(I){u=!0,p=I.clientX-n(_),c=I.clientY-n(g),window.addEventListener("pointermove",f),window.addEventListener("pointerup",b)}function f(I){u&&(v(_,I.clientX-p),v(g,I.clientY-c))}function b(){u=!1,window.removeEventListener("pointermove",f),window.removeEventListener("pointerup",b)}ct();var m=Pi(),A=s(m),C=d(A,2),y=s(C),D=d(s(y),2);{var w=I=>{var X=Li(),q=s(X,!0);i(X),le(()=>we(q,r())),k(I,X)};J(D,I=>{r()>0&&I(w)})}i(y),i(C);var $=d(C,2),V=s($);i($);var S=d($,2),F=s(S);i(S);var P=d(S,2);let W;var z=s(P),G=s(z);i(z);var N=d(z,2);{var H=I=>{var X=$i();tt(X,5,a,yt,(q,B)=>{var L=Fi(),Z=s(L),be=s(Z,!0);i(Z),i(L),le(()=>we(be,n(B))),T("click",Z,()=>o("moveCategory",n(B))),k(q,L)}),i(X),k(I,X)};J(N,I=>{de(l()),de(a()),U(()=>l()&&a().length>0)&&I(H)})}i(P);var te=d(P,2),se=s(te);i(te);var ne=d(te,2);i(m),le(()=>{Ba(m,`transform: translate(calc(-50% + ${n(_)??""}px), ${n(g)??""}px);`),y.disabled=r()===0,W=at(P,1,"dropdown dropdown-end",null,W,{"dropdown-open":l()}),G.disabled=r()===0}),T("pointerdown",A,x),T("click",y,()=>o("delete")),T("click",V,()=>o("selectAll")),T("click",F,()=>o("deselectAll")),T("click",G,()=>o("toggleCategoryDropdown")),T("click",se,()=>o("cancel")),T("pointerdown",ne,x),k(e,m),vt()}var zi=la('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-current" fill="none" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4h16v16H4V4z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M8 12h8"></path></svg>'),Bi=la('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-current" fill="none" viewBox="0 0 24 24" stroke-width="2"><rect x="4" y="4" width="16" height="16" stroke="currentColor" stroke-width="2"></rect><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h8"></path></svg>'),Ui=R('<button><div class="indicator"><span class="indicator-item bg-base-100 text-xs rounded-3xl px-1.5 py-0.5 -top-1"> </span> <div class="z-10"> </div></div></button>'),Gi=R('<div class="flex items-center justify-center bg-base-300 rounded-xl m-2"><span class="loading loading-dots loading-sm text-primary"></span> <span class="loading loading-ring loading-sm text-primary"></span> <span class="loading loading-dots loading-sm text-primary"></span></div>'),Wi=R('<div class="flex items-center justify-center bg-base-300 rounded-xl m-2"><span class="loading loading-bars loading-sm text-primary"></span></div>'),Hi=R('<div class="flex h-screen flex-col"><div class="navbar bg-base-100 shadow-lg"><div class="flex-none"><button class="btn btn-square btn-ghost" aria-label="Open menu"><!></button></div> <div class="flex-1"><span class="text-md md:text-xl font-bold"> <span class="hide-on-320 svelte-j9gjs9"> </span></span></div> <div class="flex-none"><button class="btn btn-square btn-ghost" aria-label="Toggle search"><!></button> <div class="tooltip-bottom tooltip" data-tip="Open filters"><button class="btn btn-square btn-ghost" aria-label="Open filters"><!></button></div> <div class="tooltip-bottom tooltip" data-tip="Select entries"><button class="btn btn-square btn-ghost" aria-label="Select entries"><!></button></div> <button class="btn btn-square btn-ghost inline-block md:hidden" aria-label="Toggle grid columns" title="Toggle grid columns"><!></button> <!></div></div> <!> <div class="tabs tabs-border flex-nowrap gap-3 overflow-x-auto bg-base-200 px-2 pt-2 pb-1 scrollbar-hide"><button class="p-0 m-0" title="Toggle unique entries" aria-label="Show unique entries only"><!></button> <button><div class="z-10">All</div> <span class="bg-base-100 text-xs rounded-3xl px-1.5 py-0.5"> </span></button> <!></div> <button class="z-100 btn fixed right-6 bottom-6 btn-circle shadow-xl btn-lg btn-primary" aria-label="Add new entry"><!></button> <!>  <div class="flex-1 overflow-auto p-4 pt-2.5"><!> <!> <!></div></div> <!> <!> <!> <!> <!> <!>',1);function Zi(e,t){ut(t,!1);const r=()=>je(st,"$searchQuery",c),a=()=>je(En,"$filteredEntries",c),l=()=>je(rr,"$selectedCategory",c),o=()=>je(lt,"$categories",c),u=()=>je(Vr,"$entries",c),p=()=>je(Aa,"$gridCols",c),[c,_]=Jt(),g=M(),x=M();let f=M(!1),b=M(!1),m=M(!1),A=M(!1),C=M(null),y=M(null),D=M(!1),w=M(new Set),$=M(!1);const V=qt();let S=M(!1),F=M(!1),P=M(""),W=M(!1);function z(){Aa.update(h=>h===3?4:3)}async function G(){const h=await he.getAllEntries();Vr.set(h),Array.from(new Set(h.map(j=>j.category).filter(j=>j&&j!=="All"))),lt.load()}Pr(async()=>{await G(),On();const h=localStorage.getItem("selectedCategory");h&&rr.set(h)});function N(){v(C,null),v(A,!0),v($,!1)}async function H(){v(A,!1),v(C,null),await G()}function te(){v(A,!1),v(C,null)}async function se(){v(m,!1),v(y,null),await G()}function ne(){v(m,!1),v(y,null)}let I;function X(h){v(P,h),v(W,!0),clearTimeout(I),I=window.setTimeout(()=>{v(W,!1)},1500)}let q=M(!1);async function B(h){v(q,!0),await he.importFromJSON(h),await G(),v(q,!1),v(b,!1)}async function L(){const h=await he.exportToJSON(),j=new Blob([JSON.stringify(h,null,2)],{type:"application/json"}),Ne=URL.createObjectURL(j),Oe=document.createElement("a");Oe.href=Ne,Oe.download=`lib-export-${new Date().toISOString()}.json`,document.body.appendChild(Oe),Oe.click(),document.body.removeChild(Oe),URL.revokeObjectURL(Ne),v(b,!1),X("Exported to JSON üëç :Downloads/")}async function Z(){const h=await he.exportToMarkdown(),j=new Blob([h],{type:"text/markdown"}),Ne=URL.createObjectURL(j),Oe=document.createElement("a");Oe.href=Ne,Oe.download=`lib-export-${new Date().toISOString()}.md`,document.body.appendChild(Oe),Oe.click(),document.body.removeChild(Oe),URL.revokeObjectURL(Ne),v(b,!1),X("Exported to Markdown üëç :Downloads/")}async function be(h){await he.moveCategoryToAll(h),l()===h&&rr.set("All"),await G(),v(D,!1)}let ce=M(!1);async function Se(h){for(const Ne of n(w))u().find(xr=>xr.id===Ne)&&await he.updateEntry(Ne,{category:h});n(w).clear(),v(w,new Set(n(w))),v($,!1);const j=await he.getAllEntries();Vr.set(j),v(ce,!1)}function re(h){n(w).has(h)?n(w).delete(h):n(w).add(h),v(w,new Set(n(w)))}let oe=M(!1);async function Y(){if(n(w).size===0)return;v(oe,!0);const h=Array.from(n(w));for(const j of h)await he.deleteEntry(j);n(w).clear(),v(w,new Set(n(w))),await G(),v($,!1),v(oe,!1)}function ee(){v(w,new Set(a().map(h=>h.id)))}function De(){n(w).clear(),v(w,new Set(n(w)))}dt(()=>r(),()=>{r().trim().length>0&&v(S,!0)}),dt(()=>(n(F),a(),Ta),()=>{v(g,n(F)?Array.from(new Map(a().map(h=>[Ta(h),h])).values()):a())}),dt(()=>o(),()=>{v(x,o().filter(h=>h!=="All"))}),$r(),ct();var Ye=Hi(),ft=$t(Ye),gt=s(ft),Fe=s(gt),nt=s(Fe),Tt=s(nt);Ce(Tt,()=>(de(Q),U(()=>Q.menu))),i(nt),i(Fe);var Ve=d(Fe,2),pt=s(Ve),Ue=s(pt);Ue.nodeValue="Lib ";var At=d(Ue),ot=s(At);i(At),i(pt),i(Ve);var qe=d(Ve,2),it=s(qe),Pt=s(it);Ce(Pt,()=>(de(Q),U(()=>Q.search))),i(it);var bt=d(it,2),ae=s(bt),St=s(ae);Ce(St,()=>(de(Q),U(()=>Q.filter))),i(ae),i(bt);var jt=d(bt,2),Ot=s(jt),pr=s(Ot);Ce(pr,()=>(de(Q),U(()=>Q.select))),i(Ot),i(jt);var zt=d(jt,2),br=s(zt);Ce(br,()=>(de(Q),U(()=>Q.toggleGrid))),i(zt);var mr=d(zt,2);Ri(mr,{dropdownDirection:"dropdown-bottom dropdown-end"}),i(qe),i(gt);var hr=d(gt,2);{var wr=h=>{Vn(h,{get show(){return n(S)},set show(j){v(S,j)},$$legacy:!0})};J(hr,h=>{n(S)&&h(wr)})}var Bt=d(hr,2),Ct=s(Bt),O=s(Ct);{var E=h=>{var j=zi();k(h,j)},K=h=>{var j=Bi();k(h,j)};J(O,h=>{n(F)?h(E):h(K,!1)})}i(Ct);var ye=d(Ct,2);let $e;var Je=d(s(ye),2),It=s(Je,!0);i(Je),i(ye);var kt=d(ye,2);tt(kt,1,()=>n(x),yt,(h,j)=>{var Ne=Ui();let Oe;var xr=s(Ne),Zr=s(xr),fn=s(Zr,!0);i(Zr);var wa=d(Zr,2),gn=s(wa,!0);i(wa),i(xr),i(Ne),le(Yr=>{Oe=at(Ne,1,"tab",null,Oe,{"tab-active":l()===n(j)}),we(fn,Yr),we(gn,n(j))},[()=>(u(),n(j),U(()=>u().filter(Yr=>Yr.category===n(j)).length))]),T("click",Ne,()=>rr.set(n(j))),k(h,Ne)}),i(Bt);var Ge=d(Bt,2),Ut=s(Ge);Ce(Ut,()=>(de(Q),U(()=>Q.add))),i(Ge);var Xe=d(Ge,2);{var Nt=h=>{ji(h,{get selectedCount(){return n(w),U(()=>n(w).size)},get categoryList(){return n(x)},get showCategoryDropdown(){return n(ce)},$$events:{delete:Y,selectAll:ee,deselectAll:De,toggleCategoryDropdown:()=>v(ce,!n(ce)),moveCategory:j=>Se(j.detail),cancel:()=>{v($,!1),v(ce,!1),n(w).clear(),v(w,new Set(n(w)))}}})};J(Xe,h=>{n($)&&h(Nt)})}var mt=d(Xe,2),ht=s(mt);{var Pe=h=>{var j=Gi();k(h,j)};J(ht,h=>{n(oe)&&h(Pe)})}var Xt=d(ht,2);{var Kt=h=>{var j=Wi();k(h,j)};J(Xt,h=>{n(q)&&h(Kt)})}var yr=d(Xt,2);Bn(yr,{get entries(){return n(g)},get selectionMode(){return n($)},get selectedEntries(){return n(w)},get gridCols(){return p()},$$events:{toggleSelect:h=>re(h.detail)}}),i(mt),i(ft);var Qt=d(ft,2);{var _r=h=>{Jn(h,{get show(){return n(f)},set show(j){v(f,j)},$$legacy:!0})};J(Qt,h=>{n(f)&&h(_r)})}var ke=d(Qt,2);{var ln=h=>{ro(h,{get importing(){return n(q)},get show(){return n(b)},set show(j){v(b,j)},$$events:{import:j=>B(j.detail),export:L,exportMd:Z,showCategories:()=>{v(b,!1),v(D,!0)}},$$legacy:!0})};J(ke,h=>{n(b)&&h(ln)})}var ba=d(ke,2);{var dn=h=>{ki(h,{get show(){return n(D)},$$events:{close:()=>v(D,!1),rename:j=>V("renameCategory",j.detail),delete:j=>be(j.detail)}})};J(ba,h=>{n(D)&&h(dn)})}var ma=d(ba,2);{var cn=h=>{Tn(h,{get entryId(){return n(y)},$$events:{save:se,cancel:ne}})};J(ma,h=>{n(m)&&h(cn)})}var ha=d(ma,2);{var un=h=>{uo(h,{get entryId(){return n(C)},$$events:{save:H,cancel:te}})};J(ha,h=>{n(A)&&h(un)})}var vn=d(ha,2);Ga(vn,{get showAlert(){return n(W)},get message(){return n(P)}}),le(()=>{we(ot,`(${u(),U(()=>u().length)??""})`),$e=at(ye,1,"tab relative",null,$e,{"tab-active":l()==="All"}),we(It,(u(),U(()=>u().length)))}),T("click",nt,()=>v(b,!0)),T("click",it,()=>{v(S,!n(S)),v($,!1)}),T("click",ae,()=>{v(f,!n(f)),v($,!1)}),T("click",Ot,()=>{n($)&&(n(w).clear(),v(w,new Set(n(w))),v(ce,!1)),v($,!n($))}),T("click",zt,z),T("click",Ct,()=>v(F,!n(F))),T("click",ye,()=>rr.set("All")),T("click",Ge,N),k(e,Ye),vt(),_()}function rs(e){mn("1uha8ag",t=>{Xr(()=>{bn.title="lib"})}),Zi(e,{})}export{rs as component};

import{a as p,f as u,c as ne}from"../chunks/DLeEY7fs.js";import{i as Ca}from"../chunks/D56Uv2cy.js";import{o as Ce,a as Sa}from"../chunks/Dpa3FFmK.js";import{$ as La,I as Ta,aQ as $a,af as Aa,O as ja,o as s,aR as Na,aS as Da,Q as Ma,U as zt,aD as De,z as Ia,aT as Gt,aU as Ra,A as Ft,B as y,D as za,v as t,aV as Fa,E as r,G as i,W as f,aW as Pa,F as a,V as U,aN as Ba,w as ct,aP as Oa,aX as Ua}from"../chunks/BPO9GtFz.js";import{a as Ha,e as T,s as D,r as qa}from"../chunks/DfAXxMbk.js";import{i as g,s as Ga,a as Wa,b as Se}from"../chunks/CrlJmSwP.js";import{g as ie,d as Nt,s as mt,a as Le,b as Va,c as _t,E as Qa,e as kt,i as Et,R as Te,r as $e,f as Ae,h as je,j as vt,S as H,k as Dt}from"../chunks/5GfNp6By.js";import{h as Ka}from"../chunks/CuXflmye.js";import{s as Xa,b as Ja,g as Ya}from"../chunks/d2e-q6Gy.js";const Za=()=>performance.now(),ht={tick:d=>requestAnimationFrame(d),now:()=>Za(),tasks:new Set};function Me(){const d=ht.now();ht.tasks.forEach(c=>{c.c(d)||(ht.tasks.delete(c),c.f())}),ht.tasks.size!==0&&ht.tick(Me)}function tr(d){let c;return ht.tasks.size===0&&ht.tick(Me),{promise:new Promise($=>{ht.tasks.add(c={c:d,f:$})}),abort(){ht.tasks.delete(c)}}}function Wt(d,c){De(()=>{d.dispatchEvent(new CustomEvent(c))})}function er(d){if(d==="float")return"cssFloat";if(d==="offset")return"cssOffset";if(d.startsWith("--"))return d;const c=d.split("-");return c.length===1?c[0]:c[0]+c.slice(1).map($=>$[0].toUpperCase()+$.slice(1)).join("")}function Ne(d){const c={},$=d.split(";");for(const F of $){const[P,C]=F.split(":");if(!P||C===void 0)break;const M=er(P.trim());c[M]=C.trim()}return c}const ar=d=>d;function rr(d,c,$,F){var P=(d&Na)!==0,C="both",M,I=c.inert,e=c.style.overflow,m,w;function Z(){return De(()=>M??=$()(c,F?.()??{},{direction:C}))}var G={is_global:P,in(){c.inert=I,m=oe(c,Z(),w,1,()=>{Wt(c,"introend"),m?.abort(),m=M=void 0,c.style.overflow=e})},out(et){c.inert=!0,w=oe(c,Z(),m,0,()=>{Wt(c,"outroend"),et?.()})},stop:()=>{m?.abort(),w?.abort()}},tt=La;if((tt.nodes.t??=[]).push(G),Ha){var nt=P;if(!nt){for(var k=tt.parent;k&&(k.f&Ta)!==0;)for(;(k=k.parent)&&(k.f&$a)===0;);nt=!k||(k.f&Aa)!==0}nt&&ja(()=>{s(()=>G.in())})}}function oe(d,c,$,F,P){var C=F===1;if(Da(c)){var M,I=!1;return Ma(()=>{if(!I){var et=c({direction:C?"in":"out"});M=oe(d,et,$,F,P)}}),{abort:()=>{I=!0,M?.abort()},deactivate:()=>M.deactivate(),reset:()=>M.reset(),t:()=>M.t()}}if($?.deactivate(),!c?.duration&&!c?.delay)return Wt(d,C?"introstart":"outrostart"),P(),{abort:zt,deactivate:zt,reset:zt,t:()=>F};const{delay:e=0,css:m,tick:w,easing:Z=ar}=c;var G=[];if(C&&$===void 0&&(w&&w(0,1),m)){var tt=Ne(m(0,1));G.push(tt,tt)}var nt=()=>1-F,k=d.animate(G,{duration:e,fill:"forwards"});return k.onfinish=()=>{k.cancel(),Wt(d,C?"introstart":"outrostart");var et=$?.t()??1-F;$?.abort();var A=F-et,Lt=c.duration*Math.abs(A),Tt=[];if(Lt>0){var pt=!1;if(m)for(var xt=Math.ceil(Lt/16.666666666666668),$t=0;$t<=xt;$t+=1){var Mt=et+A*Z($t/xt),Pt=Ne(m(Mt,1-Mt));Tt.push(Pt),pt||=Pt.overflow==="hidden"}pt&&(d.style.overflow="hidden"),nt=()=>{var At=k.currentTime;return et+A*Z(At/Lt)},w&&tr(()=>{if(k.playState!=="running")return!1;var At=nt();return w(At,1-At),!0})}k=d.animate(Tt,{duration:Lt,fill:"forwards"}),k.onfinish=()=>{nt=()=>F,w?.(F,1-F),P()}},{abort:()=>{k&&(k.cancel(),k.effect=null,k.onfinish=zt)},deactivate:()=>{P=zt},reset:()=>{F===0&&w?.(1,0)},t:()=>nt()}}const sr=!1,nr=!1,os=Object.freeze(Object.defineProperty({__proto__:null,prerender:sr,ssr:nr},Symbol.toStringTag,{value:"Module"}));function ir(d){const c=d-1;return c*c*c+1}function or(d,{delay:c=0,duration:$=400,easing:F=ir,axis:P="y"}={}){const C=getComputedStyle(d),M=+C.opacity,I=P==="y"?"height":"width",e=parseFloat(C[I]),m=P==="y"?["top","bottom"]:["left","right"],w=m.map(A=>`${A[0].toUpperCase()}${A.slice(1)}`),Z=parseFloat(C[`padding${w[0]}`]),G=parseFloat(C[`padding${w[1]}`]),tt=parseFloat(C[`margin${w[0]}`]),nt=parseFloat(C[`margin${w[1]}`]),k=parseFloat(C[`border${w[0]}Width`]),et=parseFloat(C[`border${w[1]}Width`]);return{delay:c,duration:$,easing:F,css:A=>`overflow: hidden;opacity: ${Math.min(A*20,1)*M};${I}: ${A*e}px;padding-${m[0]}: ${A*Z}px;padding-${m[1]}: ${A*G}px;margin-${m[0]}: ${A*tt}px;margin-${m[1]}: ${A*nt}px;border-${m[0]}-width: ${A*k}px;border-${m[1]}-width: ${A*et}px;min-${I}: 0`}}function gt(d,c){let $,P=!1;async function C(e){try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(e);else{const m=document.createElement("input");m.value=e,document.body.appendChild(m),m.select(),document.execCommand("copy"),document.body.removeChild(m)}d.classList.add("copied"),setTimeout(()=>d.classList.remove("copied"),600)}catch(m){console.error("Copy failed",m)}}function M(){P=!0,$=setTimeout(()=>{P&&C(c??d.textContent??"")},600)}function I(){P=!1,clearTimeout($)}return d.addEventListener("touchstart",M),d.addEventListener("touchend",I),d.addEventListener("touchcancel",I),d.addEventListener("mousedown",M),d.addEventListener("mouseup",I),d.addEventListener("mouseleave",I),{destroy(){d.removeEventListener("touchstart",M),d.removeEventListener("touchend",I),d.removeEventListener("touchcancel",I),d.removeEventListener("mousedown",M),d.removeEventListener("mouseup",I),d.removeEventListener("mouseleave",I)}}}const lr=()=>{const d=Xa;return{page:{subscribe:d.page.subscribe},navigating:{subscribe:d.navigating.subscribe},updated:d.updated}},dr={subscribe(d){return lr().page.subscribe(d)}};var vr=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50" role="dialog" aria-modal="true"><div class="bg-base-100 rounded-lg p-4 m-4 shadow-lg w-96"><h3 class="text-lg font-bold mb-4">Confirm Delete</h3> <p class="mb-6">Are you sure you want to delete this entry?</p> <div class="flex justify-end gap-2"><button class="btn btn-soft">Cancel</button> <button class="btn btn-error">Delete</button></div></div></div>'),cr=u('<div class="fixed inset-0 bg-base-100/69 flex items-center justify-center z-50 p-4"><img class="max-h-full max-w-full rounded-lg shadow-2xl"/> <button class="absolute bottom-5 right-5 btn btn-circle btn-md btn-ghost text-white bg-base-300">✕</button></div>'),pr=u('<img class="w-31 h-46 md:w-35 md:h-55 object-cover rounded-lg"/>'),ur=u('<div class="w-34 h-50 bg-base-300 rounded-lg flex items-center justify-center text-base-content/20"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-16 h-16 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'),br=u('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words hidden md:inline-block"> </p>'),fr=u('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words hidden md:inline-block"> </p>'),mr=u('<span class="badge badge-primary badge-sm md:badge-md"> </span>'),_r=u('<div class="flex flex-wrap gap-1 md:gap-2 mb-2 md:mb-4" title="badges"></div>'),gr=u('<button class="btn badge-soft badge-outline max-w-2/3 badge-sm block break-all whitespace-normal line-clamp-2 md:badge-md" title="category"> </button>'),hr=u('<div class="badge badge-dash badge-sm md:badge-md" title="dataType"> </div>'),xr=u('<span class="text-xm badge badge-sm badge-ghost gap-0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" class="w-3 h-3 stroke-current fill-base-content"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l2.122 6.53a1 1 0 00.95.69h6.866c.969 0 1.371 1.24.588 1.81l-5.556 4.04a1 1 0 00-.364 1.118l2.122 6.53c.3.921-.755 1.688-1.54 1.118l-5.556-4.04a1 1 0 00-1.176 0l-5.556 4.04c-.784.57-1.838-.197-1.539-1.118l2.122-6.53a1 1 0 00-.364-1.118L.47 11.957c-.783-.57-.38-1.81.588-1.81h6.866a1 1 0 00.95-.69l2.122-6.53z"></path></svg> </span>'),wr=u('<input type="radio" name="rating" class="mask mask-star-2 mask-half-1 bg-base-content"/> <input type="radio" name="rating" class="mask mask-star-2 mask-half-2 bg-base-content"/>',1),yr=u('<div><div class="rating rating-lg rating-half mt-2"></div></div>'),kr=u('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words inline-block md:hidden"> </p>'),Er=u('<span class="badge badge-info badge-sm md:badge-md"> </span>'),Cr=u('<div class="flex flex-wrap gap-1 md:gap-2 mb-2 mt-1 justify-end" title="tags"></div>'),Sr=u('<img class="w-15 h-15 md:w-18 md:h-18 rounded-full object-cover"/>'),Lr=u('<div class="w-15 h-15 md:w-18 md:h-18 rounded-full bg-base-300 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-8 h-8 stroke-current text-base-content/20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div>'),Tr=u('<span class="indicator-item indicator-bottom indicator-center status status-info"></span>'),$r=u('<div class="flex flex-col items-center gap-2 flex-shrink-0 w-18 md:w-22 text-center cursor-pointer"><!> <div class="text-sm text-center leading-tight break-all line-clamp-2"><!> <span> </span></div></div>'),Ar=u('<div class="break-all"><span class="font-semibold">Role:</span> <span class="text-base-content"> </span></div>'),jr=u('<div class="break-all"><span class="font-semibold">Description:</span> <span class="text-base-content"> </span></div>'),Nr=u('<div class="break-words"><span class="font-semibold">Alternative Names:</span> <span class="text-base-content"> </span></div>'),Dr=u('<span class="badge badge-info badge-xs"> </span>'),Mr=u('<div class="flex flex-wrap gap-1 font-semibold">Tags: <span class="text-base-content"></span></div>'),Ir=u('<div><ul class="list bg-base-200 rounded-xl shadow-md"><li class="list-row items-center py-1"><div class="flex flex-col md:flex-row md:gap-1"><button class="h-10 w-10 btn btn-soft btn-outline btn-sm border border-b-1 border-base-300 rounded-b-none rounded-t-xl md:rounded-xl"><!></button> <button class="h-10 w-10 btn btn-soft btn-outline btn-sm border border-1 border-base-300 rounded-t-none rounded-b-xl md:rounded-xl"><!></button></div> <div class="p-2 w-full bg-base-200 rounded-md text-xs text-left space-y-1 text-info"><div class="break-all"><span class="font-semibold">Name:</span> <span class="text-success"> </span></div> <!> <!> <!> <!></div></li></ul></div>'),Rr=u('<div class="card bg-base-100 shadow-xl"><div class="card-body p-5 md:p-6"><h2 class="card-title">Characters <button class="btn btn-ghost btn-sm ml-auto" aria-label="Edit Characters"><!></button> <button class="btn btn-ghost btn-sm"><!></button></h2> <div class="flex gap-2 md:gap-4 overflow-x-auto pb-1 scrollbar-hide"></div> <!></div></div>'),zr=u('<button class="text-primary text-sm ml-2 mt-1 text-center"><!></button>'),Fr=u('<div class="card bg-base-100 shadow-xl"><div class="card-body gap-1 md:gap-2 p-4 md:p-6"><h2 class="card-title">Description <button class="btn btn-square btn-ghost ml-auto" aria-label="Edit Description"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></h2> <div><!></div> <!></div></div>'),Pr=u('<span class="bg-base-300/70 rounded-lg px-1 break-all"> </span>'),Br=u("<div></div>"),Or=u('<button class="absolute top-1 md:top-2 right-2 btn btn-xs md:btn-sm btn-circle btn-error z-10">✕</button>'),Ur=u('<div class="p-1 text-sm text-base-content/70 bg-base-200/50 border border-base-content/10 border-t-0 rounded-b-lg"><span class="ml-2 text-base-content/60">↳ <span class="font-semibold">Description:</span></span> <span class="ml-1 break-words inline prose prose-sm prose-neutral prose-p:m-0 prose-strong:inline prose-em:inline prose-code:inline"><!></span></div>'),Hr=u('<div class="py-1 px-[2px] bg-base-200 rounded-lg"><div class="relative"><div aria-label="Edit Chapters"><div> </div> <div> </div> <!> <!></div></div> <div><!></div></div>'),qr=u('<div class="card bg-base-100 shadow-xl"><div class="card-body p-3 md:p-6"><h2 class="card-title ml-1">Chapters <button class="btn btn-ghost btn-sm ml-auto"><!></button> <button class="btn btn-ghost btn-sm"><!></button> <button><!></button></h2> <div class="overflow-x-auto text-xs md:text-sm"><div class="w-full border border-base-300 bg-base-200 rounded-lg"><div class="grid grid-cols-[15vw_2fr_3fr] md:grid-cols-[7vw_1fr_2fr] gap-4 px-4 py-3 font-semibold bg-base-200 rounded-t-lg"><div>Chapter</div> <div>Characters</div> <div>Tags</div></div> <!></div></div></div></div>'),Gr=u('<div><span class="font-semibold text-base-content">Created:</span> <span> </span></div>'),Wr=u('<div><span class="font-semibold text-base-content">Last opened:</span> <span> </span></div>'),Vr=u('<div><span class="font-semibold text-base-content">Last edited:</span> <span> </span></div>'),Qr=u('<details class="collapse bg-base-100"><summary class="collapse-title font-semibold">Timestamps</summary> <div class="collapse-content text-sm"><div class="rounded-lg bg-base-200 p-3 text-xs text-gray-500 space-y-1"><!> <!> <!></div></div></details>'),Kr=u('<div class="container scroll-smooth mx-auto p-2 md:p-4 max-w-4xl space-y-2 md:space-y-6"><div class="card bg-base-100 shadow-xl"><div class="card-body p-4 md:p-6"><div class="flex flex-row md:flex-row gap-3 md:gap-5"><div class="flex-shrink-0"><!></div> <div class="flex-1 min-w-0 flex flex-col justify-center"><h1 class="text-2xl font-bold mb-2 whitespace-pre-wrap break-words" title="Title"> </h1> <!> <!> <!> <div class="flex flex-wrap gap-1.5 md:gap-2 mt-2"><!> <!> <!></div> <!></div></div> <div><!> <!></div></div></div> <!> <!> <!> <!></div>'),Xr=u('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),Jr=u('<!> <div class="min-h-screen bg-base-200"><div class="sticky top-0 z-50 navbar bg-base-100 shadow-lg"><div class="flex-none"><a class="btn btn-square btn-ghost" aria-label="Go back"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></a></div> <div class="flex-1"><span class="text-xl font-bold">Details</span></div> <div class="flex-none gap-2"><button class="btn btn-square btn-ghost" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="btn btn-square btn-ghost text-error" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <!> <!></div> <!>',1);function ls(d,c){Ia(c,!1);const $=()=>Wa(dr,"$page",F),[F,P]=Ga(),C=U(),M=U(),I=U();let e=U(null),m=U(!1),w=U(),Z=U(!1),G=U(0),tt=U(null);function nt(v){f(tt,t(tt)===v?null:v)}let k=U(!1),et=U(!1),A=U(null);async function Lt(){await Ba(),t(A)&&f(et,t(A).scrollHeight>t(A).clientHeight)}const Tt=["main","lead","mc","fmc","protagonist"];let pt=U("All");function xt(v="All"){f(pt,v),f(m,!0)}Ce(async()=>{f(w,parseInt($().params.id)),await $t(),await Nt.markAsOpened(t(w))});async function $t(){f(e,await Nt.getEntryById(t(w))),f(G,t(e)?.rating??0)}async function Mt(v){t(w)&&(f(G,v),await Nt.updateEntryPartial(t(w),{rating:t(G)}),t(e)&&Ua(e,t(e).rating=t(G)))}function Pt(){history.length>1?window.history.back():Ya("/")}async function At(){f(m,!1),await $t()}function Ie(){f(m,!1)}let Bt=U(!1);function Re(){f(Bt,!0)}async function ze(){await Nt.deleteEntry(t(w)),f(Bt,!1),Pt()}function Fe(){f(Bt,!1)}function Pe(v){return ie.parseInline(v)}function Be(v,x){const R=parseFloat(v),it=parseFloat(x),X=!isNaN(R),dt=!isNaN(it);return X&&!dt?-1:!X&&dt?1:X&&dt?R-it:v.localeCompare(x,void 0,{numeric:!0,sensitivity:"base"})}function Vt(v){return v?new Date(v).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null}let Qt=U(null),Kt=U(null);function Oe(){f(Qt,{chapterSE:"",description:"",characters:"",tags:[],_tagsText:""}),f(pt,"1chapters1"),f(m,!0)}function Ue(v){f(Qt,{...structuredClone(v),_tagsText:(v.tags??[]).join(", "),_originalChapterSE:v.chapterSE}),f(pt,"1chapters1"),f(m,!0)}function He(){f(Kt,{name:"",role:"",image:"",description:"",tags:[],_tagsString:"",alternativeNames:[],_alternativeNamesString:""}),f(pt,"1characters1"),f(m,!0)}function qe(v){f(Kt,{...structuredClone(v),_alternativeNamesString:(v.alternativeNames??[]).join(", "),_tagsString:(v.tags??[]).join(", "),_originalName:v.name}),f(pt,"1characters1"),f(m,!0)}async function Ge(v){if(!t(e)||!t(w))return;const x=t(e).characters.filter(R=>R!==v);await Nt.updateEntryPartial(t(w),{characters:x}),f(e,{...t(e),characters:x}),f(tt,null)}let at=U(!1);function We(){f(at,!t(at))}async function Ve(v){if(!t(e)||!t(w))return;const x=t(e).rows.filter(R=>R.chapterSE!==v);await Nt.updateEntryPartial(t(w),{rows:x}),f(e,{...t(e),rows:x}),x.length==0&&f(at,!1)}let Ot=U(null);function le(v){t(at)&&t(Ot)&&(t(Ot).contains(v.target)||f(at,!1))}Ce(()=>{window.addEventListener("click",le)}),Sa(()=>{window.removeEventListener("click",le)}),Gt(()=>t(e),()=>{t(e)?.description&&Lt()}),Gt(()=>t(e),()=>{f(C,(t(e)?.characters??[]).slice().sort((v,x)=>{const R=(v?.role??"").toLowerCase(),it=(x?.role??"").toLowerCase(),X=Tt?.includes(R)?0:1,dt=Tt?.includes(it)?0:1;return X-dt}))}),Gt(()=>(t(e),ie),()=>{f(M,t(e)?.description?ie.parse(t(e).description):"")}),Gt(()=>t(e),()=>{f(I,(t(e)?.rows??[]).slice().sort((v,x)=>Be(v.chapterSE,x.chapterSE)))}),Ra(),Ca();var de=Jr();Ka("9y3fua",v=>{Fa(x=>{Pa.title=`
    ${x??""}
  `},[()=>(t(e),s(()=>t(e)?.title?`${t(e).title.split(" ").slice(0,2).join(" ")}... - ${t(e).dataType||""}`:"Loading... - lib"))])});var ve=Ft(de);{var Qe=v=>{var x=vr(),R=r(x),it=i(r(R),4),X=r(it),dt=i(X,2);a(it),a(R),a(x),T("click",X,Fe),T("click",dt,ze),p(v,x)};g(ve,v=>{t(Bt)&&v(Qe)})}var Xt=i(ve,2),Jt=r(Xt),Yt=r(Jt),Ke=r(Yt);a(Yt);var ce=i(Yt,4),pe=r(ce),Xe=i(pe,2);a(ce),a(Jt);var ue=i(Jt,2);{var Je=v=>{var x=cr(),R=r(x),it=i(R,2);a(x),y(()=>{mt(R,"src",(t(e),s(()=>t(e).coverImageUrl))),mt(R,"alt",(t(e),s(()=>t(e).title)))}),T("click",R,Le(function(X){Va.call(this,c,X)})),T("click",it,()=>f(Z,!1)),T("click",x,()=>f(Z,!1)),p(v,x)};g(ue,v=>{t(Z),t(e),s(()=>t(Z)&&t(e)&&t(e).coverImageUrl)&&v(Je)})}var Ye=i(ue,2);{var Ze=v=>{var x=Kr(),R=r(x),it=r(R),X=r(it),dt=r(X),ra=r(dt);{var sa=o=>{var n=pr();y(()=>{mt(n,"src",(t(e),s(()=>t(e).coverImageUrl))),mt(n,"alt",(t(e),s(()=>t(e).title)))}),T("click",n,()=>f(Z,!0)),p(o,n)},na=o=>{var n=ur();p(o,n)};g(ra,o=>{t(e),s(()=>t(e).coverImageUrl)?o(sa):o(na,!1)})}a(dt);var be=i(dt,2),Ut=r(be),ia=r(Ut,!0);a(Ut),_t(Ut,(o,n)=>gt?.(o,n),()=>t(e)?.title);var fe=i(Ut,2);{var oa=o=>{var n=br(),h=r(n,!0);a(n),_t(n,(_,b)=>gt?.(_,b),()=>t(e).slug),y(()=>D(h,(t(e),s(()=>t(e).slug)))),p(o,n)};g(fe,o=>{t(e),s(()=>t(e).slug)&&o(oa)})}var me=i(fe,2);{var la=o=>{var n=fr(),h=r(n,!0);a(n),_t(n,(_,b)=>gt?.(_,b),()=>t(e).alternativeTitles.join(", ")),y(_=>D(h,_),[()=>(t(e),s(()=>t(e).alternativeTitles.join(", ")))]),p(o,n)};g(me,o=>{t(e),s(()=>(t(e).alternativeTitles??[]).length>0)&&o(la)})}var _e=i(me,2);{var da=o=>{var n=_r();kt(n,5,()=>(t(e),s(()=>t(e).badges)),Et,(h,_)=>{var b=mr(),B=r(b,!0);a(b),_t(b,(S,q)=>gt?.(S,q),()=>t(_)),y(()=>D(B,t(_))),p(h,b)}),a(n),p(o,n)};g(_e,o=>{t(e),s(()=>(t(e).badges??[]).length>0)&&o(da)})}var Zt=i(_e,2),ge=r(Zt);{var va=o=>{var n=gr(),h=r(n,!0);a(n),y(()=>D(h,(t(e),s(()=>t(e).category)))),T("click",n,()=>xt("category")),p(o,n)};g(ge,o=>{t(e),s(()=>t(e).category)&&o(va)})}var he=i(ge,2);{var ca=o=>{var n=hr(),h=r(n,!0);a(n),y(()=>D(h,(t(e),s(()=>t(e).dataType)))),p(o,n)};g(he,o=>{t(e),s(()=>t(e).dataType)&&o(ca)})}var pa=i(he,2);{var ua=o=>{var n=xr(),h=i(r(n));a(n),y(()=>D(h,` ${ct(Te),t(G),s(()=>Te[t(G)])??""}`)),p(o,n)};g(pa,o=>{t(e),s(()=>t(e).rating)&&o(ua)})}a(Zt);var ba=i(Zt,2);{var fa=o=>{var n=yr(),h=r(n);kt(h,4,()=>s(()=>Array.from({length:5},(_,b)=>b+1)),Et,(_,b)=>{var B=wr(),S=Ft(B);$e(S);var q=i(S,2);$e(q),y(()=>{Ae(S,b*2-1),je(S,t(G)===b*2-1),mt(S,"aria-label",`${b-.5} star`),Ae(q,b*2),je(q,t(G)===b*2),mt(q,"aria-label",`${b} star`)}),T("change",S,()=>Mt(b*2-1)),T("change",q,()=>Mt(b*2)),p(_,B)}),a(h),a(n),p(o,n)};g(ba,o=>{t(e),s(()=>t(e).rating||t(e).rating===0)&&o(fa)})}a(be),a(X);var xe=i(X,2),we=r(xe);{var ma=o=>{var n=kr(),h=r(n,!0);a(n),_t(n,(_,b)=>gt?.(_,b),()=>t(e).alternativeTitles.join(", ")),y(_=>D(h,_),[()=>(t(e),s(()=>t(e).alternativeTitles.join(", ")))]),p(o,n)};g(we,o=>{t(e),s(()=>(t(e).alternativeTitles??[]).length>0)&&o(ma)})}var _a=i(we,2);{var ga=o=>{var n=Cr();kt(n,5,()=>(t(e),s(()=>t(e).tags)),Et,(h,_)=>{var b=Er(),B=r(b,!0);a(b),_t(b,(S,q)=>gt?.(S,q),()=>t(_)),y(()=>D(B,t(_))),p(h,b)}),a(n),p(o,n)};g(_a,o=>{t(e),s(()=>(t(e).tags??[]).length>0)&&o(ga)})}a(xe),a(it),a(R);var ye=i(R,2);{var ha=o=>{var n=Rr(),h=r(n),_=r(h),b=i(r(_)),B=r(b);vt(B,()=>(ct(H),s(()=>H.edit))),a(b);var S=i(b,2),q=r(S);vt(q,()=>(ct(H),s(()=>H.add))),a(S),a(_);var ot=i(_,2);kt(ot,5,()=>t(C),Et,(L,l)=>{var j=$r(),Y=r(j);{var z=W=>{var V=Sr();_t(V,(yt,Ct)=>gt?.(yt,Ct),()=>t(l).name),y(()=>{mt(V,"src",(t(l),s(()=>t(l).image))),mt(V,"alt",(t(l),s(()=>t(l).name)))}),qa(V),p(W,V)},E=W=>{var V=Lr();p(W,V)};g(Y,W=>{t(l),s(()=>t(l).image)?W(z):W(E,!1)})}var Q=i(Y,2),ut=r(Q);{var bt=W=>{var V=Tr();p(W,V)},wt=Oa(()=>(t(l),s(()=>Tt.includes(t(l).role?.toLowerCase()??""))));g(ut,W=>{t(wt)&&W(bt)})}var lt=i(ut,2),jt=r(lt,!0);a(lt),a(Q),a(j),y(()=>D(jt,(t(l),s(()=>t(l).name)))),T("click",j,()=>nt(t(l).name)),p(L,j)}),a(ot);var J=i(ot,2);kt(J,1,()=>t(C),Et,(L,l)=>{var j=ne(),Y=Ft(j);{var z=E=>{var Q=Ir(),ut=r(Q),bt=r(ut),wt=r(bt),lt=r(wt),jt=r(lt);vt(jt,()=>(ct(H),s(()=>H.edit))),a(lt);var W=i(lt,2),V=r(W);vt(V,()=>(ct(H),s(()=>H.delete))),a(W),a(wt);var yt=i(wt,2),Ct=r(yt),It=i(r(Ct),2),te=r(It,!0);a(It),a(Ct);var Ht=i(Ct,2);{var ee=N=>{var O=Ar(),K=i(r(O),2),ft=r(K,!0);a(K),a(O),y(()=>D(ft,(t(l),s(()=>t(l).role)))),p(N,O)};g(Ht,N=>{t(l),s(()=>t(l).role)&&N(ee)})}var Rt=i(Ht,2);{var ae=N=>{var O=jr(),K=i(r(O),2),ft=r(K,!0);a(K),a(O),y(()=>D(ft,(t(l),s(()=>t(l).description)))),p(N,O)};g(Rt,N=>{t(l),s(()=>t(l).description)&&N(ae)})}var qt=i(Rt,2);{var rt=N=>{var O=Nr(),K=i(r(O),2),ft=r(K,!0);a(K),a(O),y(re=>D(ft,re),[()=>(t(l),s(()=>t(l).alternativeNames.join(", ")))]),p(N,O)};g(qt,N=>{t(l),s(()=>(t(l).alternativeNames??[]).length>0)&&N(rt)})}var st=i(qt,2);{var St=N=>{var O=Mr(),K=i(r(O));kt(K,5,()=>(t(l),s(()=>t(l).tags)),Et,(ft,re)=>{var se=Dr(),Ea=r(se,!0);a(se),y(()=>D(Ea,t(re))),p(ft,se)}),a(K),a(O),p(N,O)};g(st,N=>{t(l),s(()=>(t(l).tags??[]).length>0)&&N(St)})}a(yt),_t(yt,(N,O)=>gt?.(N,O),()=>t(l).name),a(bt),a(ut),a(Q),y(()=>D(te,(t(l),s(()=>t(l).name)))),T("click",lt,()=>qe(t(l))),T("click",W,()=>Ge(t(l))),rr(3,Q,()=>or,()=>({duration:200})),p(E,Q)};g(Y,E=>{t(tt),t(l),s(()=>t(tt)===t(l).name&&(t(l).name||t(l).role||(t(l).alternativeNames??[]).length>0||(t(l).tags??[]).length>0))&&E(z)})}p(L,j)}),a(h),a(n),T("click",b,()=>xt("characters")),T("click",S,He),p(o,n)};g(ye,o=>{t(e),s(()=>(t(e).characters??[]).length>0)&&o(ha)})}var ke=i(ye,2);{var xa=o=>{var n=Fr(),h=r(n),_=r(h),b=i(r(_));a(_);var B=i(_,2),S=r(B);vt(S,()=>t(M)),a(B),Se(B,J=>f(A,J),()=>t(A));var q=i(B,2);{var ot=J=>{var L=zr(),l=r(L);{var j=z=>{var E=ne(),Q=Ft(E);vt(Q,()=>(ct(H),s(()=>H.upArrow))),p(z,E)},Y=z=>{var E=ne(),Q=Ft(E);vt(Q,()=>(ct(H),s(()=>H.downArrow))),p(z,E)};g(l,z=>{t(k)?z(j):z(Y,!1)})}a(L),T("click",L,()=>f(k,!t(k))),p(J,L)};g(q,J=>{t(et)&&J(ot)})}a(h),_t(h,(J,L)=>gt?.(J,L),()=>t(e).description),a(n),y(()=>Dt(B,1,`ml-2 break-words prose prose-sm max-w-none prose-p:my-1 prose-ul:my-0 prose-li:my-0  prose-h1:my-0 prose-h2:my-0 cursor-pointer ${t(k)?"":"line-clamp-3"}`)),T("click",b,()=>xt("description")),T("click",B,()=>t(et)&&f(k,!t(k))),p(o,n)};g(ke,o=>{t(e),s(()=>t(e).description)&&o(xa)})}var Ee=i(ke,2);{var wa=o=>{var n=qr(),h=r(n),_=r(h),b=i(r(_)),B=r(b);vt(B,()=>(ct(H),s(()=>H.edit))),a(b);var S=i(b,2),q=r(S);vt(q,()=>(ct(H),s(()=>H.add))),a(S);var ot=i(S,2);let J;var L=r(ot);vt(L,()=>(ct(H),s(()=>H.delete))),a(ot),a(_);var l=i(_,2),j=r(l),Y=i(r(j),2);kt(Y,1,()=>t(I),Et,(z,E)=>{var Q=Hr(),ut=r(Q),bt=r(ut);let wt;var lt=r(bt);let jt;var W=r(lt,!0);a(lt);var V=i(lt,2);let yt;var Ct=r(V,!0);a(V);var It=i(V,2);{var te=rt=>{var st=Br();let St;kt(st,5,()=>(t(E),s(()=>t(E).tags)),Et,(N,O)=>{var K=Pr(),ft=r(K,!0);a(K),y(()=>D(ft,t(O))),p(N,K)}),a(st),y(()=>St=Dt(st,1,"flex flex-wrap justify-start content-start gap-1",null,St,{"opacity-70":t(at)})),p(rt,st)};g(It,rt=>{t(E),s(()=>(t(E).tags??[]).length>0)&&rt(te)})}var Ht=i(It,2);{var ee=rt=>{var st=Or();T("click",st,Le(()=>Ve(t(E).chapterSE))),p(rt,st)};g(Ht,rt=>{t(at)&&rt(ee)})}a(bt),a(ut);var Rt=i(ut,2),ae=r(Rt);{var qt=rt=>{var st=Ur(),St=i(r(st),2),N=r(St);vt(N,()=>(t(E),s(()=>Pe(t(E).description)))),a(St),a(st),p(rt,st)};g(ae,rt=>{t(E),s(()=>t(E).description)&&rt(qt)})}a(Rt),a(Q),y(()=>{wt=Dt(bt,1,"grid grid-cols-[15vw_2fr_3fr] md:grid-cols-[7vw_1fr_2fr] gap-2 md:gap-4 p-2 md:p-4 bg-base-100 divide-x-[2px] divide-base-content/10 border border-base-content/10 rounded-t-lg rounded-b-md cursor-pointer hover:bg-base-200 z-1",null,wt,{"bg-base-300":t(at)}),jt=Dt(lt,1,"font-semibold break-words",null,jt,{"opacity-70":t(at)}),D(W,(t(E),s(()=>t(E).chapterSE))),yt=Dt(V,1,"break-all",null,yt,{"opacity-70":t(at)}),D(Ct,(t(E),s(()=>t(E).characters)))}),T("click",bt,()=>!t(at)&&Ue(t(E))),p(z,Q)}),a(j),a(l),a(h),Se(h,z=>f(Ot,z),()=>t(Ot)),a(n),y(()=>J=Dt(ot,1,"btn btn-ghost btn-sm rounded-full",null,J,{"text-base-300":t(at),"bg-error":t(at)})),T("click",b,()=>xt("chapters")),T("click",S,Oe),T("click",ot,We),p(o,n)};g(Ee,o=>{t(e),s(()=>(t(e).rows??[]).length>0)&&o(wa)})}var ya=i(Ee,2);{var ka=o=>{var n=Qr(),h=i(r(n),2),_=r(h),b=r(_);{var B=L=>{var l=Gr(),j=i(r(l),2),Y=r(j,!0);a(j),a(l),y(z=>D(Y,z),[()=>(t(e),s(()=>Vt(t(e).createdAt)))]),p(L,l)};g(b,L=>{t(e),s(()=>t(e).createdAt)&&L(B)})}var S=i(b,2);{var q=L=>{var l=Wr(),j=i(r(l),2),Y=r(j,!0);a(j),a(l),y(z=>D(Y,z),[()=>(t(e),s(()=>Vt(t(e).openedAt)))]),p(L,l)};g(S,L=>{t(e),s(()=>t(e).openedAt)&&L(q)})}var ot=i(S,2);{var J=L=>{var l=Vr(),j=i(r(l),2),Y=r(j,!0);a(j),a(l),y(z=>D(Y,z),[()=>(t(e),s(()=>Vt(t(e).editedAt)))]),p(L,l)};g(ot,L=>{t(e),s(()=>t(e).editedAt)&&L(J)})}a(_),a(h),a(n),p(o,n)};g(ya,o=>{t(e),s(()=>t(e).createdAt||t(e).openedAt||t(e).editedAt)&&o(ka)})}a(x),y(()=>D(ia,(t(e),s(()=>t(e).title)))),p(v,x)},ta=v=>{var x=Xr();p(v,x)};g(Ye,v=>{t(e)?v(Ze):v(ta,!1)})}a(Xt);var ea=i(Xt,2);{var aa=v=>{Qa(v,{get entryId(){return t(w)},get editSection(){return t(pt)},get selectedChapter(){return t(Qt)},get selectedCharacter(){return t(Kt)},$$events:{save:At,cancel:Ie}})};g(ea,v=>{t(m)&&v(aa)})}y(()=>mt(Ke,"href",`${Ja??""}/`)),T("click",pe,()=>xt("All")),T("click",Xe,Re),p(d,de),za(),P()}export{ls as component,os as universal};

import{a as p,f as b,c as ha}from"../chunks/DLeEY7fs.js";import{i as xa}from"../chunks/D56Uv2cy.js";import{o as ke,a as wa}from"../chunks/Dpa3FFmK.js";import{$ as ya,I as ka,aQ as Ea,af as Ca,O as Sa,o as s,aR as $a,aS as La,Q as Ta,U as Mt,aD as je,z as ja,aT as ae,aU as Aa,A as re,B as y,D as Na,v as t,aV as Da,E as r,G as o,W as f,aW as Ma,F as a,V,w as ht,aP as Ia,aX as Ra}from"../chunks/BPO9GtFz.js";import{a as za,e as S,s as j,r as Fa}from"../chunks/DfAXxMbk.js";import{i as h,s as Pa,a as Oa,b as Ba}from"../chunks/CrlJmSwP.js";import{g as se,d as Tt,s as pt,a as Ee,b as Ua,c as ut,E as Ha,e as xt,i as wt,R as Ce,r as Se,f as $e,h as Le,j as bt,S as Q,k as It}from"../chunks/DSqSt04o.js";import{h as qa}from"../chunks/CuXflmye.js";import{s as Ga,b as Wa,g as Va}from"../chunks/BpVkViDw.js";const Qa=()=>performance.now(),mt={tick:d=>requestAnimationFrame(d),now:()=>Qa(),tasks:new Set};function Ae(){const d=mt.now();mt.tasks.forEach(c=>{c.c(d)||(mt.tasks.delete(c),c.f())}),mt.tasks.size!==0&&mt.tick(Ae)}function Ka(d){let c;return mt.tasks.size===0&&mt.tick(Ae),{promise:new Promise($=>{mt.tasks.add(c={c:d,f:$})}),abort(){mt.tasks.delete(c)}}}function Ht(d,c){je(()=>{d.dispatchEvent(new CustomEvent(c))})}function Xa(d){if(d==="float")return"cssFloat";if(d==="offset")return"cssOffset";if(d.startsWith("--"))return d;const c=d.split("-");return c.length===1?c[0]:c[0]+c.slice(1).map($=>$[0].toUpperCase()+$.slice(1)).join("")}function Te(d){const c={},$=d.split(";");for(const I of $){const[R,k]=I.split(":");if(!R||k===void 0)break;const A=Xa(R.trim());c[A]=k.trim()}return c}const Ja=d=>d;function Ya(d,c,$,I){var R=(d&$a)!==0,k="both",A,N=c.inert,e=c.style.overflow,m,w;function K(){return je(()=>A??=$()(c,I?.()??{},{direction:k}))}var B={is_global:R,in(){c.inert=N,m=ne(c,K(),w,1,()=>{Ht(c,"introend"),m?.abort(),m=A=void 0,c.style.overflow=e})},out(U){c.inert=!0,w=ne(c,K(),m,0,()=>{Ht(c,"outroend"),U?.()})},stop:()=>{m?.abort(),w?.abort()}},X=ya;if((X.nodes.t??=[]).push(B),za){var et=R;if(!et){for(var E=X.parent;E&&(E.f&ka)!==0;)for(;(E=E.parent)&&(E.f&Ea)===0;);et=!E||(E.f&Ca)!==0}et&&Sa(()=>{s(()=>B.in())})}}function ne(d,c,$,I,R){var k=I===1;if(La(c)){var A,N=!1;return Ta(()=>{if(!N){var U=c({direction:k?"in":"out"});A=ne(d,U,$,I,R)}}),{abort:()=>{N=!0,A?.abort()},deactivate:()=>A.deactivate(),reset:()=>A.reset(),t:()=>A.t()}}if($?.deactivate(),!c?.duration&&!c?.delay)return Ht(d,k?"introstart":"outrostart"),R(),{abort:Mt,deactivate:Mt,reset:Mt,t:()=>I};const{delay:e=0,css:m,tick:w,easing:K=Ja}=c;var B=[];if(k&&$===void 0&&(w&&w(0,1),m)){var X=Te(m(0,1));B.push(X,X)}var et=()=>1-I,E=d.animate(B,{duration:e,fill:"forwards"});return E.onfinish=()=>{E.cancel(),Ht(d,k?"introstart":"outrostart");var U=$?.t()??1-I;$?.abort();var L=I-U,yt=c.duration*Math.abs(L),jt=[];if(yt>0){var Rt=!1;if(m)for(var zt=Math.ceil(yt/16.666666666666668),At=0;At<=zt;At+=1){var kt=U+L*K(At/zt),Ft=Te(m(kt,1-kt));jt.push(Ft),Rt||=Ft.overflow==="hidden"}Rt&&(d.style.overflow="hidden"),et=()=>{var St=E.currentTime;return U+L*K(St/yt)},w&&Ka(()=>{if(E.playState!=="running")return!1;var St=et();return w(St,1-St),!0})}E=d.animate(jt,{duration:yt,fill:"forwards"}),E.onfinish=()=>{et=()=>I,w?.(I,1-I),R()}},{abort:()=>{E&&(E.cancel(),E.effect=null,E.onfinish=Mt)},deactivate:()=>{R=Mt},reset:()=>{I===0&&w?.(1,0)},t:()=>et()}}const Za=!1,tr=!1,es=Object.freeze(Object.defineProperty({__proto__:null,prerender:Za,ssr:tr},Symbol.toStringTag,{value:"Module"}));function er(d){const c=d-1;return c*c*c+1}function ar(d,{delay:c=0,duration:$=400,easing:I=er,axis:R="y"}={}){const k=getComputedStyle(d),A=+k.opacity,N=R==="y"?"height":"width",e=parseFloat(k[N]),m=R==="y"?["top","bottom"]:["left","right"],w=m.map(L=>`${L[0].toUpperCase()}${L.slice(1)}`),K=parseFloat(k[`padding${w[0]}`]),B=parseFloat(k[`padding${w[1]}`]),X=parseFloat(k[`margin${w[0]}`]),et=parseFloat(k[`margin${w[1]}`]),E=parseFloat(k[`border${w[0]}Width`]),U=parseFloat(k[`border${w[1]}Width`]);return{delay:c,duration:$,easing:I,css:L=>`overflow: hidden;opacity: ${Math.min(L*20,1)*A};${N}: ${L*e}px;padding-${m[0]}: ${L*K}px;padding-${m[1]}: ${L*B}px;margin-${m[0]}: ${L*X}px;margin-${m[1]}: ${L*et}px;border-${m[0]}-width: ${L*E}px;border-${m[1]}-width: ${L*U}px;min-${N}: 0`}}function ft(d,c){let $,R=!1;async function k(e){try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(e);else{const m=document.createElement("input");m.value=e,document.body.appendChild(m),m.select(),document.execCommand("copy"),document.body.removeChild(m)}d.classList.add("copied"),setTimeout(()=>d.classList.remove("copied"),600)}catch(m){console.error("Copy failed",m)}}function A(){R=!0,$=setTimeout(()=>{R&&k(c??d.textContent??"")},600)}function N(){R=!1,clearTimeout($)}return d.addEventListener("touchstart",A),d.addEventListener("touchend",N),d.addEventListener("touchcancel",N),d.addEventListener("mousedown",A),d.addEventListener("mouseup",N),d.addEventListener("mouseleave",N),{destroy(){d.removeEventListener("touchstart",A),d.removeEventListener("touchend",N),d.removeEventListener("touchcancel",N),d.removeEventListener("mousedown",A),d.removeEventListener("mouseup",N),d.removeEventListener("mouseleave",N)}}}const rr=()=>{const d=Ga;return{page:{subscribe:d.page.subscribe},navigating:{subscribe:d.navigating.subscribe},updated:d.updated}},sr={subscribe(d){return rr().page.subscribe(d)}};var nr=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50" role="dialog" aria-modal="true"><div class="bg-base-100 rounded-lg p-4 m-4 shadow-lg w-96"><h3 class="text-lg font-bold mb-4">Confirm Delete</h3> <p class="mb-6">Are you sure you want to delete this entry?</p> <div class="flex justify-end gap-2"><button class="btn btn-soft">Cancel</button> <button class="btn btn-error">Delete</button></div></div></div>'),ir=b('<div class="fixed inset-0 bg-base-100/69 flex items-center justify-center z-50 p-4"><img class="max-h-full max-w-full rounded-lg shadow-2xl"/> <button class="absolute bottom-5 right-5 btn btn-circle btn-md btn-ghost text-white bg-base-300">✕</button></div>'),or=b('<img class="w-31 h-46 md:w-35 md:h-55 object-cover rounded-lg"/>'),lr=b('<div class="w-34 h-50 bg-base-300 rounded-lg flex items-center justify-center text-base-content/20"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-16 h-16 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'),dr=b('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words hidden md:inline-block"> </p>'),vr=b('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words hidden md:inline-block"> </p>'),cr=b('<span class="badge badge-primary badge-sm md:badge-md"> </span>'),pr=b('<div class="flex flex-wrap gap-1 md:gap-2 mb-2 md:mb-4" title="badges"></div>'),ur=b('<button class="btn badge-soft badge-outline badge-sm md:badge-md block break-all whitespace-normal line-clamp-2" title="category"> </button>'),br=b('<div class="badge badge-dash badge-sm md:badge-md" title="dataType"> </div>'),fr=b('<span class="text-xm badge badge-sm badge-ghost gap-0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" class="w-3 h-3 stroke-current fill-base-content"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l2.122 6.53a1 1 0 00.95.69h6.866c.969 0 1.371 1.24.588 1.81l-5.556 4.04a1 1 0 00-.364 1.118l2.122 6.53c.3.921-.755 1.688-1.54 1.118l-5.556-4.04a1 1 0 00-1.176 0l-5.556 4.04c-.784.57-1.838-.197-1.539-1.118l2.122-6.53a1 1 0 00-.364-1.118L.47 11.957c-.783-.57-.38-1.81.588-1.81h6.866a1 1 0 00.95-.69l2.122-6.53z"></path></svg> </span>'),mr=b('<input type="radio" name="rating" class="mask mask-star-2 mask-half-1 bg-base-content"/> <input type="radio" name="rating" class="mask mask-star-2 mask-half-2 bg-base-content"/>',1),_r=b('<div><div class="rating rating-lg rating-half mt-2"></div></div>'),gr=b('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words inline-block md:hidden"> </p>'),hr=b('<span class="badge badge-info badge-sm md:badge-md"> </span>'),xr=b('<div class="flex flex-wrap gap-1 md:gap-2 mb-2 mt-1 justify-end" title="tags"></div>'),wr=b('<img class="w-15 h-15 md:w-18 md:h-18 rounded-full object-cover"/>'),yr=b('<div class="w-15 h-15 md:w-18 md:h-18 rounded-full bg-base-300 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-8 h-8 stroke-current text-base-content/20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div>'),kr=b('<span class="indicator-item indicator-bottom indicator-center status status-info"></span>'),Er=b('<div class="flex flex-col items-center gap-2 flex-shrink-0 w-18 md:w-22 text-center cursor-pointer"><!> <div class="text-sm text-center leading-tight break-all line-clamp-2"><!> <span> </span></div></div>'),Cr=b('<div class="break-all"><span class="font-semibold">Role:</span> <span class="text-base-content"> </span></div>'),Sr=b('<div class="break-all"><span class="font-semibold">Description:</span> <span class="text-base-content"> </span></div>'),$r=b('<div class="break-words"><span class="font-semibold">Alternative Names:</span> <span class="text-base-content"> </span></div>'),Lr=b('<span class="badge badge-info badge-xs"> </span>'),Tr=b('<div class="flex flex-wrap gap-1 font-semibold">Tags: <span class="text-base-content"></span></div>'),jr=b('<div><ul class="list bg-base-200 rounded-xl shadow-md"><li class="list-row items-center py-1"><div class="flex flex-col md:flex-row md:gap-1"><button class="h-10 w-10 btn btn-soft btn-outline btn-sm border border-b-1 border-base-300 rounded-b-none rounded-t-xl md:rounded-xl"><!></button> <button class="h-10 w-10 btn btn-soft btn-outline btn-sm border border-1 border-base-300 rounded-t-none rounded-b-xl md:rounded-xl"><!></button></div> <div class="p-2 w-full bg-base-200 rounded-md text-xs text-left space-y-1 text-info"><div class="break-all"><span class="font-semibold">Name:</span> <span class="text-success"> </span></div> <!> <!> <!> <!></div></li></ul></div>'),Ar=b('<div class="card bg-base-100 shadow-xl"><div class="card-body p-5 md:p-6"><h2 class="card-title">Characters <button class="btn btn-ghost btn-sm ml-auto" aria-label="Edit Characters"><!></button> <button class="btn btn-ghost btn-sm"><!></button></h2> <div class="flex gap-2 md:gap-4 overflow-x-auto pb-1 scrollbar-hide"></div> <!></div></div>'),Nr=b('<div class="card bg-base-100 shadow-xl"><div class="card-body gap-1 md:gap-2 p-4 md:p-6"><h2 class="card-title">Description <button class="btn btn-square btn-ghost ml-auto" aria-label="Edit Description"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></h2> <div class="ml-2 break-words prose prose-sm max-w-none prose-p:my-1 prose-ul:my-0 prose-li:my-0 prose-h1:my-0 prose-h2:my-0"><!></div></div></div>'),Dr=b('<span class="bg-base-300/70 rounded-lg px-1 break-all"> </span>'),Mr=b("<div></div>"),Ir=b('<button class="absolute top-1 md:top-2 right-2 btn btn-xs md:btn-sm btn-circle btn-error z-10">✕</button>'),Rr=b('<div class="p-1 text-sm text-base-content/70 bg-base-200/50 border border-base-content/10 border-t-0 rounded-b-lg"><span class="ml-2 text-base-content/60">↳ <span class="font-semibold">Description:</span></span> <span class="ml-1 break-words inline prose prose-sm prose-neutral prose-p:m-0 prose-strong:inline prose-em:inline prose-code:inline"><!></span></div>'),zr=b('<div class="py-1 px-[2px] bg-base-200 rounded-lg"><div class="relative"><div aria-label="Edit Chapters"><div> </div> <div> </div> <!> <!></div></div> <div><!></div></div>'),Fr=b('<div class="card bg-base-100 shadow-xl"><div class="card-body p-3 md:p-6"><h2 class="card-title ml-1">Chapters <button class="btn btn-ghost btn-sm ml-auto"><!></button> <button class="btn btn-ghost btn-sm"><!></button> <button><!></button></h2> <div class="overflow-x-auto text-xs md:text-sm"><div class="w-full border border-base-300 bg-base-200 rounded-lg"><div class="grid grid-cols-[15vw_2fr_3fr] md:grid-cols-[7vw_1fr_2fr] gap-4 px-4 py-3 font-semibold bg-base-200 rounded-t-lg"><div>Chapter</div> <div>Characters</div> <div>Tags</div></div> <!></div></div></div></div>'),Pr=b('<div><span class="font-semibold text-base-content">Created:</span> <span> </span></div>'),Or=b('<div><span class="font-semibold text-base-content">Last opened:</span> <span> </span></div>'),Br=b('<div><span class="font-semibold text-base-content">Last edited:</span> <span> </span></div>'),Ur=b('<details class="collapse bg-base-100"><summary class="collapse-title font-semibold">Timestamps</summary> <div class="collapse-content text-sm"><div class="rounded-lg bg-base-200 p-3 text-xs text-gray-500 space-y-1"><!> <!> <!></div></div></details>'),Hr=b('<div class="container scroll-smooth mx-auto p-2 md:p-4 max-w-4xl space-y-2 md:space-y-6"><div class="card bg-base-100 shadow-xl"><div class="card-body p-4 md:p-6"><div class="flex flex-row md:flex-row gap-3 md:gap-5"><div class="flex-shrink-0"><!></div> <div class="flex-1 min-w-0 flex flex-col justify-center"><h1 class="text-2xl font-bold mb-2 whitespace-pre-wrap break-words" title="Title"> </h1> <!> <!> <!> <div class="flex flex-wrap gap-1.5 md:gap-2 mt-2"><!> <!> <!></div> <!></div></div> <div><!> <!></div></div></div> <!> <!> <!> <!></div>'),qr=b('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),Gr=b('<!> <div class="min-h-screen bg-base-200"><div class="sticky top-0 z-50 navbar bg-base-100 shadow-lg"><div class="flex-none"><a class="btn btn-square btn-ghost" aria-label="Go back"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></a></div> <div class="flex-1"><span class="text-xl font-bold">Details</span></div> <div class="flex-none gap-2"><button class="btn btn-square btn-ghost" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="btn btn-square btn-ghost text-error" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <!> <!></div> <!>',1);function as(d,c){ja(c,!1);const $=()=>Oa(sr,"$page",I),[I,R]=Pa(),k=V(),A=V(),N=V();let e=V(null),m=V(!1),w=V(),K=V(!1),B=V(0),X=V(null);function et(v){f(X,t(X)===v?null:v)}const E=["main","lead","mc","fmc","protagonist"];let U=V("All");function L(v="All"){f(U,v),f(m,!0)}ke(async()=>{f(w,parseInt($().params.id)),await yt(),await Tt.markAsOpened(t(w))});async function yt(){f(e,await Tt.getEntryById(t(w))),f(B,t(e)?.rating??0)}async function jt(v){t(w)&&(f(B,v),await Tt.updateEntryPartial(t(w),{rating:t(B)}),t(e)&&Ra(e,t(e).rating=t(B)))}function Rt(){history.length>1?window.history.back():Va("/")}async function zt(){f(m,!1),await yt()}function At(){f(m,!1)}let kt=V(!1);function Ft(){f(kt,!0)}async function St(){await Tt.deleteEntry(t(w)),f(kt,!1),Rt()}function Ne(){f(kt,!1)}function De(v){return se.parseInline(v)}function Me(v,x){const D=parseFloat(v),at=parseFloat(x),rt=!isNaN(D),lt=!isNaN(at);return rt&&!lt?-1:!rt&&lt?1:rt&&lt?D-at:v.localeCompare(x,void 0,{numeric:!0,sensitivity:"base"})}function qt(v){return v?new Date(v).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null}let Gt=V(null),Wt=V(null);function Ie(){f(Gt,{chapterSE:"",description:"",characters:"",tags:[],_tagsText:""}),f(U,"1chapters1"),f(m,!0)}function Re(v){f(Gt,{...structuredClone(v),_tagsText:(v.tags??[]).join(", "),_originalChapterSE:v.chapterSE}),f(U,"1chapters1"),f(m,!0)}function ze(){f(Wt,{name:"",role:"",image:"",description:"",tags:[],_tagsString:"",alternativeNames:[],_alternativeNamesString:""}),f(U,"1characters1"),f(m,!0)}function Fe(v){f(Wt,{...structuredClone(v),_alternativeNamesString:(v.alternativeNames??[]).join(", "),_tagsString:(v.tags??[]).join(", "),_originalName:v.name}),f(U,"1characters1"),f(m,!0)}async function Pe(v){if(!t(e)||!t(w))return;const x=t(e).characters.filter(D=>D!==v);await Tt.updateEntryPartial(t(w),{characters:x}),f(e,{...t(e),characters:x}),f(X,null)}let J=V(!1);function Oe(){f(J,!t(J))}async function Be(v){if(!t(e)||!t(w))return;const x=t(e).rows.filter(D=>D.chapterSE!==v);await Tt.updateEntryPartial(t(w),{rows:x}),f(e,{...t(e),rows:x}),x.length==0&&f(J,!1)}let Pt=V(null);function ie(v){t(J)&&t(Pt)&&(t(Pt).contains(v.target)||f(J,!1))}ke(()=>{window.addEventListener("click",ie)}),wa(()=>{window.removeEventListener("click",ie)}),ae(()=>t(e),()=>{f(k,t(e)?.characters?[...t(e).characters].sort((v,x)=>{const D=E.includes(v.role.toLowerCase())?0:1,at=E.includes(x.role.toLowerCase())?0:1;return D-at}):[])}),ae(()=>(t(e),se),()=>{f(A,t(e)?.description?se.parse(t(e).description):"")}),ae(()=>t(e),()=>{f(N,(t(e)?.rows??[]).slice().sort((v,x)=>Me(v.chapterSE,x.chapterSE)))}),Aa(),xa();var oe=Gr();qa("9y3fua",v=>{Da(x=>{Ma.title=`
    ${x??""}
  `},[()=>(t(e),s(()=>t(e)?.title?`${t(e).title.split(" ").slice(0,2).join(" ")}... - ${t(e).dataType||""}`:"Loading... - lib"))])});var le=re(oe);{var Ue=v=>{var x=nr(),D=r(x),at=o(r(D),4),rt=r(at),lt=o(rt,2);a(at),a(D),a(x),S("click",rt,Ne),S("click",lt,St),p(v,x)};h(le,v=>{t(kt)&&v(Ue)})}var Vt=o(le,2),Qt=r(Vt),Kt=r(Qt),He=r(Kt);a(Kt);var de=o(Kt,4),ve=r(de),qe=o(ve,2);a(de),a(Qt);var ce=o(Qt,2);{var Ge=v=>{var x=ir(),D=r(x),at=o(D,2);a(x),y(()=>{pt(D,"src",(t(e),s(()=>t(e).coverImageUrl))),pt(D,"alt",(t(e),s(()=>t(e).title)))}),S("click",D,Ee(function(rt){Ua.call(this,c,rt)})),S("click",at,()=>f(K,!1)),S("click",x,()=>f(K,!1)),p(v,x)};h(ce,v=>{t(K),t(e),s(()=>t(K)&&t(e)&&t(e).coverImageUrl)&&v(Ge)})}var We=o(ce,2);{var Ve=v=>{var x=Hr(),D=r(x),at=r(D),rt=r(at),lt=r(rt),Je=r(lt);{var Ye=i=>{var n=or();y(()=>{pt(n,"src",(t(e),s(()=>t(e).coverImageUrl))),pt(n,"alt",(t(e),s(()=>t(e).title)))}),S("click",n,()=>f(K,!0)),p(i,n)},Ze=i=>{var n=lr();p(i,n)};h(Je,i=>{t(e),s(()=>t(e).coverImageUrl)?i(Ye):i(Ze,!1)})}a(lt);var pe=o(lt,2),Ot=r(pe),ta=r(Ot,!0);a(Ot),ut(Ot,(i,n)=>ft?.(i,n),()=>t(e)?.title);var ue=o(Ot,2);{var ea=i=>{var n=dr(),g=r(n,!0);a(n),ut(n,(_,u)=>ft?.(_,u),()=>t(e).slug),y(()=>j(g,(t(e),s(()=>t(e).slug)))),p(i,n)};h(ue,i=>{t(e),s(()=>t(e).slug)&&i(ea)})}var be=o(ue,2);{var aa=i=>{var n=vr(),g=r(n,!0);a(n),ut(n,(_,u)=>ft?.(_,u),()=>t(e).alternativeTitles.join(", ")),y(_=>j(g,_),[()=>(t(e),s(()=>t(e).alternativeTitles.join(", ")))]),p(i,n)};h(be,i=>{t(e),s(()=>(t(e).alternativeTitles??[]).length>0)&&i(aa)})}var fe=o(be,2);{var ra=i=>{var n=pr();xt(n,5,()=>(t(e),s(()=>t(e).badges)),wt,(g,_)=>{var u=cr(),G=r(u,!0);a(u),ut(u,(C,P)=>ft?.(C,P),()=>t(_)),y(()=>j(G,t(_))),p(g,u)}),a(n),p(i,n)};h(fe,i=>{t(e),s(()=>(t(e).badges??[]).length>0)&&i(ra)})}var Xt=o(fe,2),me=r(Xt);{var sa=i=>{var n=ur(),g=r(n,!0);a(n),y(()=>j(g,(t(e),s(()=>t(e).category)))),S("click",n,()=>L("category")),p(i,n)};h(me,i=>{t(e),s(()=>t(e).category)&&i(sa)})}var _e=o(me,2);{var na=i=>{var n=br(),g=r(n,!0);a(n),y(()=>j(g,(t(e),s(()=>t(e).dataType)))),p(i,n)};h(_e,i=>{t(e),s(()=>t(e).dataType)&&i(na)})}var ia=o(_e,2);{var oa=i=>{var n=fr(),g=o(r(n));a(n),y(()=>j(g,` ${ht(Ce),t(B),s(()=>Ce[t(B)])??""}`)),p(i,n)};h(ia,i=>{t(e),s(()=>t(e).rating)&&i(oa)})}a(Xt);var la=o(Xt,2);{var da=i=>{var n=_r(),g=r(n);xt(g,4,()=>s(()=>Array.from({length:5},(_,u)=>u+1)),wt,(_,u)=>{var G=mr(),C=re(G);Se(C);var P=o(C,2);Se(P),y(()=>{$e(C,u*2-1),Le(C,t(B)===u*2-1),pt(C,"aria-label",`${u-.5} star`),$e(P,u*2),Le(P,t(B)===u*2),pt(P,"aria-label",`${u} star`)}),S("change",C,()=>jt(u*2-1)),S("change",P,()=>jt(u*2)),p(_,G)}),a(g),a(n),p(i,n)};h(la,i=>{t(e),s(()=>t(e).rating)&&i(da)})}a(pe),a(rt);var ge=o(rt,2),he=r(ge);{var va=i=>{var n=gr(),g=r(n,!0);a(n),ut(n,(_,u)=>ft?.(_,u),()=>t(e).alternativeTitles.join(", ")),y(_=>j(g,_),[()=>(t(e),s(()=>t(e).alternativeTitles.join(", ")))]),p(i,n)};h(he,i=>{t(e),s(()=>(t(e).alternativeTitles??[]).length>0)&&i(va)})}var ca=o(he,2);{var pa=i=>{var n=xr();xt(n,5,()=>(t(e),s(()=>t(e).tags)),wt,(g,_)=>{var u=hr(),G=r(u,!0);a(u),ut(u,(C,P)=>ft?.(C,P),()=>t(_)),y(()=>j(G,t(_))),p(g,u)}),a(n),p(i,n)};h(ca,i=>{t(e),s(()=>(t(e).tags??[]).length>0)&&i(pa)})}a(ge),a(at),a(D);var xe=o(D,2);{var ua=i=>{var n=Ar(),g=r(n),_=r(g),u=o(r(_)),G=r(u);bt(G,()=>(ht(Q),s(()=>Q.edit))),a(u);var C=o(u,2),P=r(C);bt(P,()=>(ht(Q),s(()=>Q.add))),a(C),a(_);var st=o(_,2);xt(st,5,()=>t(k),wt,(O,l)=>{var z=Er(),nt=r(z);{var Y=H=>{var q=wr();ut(q,(gt,Et)=>ft?.(gt,Et),()=>t(l).name),y(()=>{pt(q,"src",(t(l),s(()=>t(l).image))),pt(q,"alt",(t(l),s(()=>t(l).name)))}),Fa(q),p(H,q)},M=H=>{var q=yr();p(H,q)};h(nt,H=>{t(l),s(()=>t(l).image)?H(Y):H(M,!1)})}var ot=o(nt,2),dt=r(ot);{var vt=H=>{var q=kr();p(H,q)},_t=Ia(()=>(t(l),s(()=>E.includes(t(l).role.toLowerCase()))));h(dt,H=>{t(_t)&&H(vt)})}var it=o(dt,2),Lt=r(it,!0);a(it),a(ot),a(z),y(()=>j(Lt,(t(l),s(()=>t(l).name)))),S("click",z,()=>et(t(l).name)),p(O,z)}),a(st);var $t=o(st,2);xt($t,1,()=>t(k),wt,(O,l)=>{var z=ha(),nt=re(z);{var Y=M=>{var ot=jr(),dt=r(ot),vt=r(dt),_t=r(vt),it=r(_t),Lt=r(it);bt(Lt,()=>(ht(Q),s(()=>Q.edit))),a(it);var H=o(it,2),q=r(H);bt(q,()=>(ht(Q),s(()=>Q.delete))),a(H),a(_t);var gt=o(_t,2),Et=r(gt),Nt=o(r(Et),2),Jt=r(Nt,!0);a(Nt),a(Et);var Bt=o(Et,2);{var Yt=T=>{var F=Cr(),W=o(r(F),2),ct=r(W,!0);a(W),a(F),y(()=>j(ct,(t(l),s(()=>t(l).role)))),p(T,F)};h(Bt,T=>{t(l),s(()=>t(l).role)&&T(Yt)})}var Dt=o(Bt,2);{var Zt=T=>{var F=Sr(),W=o(r(F),2),ct=r(W,!0);a(W),a(F),y(()=>j(ct,(t(l),s(()=>t(l).description)))),p(T,F)};h(Dt,T=>{t(l),s(()=>t(l).description)&&T(Zt)})}var Ut=o(Dt,2);{var Z=T=>{var F=$r(),W=o(r(F),2),ct=r(W,!0);a(W),a(F),y(te=>j(ct,te),[()=>(t(l),s(()=>t(l).alternativeNames.join(", ")))]),p(T,F)};h(Ut,T=>{t(l),s(()=>(t(l).alternativeNames??[]).length>0)&&T(Z)})}var tt=o(Ut,2);{var Ct=T=>{var F=Tr(),W=o(r(F));xt(W,5,()=>(t(l),s(()=>t(l).tags)),wt,(ct,te)=>{var ee=Lr(),ga=r(ee,!0);a(ee),y(()=>j(ga,t(te))),p(ct,ee)}),a(W),a(F),p(T,F)};h(tt,T=>{t(l),s(()=>(t(l).tags??[]).length>0)&&T(Ct)})}a(gt),ut(gt,(T,F)=>ft?.(T,F),()=>t(l).name),a(vt),a(dt),a(ot),y(()=>j(Jt,(t(l),s(()=>t(l).name)))),S("click",it,()=>Fe(t(l))),S("click",H,()=>Pe(t(l))),Ya(3,ot,()=>ar,()=>({duration:200})),p(M,ot)};h(nt,M=>{t(X),t(l),s(()=>t(X)===t(l).name&&(t(l).name||t(l).role||(t(l).alternativeNames??[]).length>0||(t(l).tags??[]).length>0))&&M(Y)})}p(O,z)}),a(g),a(n),S("click",u,()=>L("characters")),S("click",C,ze),p(i,n)};h(xe,i=>{t(e),s(()=>(t(e).characters??[]).length>0)&&i(ua)})}var we=o(xe,2);{var ba=i=>{var n=Nr(),g=r(n),_=r(g),u=o(r(_));a(_);var G=o(_,2),C=r(G);bt(C,()=>t(A)),a(G),a(g),ut(g,(P,st)=>ft?.(P,st),()=>t(e).description),a(n),S("click",u,()=>L("description")),p(i,n)};h(we,i=>{t(e),s(()=>t(e).description)&&i(ba)})}var ye=o(we,2);{var fa=i=>{var n=Fr(),g=r(n),_=r(g),u=o(r(_)),G=r(u);bt(G,()=>(ht(Q),s(()=>Q.edit))),a(u);var C=o(u,2),P=r(C);bt(P,()=>(ht(Q),s(()=>Q.add))),a(C);var st=o(C,2);let $t;var O=r(st);bt(O,()=>(ht(Q),s(()=>Q.delete))),a(st),a(_);var l=o(_,2),z=r(l),nt=o(r(z),2);xt(nt,1,()=>t(N),wt,(Y,M)=>{var ot=zr(),dt=r(ot),vt=r(dt);let _t;var it=r(vt);let Lt;var H=r(it,!0);a(it);var q=o(it,2);let gt;var Et=r(q,!0);a(q);var Nt=o(q,2);{var Jt=Z=>{var tt=Mr();let Ct;xt(tt,5,()=>(t(M),s(()=>t(M).tags)),wt,(T,F)=>{var W=Dr(),ct=r(W,!0);a(W),y(()=>j(ct,t(F))),p(T,W)}),a(tt),y(()=>Ct=It(tt,1,"flex flex-wrap justify-start content-start gap-1",null,Ct,{"opacity-70":t(J)})),p(Z,tt)};h(Nt,Z=>{t(M),s(()=>(t(M).tags??[]).length>0)&&Z(Jt)})}var Bt=o(Nt,2);{var Yt=Z=>{var tt=Ir();S("click",tt,Ee(()=>Be(t(M).chapterSE))),p(Z,tt)};h(Bt,Z=>{t(J)&&Z(Yt)})}a(vt),a(dt);var Dt=o(dt,2),Zt=r(Dt);{var Ut=Z=>{var tt=Rr(),Ct=o(r(tt),2),T=r(Ct);bt(T,()=>(t(M),s(()=>De(t(M).description)))),a(Ct),a(tt),p(Z,tt)};h(Zt,Z=>{t(M),s(()=>t(M).description)&&Z(Ut)})}a(Dt),a(ot),y(()=>{_t=It(vt,1,"grid grid-cols-[15vw_2fr_3fr] md:grid-cols-[7vw_1fr_2fr] gap-2 md:gap-4 p-2 md:p-4 bg-base-100 divide-x-[2px] divide-base-content/10 border border-base-content/10 rounded-t-lg rounded-b-md cursor-pointer hover:bg-base-200 z-1",null,_t,{"bg-base-300":t(J)}),Lt=It(it,1,"font-semibold break-words",null,Lt,{"opacity-70":t(J)}),j(H,(t(M),s(()=>t(M).chapterSE))),gt=It(q,1,"break-all",null,gt,{"opacity-70":t(J)}),j(Et,(t(M),s(()=>t(M).characters)))}),S("click",vt,()=>!t(J)&&Re(t(M))),p(Y,ot)}),a(z),a(l),a(g),Ba(g,Y=>f(Pt,Y),()=>t(Pt)),a(n),y(()=>$t=It(st,1,"btn btn-ghost btn-sm rounded-full",null,$t,{"text-base-300":t(J),"bg-error":t(J)})),S("click",u,()=>L("chapters")),S("click",C,Ie),S("click",st,Oe),p(i,n)};h(ye,i=>{t(e),s(()=>(t(e).rows??[]).length>0)&&i(fa)})}var ma=o(ye,2);{var _a=i=>{var n=Ur(),g=o(r(n),2),_=r(g),u=r(_);{var G=O=>{var l=Pr(),z=o(r(l),2),nt=r(z,!0);a(z),a(l),y(Y=>j(nt,Y),[()=>(t(e),s(()=>qt(t(e).createdAt)))]),p(O,l)};h(u,O=>{t(e),s(()=>t(e).createdAt)&&O(G)})}var C=o(u,2);{var P=O=>{var l=Or(),z=o(r(l),2),nt=r(z,!0);a(z),a(l),y(Y=>j(nt,Y),[()=>(t(e),s(()=>qt(t(e).openedAt)))]),p(O,l)};h(C,O=>{t(e),s(()=>t(e).openedAt)&&O(P)})}var st=o(C,2);{var $t=O=>{var l=Br(),z=o(r(l),2),nt=r(z,!0);a(z),a(l),y(Y=>j(nt,Y),[()=>(t(e),s(()=>qt(t(e).editedAt)))]),p(O,l)};h(st,O=>{t(e),s(()=>t(e).editedAt)&&O($t)})}a(_),a(g),a(n),p(i,n)};h(ma,i=>{t(e),s(()=>t(e).createdAt||t(e).openedAt||t(e).editedAt)&&i(_a)})}a(x),y(()=>j(ta,(t(e),s(()=>t(e).title)))),p(v,x)},Qe=v=>{var x=qr();p(v,x)};h(We,v=>{t(e)?v(Ve):v(Qe,!1)})}a(Vt);var Ke=o(Vt,2);{var Xe=v=>{Ha(v,{get entryId(){return t(w)},get editSection(){return t(U)},get selectedChapter(){return t(Gt)},get selectedCharacter(){return t(Wt)},$$events:{save:zt,cancel:At}})};h(Ke,v=>{t(m)&&v(Xe)})}y(()=>pt(He,"href",`${Wa??""}/`)),S("click",ve,()=>L("All")),S("click",qe,Ft),p(d,oe),Na(),R()}export{as as component,es as universal};

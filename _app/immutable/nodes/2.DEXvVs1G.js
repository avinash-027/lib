import{c as bt,a as C,f as N,t as kt}from"../chunks/DX4yK0P1.js";import{i as Ee}from"../chunks/DXBN8Mnz.js";import{e as Ht,u as z,h as zt,G as Te,J as Le,M as Me,D as ee,O as a,Q as l,B as e,P as t,K,a_ as ta,R as $t,T as Wt,V as s,W as S,aY as aa,aI as Pe,bd as Ct,be as tt,bf as la,$ as sa}from"../chunks/RLt0E5kG.js";import{s as pt,r as he,b as Vt,a as ra,h as na}from"../chunks/D79lr1mI.js";import{d as oa,w as At,c as lt,o as Dt}from"../chunks/by3gx3va.js";import{s as ce,e as i,r as ia}from"../chunks/C99UrfaG.js";import{p as pe,i as q,a as Ce,s as st}from"../chunks/DF3Y441m.js";import{t as ca,d as re,e as Se,a as Ae,h as me,S as W,c as ie,f as Gt,s as qe,b as Ye,g as da,i as Ne,j as Ut,R as Rt,k as Re,l as qt,E as va}from"../chunks/CmJLYYez.js";import{g as ua}from"../chunks/BSSFEdq3.js";import{b as jt}from"../chunks/XtgDbVYC.js";function ba(c,r,n){Ht(()=>{var v=z(()=>r(c,n?.())||{});if(v?.destroy)return()=>v.destroy()})}function Pt(c,r,n,v){var b=c.__style;if(zt||b!==r){var p=ca(r);(!zt||p!==c.getAttribute("style"))&&(p==null?c.removeAttribute("style"):c.style.cssText=p),c.__style=r}return v}function pa(){const{subscribe:c,set:r,update:n}=At([]);return{subscribe:c,set:r,update:n,load:async()=>{const v=await re.getAllEntries();return r(v),v},add:async v=>{const b=await re.addEntry(v);n(p=>[...p,{...v,id:b}])},updateEntry:async(v,b)=>{await re.updateEntry(v,b),n(p=>p.map(f=>f.id===v?{...f,...b}:f))},deleteEntry:async v=>{await re.deleteEntry(v),n(b=>b.filter(p=>p.id!==v))}}}const St=pa(),ze=At(""),Ue=At("default"),at=Et("libsettings:selectedCategory","All"),dt=Et("libsettings:sortField","createdAt"),vt=Et("libsettings:sortOrder","desc"),Ft=Et("lib:gridCols",4),fa=oa([St,at,ze,Ue,dt,vt],([c,r,n,v,b,p])=>{let f=[...c];if(r!=="All"&&(f=f.filter(u=>u.category===r)),n){const u=n.toLowerCase();f=f.filter(d=>{switch(v){case"a":return d.alternativeTitles.join(" ").toLowerCase().includes(u);case"t":return d.tags.join(" ").toLowerCase().includes(u);case"b":return d.badges.join(" ").toLowerCase().includes(u);case"c":return d.characters.map($=>$.Name).join(" ").toLowerCase().includes(u);default:return d.title.toLowerCase().includes(u)||d.alternativeTitles.join(" ").toLowerCase().includes(u)}})}return f=f.sort((u,d)=>{const $=u[b]??"",E=d[b]??"";return p==="asc"?$>E?1:-1:$<E?1:-1}),f});function Et(c,r){const n=localStorage.getItem(c),{subscribe:v,set:b,update:p}=At(n?JSON.parse(n):r);return{subscribe:v,set:f=>{localStorage.setItem(c,JSON.stringify(f)),b(f)},update:f=>{p(u=>{const d=f(u);return localStorage.setItem(c,JSON.stringify(d)),d})}}}const ga="autoBackupEnabled",ha="autoBackupDirHandle";let ut=null;async function ma(){const c=await window.showDirectoryPicker();await c.requestPermission({mode:"readwrite"}),localStorage.setItem("autoBackupEnabled","true"),localStorage.setItem("autoBackupFolderName",c.name),localStorage.setItem("autoBackupDirHandle",JSON.stringify(c)),Nt(c),await Yt(c)}function wa(){localStorage.removeItem("autoBackupEnabled"),localStorage.removeItem("autoBackupDirHandle"),localStorage.removeItem("autoBackupFolderName"),ut&&clearTimeout(ut)}function xa(){if(localStorage.getItem(ga)!=="true")return;const c=localStorage.getItem(ha);if(!c)return;const r=JSON.parse(c);Nt(r)}async function Yt(c){const r=await re.exportToJSON(),v=await(await c.getFileHandle("lib-autobackup.json",{create:!0})).createWritable();await v.write(JSON.stringify(r,null,2)),await v.close(),console.log("‚úÖ Auto backup saved at",new Date().toLocaleString())}function Nt(c){ut&&clearTimeout(ut);const r=new Date,n=new Date;n.setHours(24,0,0,0);const v=n.getTime()-r.getTime();ut=window.setTimeout(async()=>{await Yt(c),Nt(c)},v)}function _a(c){const r=new IntersectionObserver(([n],v)=>{if(n.isIntersecting){const b=c.dataset.src;b&&(c.src=b),c.classList.add("lozad-loaded"),v.unobserve(c)}});return r.observe(c),{destroy(){r.unobserve(c)}}}var ya=N('<div class="px-1 w-full opacity-80 text-sm h-65 md:h-55 flex items-end justify-center text-base-content/50"><div>No entries found. <ul class="list-disc list-inside mt-1"><li>Add new entries by clicking the <b>"+"</b> button.</li> <li>To Manage categories, click the "Categories" button in the <b>Drawer Menu</b>.</li></ul></div></div>'),ka=N('<button type="button"><!></button>'),Ca=N('<img class="w-full h-full object-cover lozad"/>'),Sa=N('<div class="w-full h-full flex items-center justify-center text-base-content/20"><!></div>'),Aa=N('<span class="absolute top-1.5 left-1 rounded-2xl text-xs md:text-sm bg-info text-base-300 px-1 py-0 font-semibold"> </span>'),Ea=N('<div class="relative"><!> <button class="card bg-base-100 shadow-xl cursor-pointer hover:shadow-2xl transition-shadow w-full h-full"><figure class="aspect-[3/4] bg-base-300"><!></figure> <div class="card-body p-2"><!> <h3 class="card-title text-xs sm:text-sm line-clamp-2"> </h3></div></button></div>'),Ta=N("<div></div>");function Ma(c,r){Te(r,!1);let n=pe(r,"entries",24,()=>[]),v=pe(r,"selectionMode",8,!1),b=pe(r,"selectedEntries",24,()=>new Set),p=pe(r,"gridCols",8,4);const f=lt();function u(x){!v()&&x!==void 0&&ua(`/detail/${x}`)}function d(x){f("toggleSelect",x)}const $={2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5"};Ee();var E=bt(),j=Le(E);{var T=x=>{var M=ya();C(x,M)},O=x=>{var M=Ta();Se(M,5,n,_=>_.id,(_,m)=>{var y=Ea(),B=a(y);{var k=R=>{var A=ka();let h;var X=a(A);{var de=Z=>{var ve=bt(),fe=Le(ve);me(fe,()=>(ee(W),z(()=>W.selectTick))),C(Z,ve)},Q=ta(()=>(ee(b()),e(m),z(()=>b().has(e(m).id))));q(X,Z=>{e(Q)&&Z(de)})}t(A),K(Z=>h=Ae(A,1,"rounded-xl absolute inset-0 z-10 flex items-center justify-center bg-black/20 cursor-pointer transition-opacity",null,h,Z),[()=>({selected:b().has(e(m).id)})]),i("click",A,Z=>{Z.stopPropagation(),d(e(m).id)}),C(R,A)};q(B,R=>{v()&&R(k)})}var D=l(B,2),J=a(D),V=a(J);{var L=R=>{var A=Ca();ba(A,h=>_a?.(h)),K(()=>{pt(A,"src",(e(m),z(()=>e(m).coverImageUrl))),pt(A,"alt",(e(m),z(()=>e(m).title)))}),ia(A),C(R,A)},P=R=>{var A=Sa(),h=a(A);me(h,()=>(ee(W),z(()=>W.imgIcon))),t(A),C(R,A)};q(V,R=>{e(m),z(()=>e(m).coverImageUrl)?R(L):R(P,!1)})}t(J);var I=l(J,2),F=a(I);{var ae=R=>{var A=Aa(),h=a(A,!0);t(A),K(()=>ce(h,(e(m),z(()=>e(m).rating)))),C(R,A)};q(F,R=>{e(m),z(()=>e(m).rating!==null&&e(m).rating>0)&&R(ae)})}var te=l(F,2),Y=a(te,!0);t(te),t(I),t(D),t(y),K(()=>ce(Y,(e(m),z(()=>e(m).title)))),i("click",D,()=>u(e(m).id)),C(_,y)}),t(M),K(()=>Ae(M,1,(ee(p()),z(()=>`grid gap-2 ${$[p()]} md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10`)))),C(x,M)};q(j,x=>{ee(n()),z(()=>n().length===0)?x(T):x(O,!1)})}C(c,E),Me()}var Ia=N('<div class="text-xs text-info mt-2">Searching in: <!> <!> <!> <!></div>'),$a=N(`<div class="bg-base-200 px-4 pt-3 pb-1 shadow-lg"><div class="flex gap-2 items-center"><input type="text" placeholder="Search ('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters)" class="input input-bordered flex-1"/> <button class="btn btn-square btn-ghost" aria-label="Close search"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!></div>`);function ja(c,r){Te(r,!1);const n=()=>Ce(Ue,"$searchMode",v),[v,b]=st();let p=pe(r,"show",12,!1),f=S(""),u=S();async function d(){await aa(),e(u)?.focus()}function $(){s(f,""),ze.set(""),Ue.set("default"),p(!1)}$t(()=>ee(p()),()=>{p()&&d()}),$t(()=>(e(f),ze),()=>{const _=e(f).trim(),m=_.toLowerCase();m.startsWith("a:")?(Ue.set("a"),ze.set(_.slice(2))):m.startsWith("t:")?(Ue.set("t"),ze.set(_.slice(2))):m.startsWith("b:")?(Ue.set("b"),ze.set(_.slice(2))):m.startsWith("c:")?(Ue.set("c"),ze.set(_.slice(2))):(Ue.set("default"),ze.set(_))}),Wt(),Ee();var E=$a(),j=a(E),T=a(j);he(T),jt(T,_=>s(u,_),()=>e(u));var O=l(T,2);t(j);var x=l(j,2);{var M=_=>{var m=Ia(),y=l(a(m));{var B=I=>{var F=kt("alternative titles");C(I,F)};q(y,I=>{n()==="a"&&I(B)})}var k=l(y,2);{var D=I=>{var F=kt("tags");C(I,F)};q(k,I=>{n()==="t"&&I(D)})}var J=l(k,2);{var V=I=>{var F=kt("badges");C(I,F)};q(J,I=>{n()==="b"&&I(V)})}var L=l(J,2);{var P=I=>{var F=kt("characters");C(I,F)};q(L,I=>{n()==="c"&&I(P)})}t(m),C(_,m)};q(x,_=>{n()!=="default"&&_(M)})}t(E),ie(T,()=>e(f),_=>s(f,_)),i("click",O,$),C(c,E),Me(),b()}var Da=N('<div class="fixed inset-0 bg-black/50 z-150 flex items-end" role="presentation"><div class="bg-base-100 w-full rounded-t-2xl p-6 max-h-[80vh] overflow-auto" role="dialog" tabindex="-1"><h3 class="text-2xl font-bold mb-6">Sort & Filter</h3> <div class="form-control mb-4"><label class="label" for="sort-field"><span class="label-text font-semibold">Sort By</span></label> <select id="sort-field" class="select select-bordered w-full"><option>Title (A-Z)</option><option>Rating</option><option>Last Edited</option><option>Date Created</option><option>Last Opened</option></select></div> <div class="form-control mb-6"><label class="label" for="sort-order"><span class="label-text font-semibold">Order</span></label> <div class="flex gap-2"><button>Ascending</button> <button>Descending</button></div></div> <div class="flex gap-2"><button class="btn btn-outline flex-1">Reset</button> <button class="btn btn-primary flex-1">Apply</button></div></div></div>');function Na(c,r){Te(r,!1);const n=()=>Ce(dt,"$sortField",b),v=()=>Ce(vt,"$sortOrder",b),[b,p]=st();let f=pe(r,"show",12,!1),u=S(n()),d=S(v());dt.subscribe(x=>s(u,x)),vt.subscribe(x=>s(d,x));function $(){dt.set(e(u)),vt.set(e(d)),f(!1)}function E(){s(u,"title"),s(d,"asc"),dt.set(e(u)),vt.set(e(d)),f(!1)}Ee();var j=bt(),T=Le(j);{var O=x=>{var M=Da(),_=a(M),m=l(a(_),2),y=l(a(m),2),B=a(y);B.value=B.__value="title";var k=l(B);k.value=k.__value="rating";var D=l(k);D.value=D.__value="editedAt";var J=l(D);J.value=J.__value="createdAt";var V=l(J);V.value=V.__value="openedAt",t(y),t(m);var L=l(m,2),P=l(a(L),2),I=a(P);let F;var ae=l(I,2);let te;t(P),t(L);var Y=l(L,2),R=a(Y),A=l(R,2);t(Y),t(_),t(M),K(()=>{F=Ae(I,1,"btn flex-1",null,F,{"btn-primary":e(d)==="asc"}),pt(I,"aria-pressed",e(d)==="asc"),te=Ae(ae,1,"btn flex-1",null,te,{"btn-primary":e(d)==="desc"}),pt(ae,"aria-pressed",e(d)==="desc")}),Gt(y,()=>e(u),h=>s(u,h)),i("click",I,()=>s(d,"asc")),i("click",ae,()=>s(d,"desc")),i("click",R,E),i("click",A,$),i("click",_,qe(function(h){Ye.call(this,r,h)})),i("keydown",_,function(h){Ye.call(this,r,h)}),i("click",M,()=>f(!1)),i("keydown",M,function(h){Ye.call(this,r,h)}),C(x,M)};q(T,x=>{f()&&x(O)})}C(c,j),Me(),p()}const La=`\`\`\`json\r
// Example\r
[\r
  {\r
    "id": 2,\r
    "title": "Solo Leveling",\r
    "alternativeTitles": [ "Only I Level Up", "Na Honja Level Up" ],\r
    "coverImageUrl": "https://example.com/covers/solo-leveling.jpg",\r
    "description": "In a world where gates connect Earth to deadly dungeons, the weakest hunter awakens a mysterious system that allows him to level up alone.",\r
    "badges": ["Manhwa", "Action", "Fantasy", "Completed"],\r
    "tags": [ "gates", "hunters", "dungeons", "system", "shadows", "awakening"],\r
    "rating": null,\r
    "createdAt": "2024-12-15T08:20:00.000Z",\r
    "openedAt": "2025-02-07T14:10:30.000Z",\r
    "editedAt": "2025-02-07T18:45:10.000Z",\r
    "characters": [\r
      {\r
        "Name": "Sung Jin-Woo",\r
        "Image": "https://example.com/characters/sung-jin-woo.png"\r
      },\r
      {\r
        "Name": "Cha Hae-In",\r
        "Image": "https://example.com/characters/cha-hae-in.png"\r
      },\r
      {\r
        "Name": "Go Gun-Hee",\r
        "Image": "https://example.com/characters/go-gun-hee.png"\r
      }\r
    ],\r
    "rows": [\r
      {\r
        "ChapterSE": "Episode 1 ‚Äì The Weakest Hunter",\r
        "Description": "E-rank hunter Sung Jin-Woo barely survives a low-level dungeon while struggling to pay his family‚Äôs medical bills.",\r
        "Tags": ["introduction", "low-rank", "desperation"],\r
        "Characters": "Sung Jin-Woo"\r
      },\r
      {\r
        "ChapterSE": "Episode 2 ‚Äì Double Dungeon",\r
        "Description": "A hidden dungeon reveals a deadly trial where survival depends on following cryptic rules.",\r
        "Tags": ["double-dungeon", "statues", "death"],\r
        "Characters": "Sung Jin-Woo, Dungeon Party"\r
      },\r
      {\r
        "ChapterSE": "Episode 3 ‚Äì The System",\r
        "Description": "After facing death, Jin-Woo awakens to a mysterious system that only he can see.",\r
        "Tags": ["awakening", "system", "rebirth"],\r
        "Characters": "Sung Jin-Woo"\r
      }\r
    ],\r
    "category": "Manhwa",\r
    "dataType": "json"\r
  },\r
  // ...\r
]\r
\`\`\``;var Ba=N('<div role="alert" class="fixed bottom-2 left-2 z-300 alert alert-info alert-outline bg-base-100"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 shrink-0 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>');function Lt(c,r){let n=pe(r,"showAlert",8,!1),v=pe(r,"message",8,"");var b=bt(),p=Le(b);{var f=u=>{var d=Ba(),$=l(a(d),2),E=a($,!0);t($),t(d),K(()=>ce(E,v())),C(u,d)};q(p,u=>{n()&&u(f)})}C(c,b)}var Oa=N('<div class="text-xs text-gray-500 mt-1 pl-1"> <br/>‚è∞ Every night at 12:00 AM</div>'),Ja=N('<button class="btn btn-md btn-ghost rounded-full flex justify-between py-3 px-0"><span>üïõ Auto Backup</span> <input type="checkbox" class="toggle toggle-primary"/></button> <!> <!>',1);function za(c,r){Te(r,!1);let n=S(localStorage.getItem("autoBackupEnabled")==="true"),v=S(localStorage.getItem("autoBackupFolderName")),b=S(!1),p=S("");async function f(){try{e(n)?(wa(),s(n,!1),s(v,null),s(p,"Auto backup disabled")):(await ma(),s(n,!0),s(v,localStorage.getItem("autoBackupFolderName")),s(p,"Auto backup enabled (every night 12:00)"))}catch{s(n,!1),s(p,"Backup permission denied")}s(b,!0),setTimeout(()=>s(b,!1),1500)}Ee();var u=Ja(),d=Le(u),$=l(a(d),2);he($),t(d);var E=l(d,2);{var j=O=>{var x=Oa(),M=a(x);Pe(2),t(x),K(()=>ce(M,`üìÅ ${e(v)??""}/lib-autobackup.json`)),C(O,x)};q(E,O=>{e(n)&&e(v)&&O(j)})}var T=l(E,2);Lt(T,{get showAlert(){return e(b)},get message(){return e(p)}}),K(()=>Vt($,e(n))),i("click",d,f),C(c,u),Me()}var Ua=N('<div class="fixed inset-0 bg-black/50 z-150 flex" role="presentation"><div class="bg-base-100 w-80 h-full shadow-xl p-6 flex flex-col justify-between" role="dialog" tabindex="-1"><div><h2 class="text-2xl font-bold mb-6">Menu <button class="float-right cursor-pointer" aria-label="Close menu" type="button"><!></button></h2> <ul class="menu bg-base-200 rounded-box gap-1 md:gap-3"><li><button aria-label="Import JSON" class="btn btn-md btn-ghost"><!> Import JSON</button></li> <li><button aria-label="Export data" class="btn btn-md btn-ghost"><!> Export JSON</button></li> <li><button class="btn btn-md btn-ghost" aria-label="Export Markdown"><!> Export Md</button></li> <li><button aria-label="Open categories" class="btn btn-md btn-ghost"><!> Categories</button></li> <li><button class="btn btn-md btn-ghost">JSON Format</button></li></ul></div> <dialog class="modal"><div class="modal-box max-w-3xl w-85 md:w-full h-auto max-h-[65vh]"><form method="dialog"><button type="button" aria-label="CloseJSONmodal" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2 text-lg p-5"><!></button></form> <h3 class="font-bold mb-2">Import JSON Structure</h3> <div class="prose max-w-full overflow-auto text-sm"><!></div></div></dialog> <div class="text-sm text-gray-500"><!> <div class="divider"></div> <p class="font-semibold my-4">ü§ñ AI √ó <a href="https://github.com/avinash-027/" target="_blank" class="link link-primary no-underline">User-A027</a> üë®‚Äçüíª</p></div></div></div>'),Ra=N('<!> <!> <input type="file" accept=".json" class="hidden"/>',1);function qa(c,r){Te(r,!1);let n=pe(r,"show",12,!1),v=S(""),b=S(!1);const p=lt();let f=S();function u(){e(f).click()}function d(B){const D=B.target.files?.[0];if(!D)return;const J=new FileReader;J.onload=V=>{try{const L=JSON.parse(V.target?.result),P=Array.isArray(L)?L:[L];p("import",P)}catch{s(v,"Invalid JSON file"),s(b,!0),setTimeout(()=>{s(b,!1)},2e3)}},J.readAsText(D)}function $(){p("export")}let E=da.parse(La),j=S();function T(){e(j).showModal()}function O(){e(j).close()}Ee();var x=Ra(),M=Le(x);Lt(M,{get showAlert(){return e(b)},get message(){return e(v)}});var _=l(M,2);{var m=B=>{var k=Ua(),D=a(k),J=a(D),V=a(J),L=l(a(V)),P=a(L);me(P,()=>(ee(W),z(()=>W.circleClose))),t(L),t(V);var I=l(V,2),F=a(I),ae=a(F),te=a(ae);me(te,()=>(ee(W),z(()=>W.import))),Pe(),t(ae),t(F);var Y=l(F,2),R=a(Y),A=a(R);me(A,()=>(ee(W),z(()=>W.export))),Pe(),t(R),t(Y);var h=l(Y,2),X=a(h),de=a(X);me(de,()=>(ee(W),z(()=>W.export))),Pe(),t(X),t(h);var Q=l(h,2),Z=a(Q),ve=a(Z);me(ve,()=>(ee(W),z(()=>W.category))),Pe(),t(Z),t(Q);var fe=l(Q,2),le=a(fe);t(fe),t(I),t(J);var H=l(J,2),se=a(H),_e=a(se),ye=a(_e),ne=a(ye);me(ne,()=>(ee(W),z(()=>W.circleClose))),t(ye),t(_e);var ue=l(_e,4),Ie=a(ue);me(Ie,()=>E),t(ue),t(se),t(H),jt(H,oe=>s(j,oe),()=>e(j));var ke=l(H,2),Be=a(ke);za(Be,{}),Pe(4),t(ke),t(D),t(k),i("click",L,()=>n(!1)),i("click",ae,u),i("click",R,$),i("click",X,()=>p("exportMd")),i("click",Z,()=>p("showCategories")),i("click",le,T),i("click",ye,O),i("click",H,oe=>{oe.target===e(j)&&O()}),i("click",D,qe(function(oe){Ye.call(this,r,oe)})),i("keydown",D,qe(function(oe){Ye.call(this,r,oe)})),i("click",k,()=>n(!1)),i("keydown",k,oe=>oe.key==="Escape"&&n(!1)),C(B,k)};q(_,B=>{n()&&B(m)})}var y=l(_,2);jt(y,B=>s(f,B),()=>e(f)),i("change",y,d),C(c,x),Me()}var Fa=N('<option class="border border-base-200"> </option>'),Ha=N("<span>|</span>"),Wa=N("<span> </span>"),Va=N('<div class="flex gap-2"><label class="floating-label w-full"><span>Name *</span> <input type="text" placeholder="Name *" class="input input-bordered flex-1"/></label> <label class="floating-label w-full"><span>Img URL</span> <input type="text" placeholder="Image URL" class="input input-bordered flex-1"/></label> <button class="btn btn-square btn-error btn-outline"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Ga=N('<div class="card bg-base-200 p-4"><div class="flex gap-2 mb-2"><label class="floating-label w-full"><span>Chapter *</span> <input type="text" placeholder="Chapter (e.g., 1-5)" class="input input-bordered w-full input-sm flex-1"/></label> <button class="btn btn-square btn-error btn-outline btn-sm"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-4 h-4 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <label class="floating-label w-full"><span>Description</span> <textarea placeholder="Description" class="textarea textarea-bordered w-full textarea-sm mb-2"></textarea></label> <label class="floating-label w-full"><span>Tags (comma separated)</span> <input type="text" placeholder="Tags (comma separated)" class="input input-bordered w-full input-sm mb-2"/></label> <label class="floating-label w-full"><span>Characters</span> <input type="text" placeholder="Characters" class="input input-bordered w-full input-sm"/></label></div>'),Pa=N('<div class="fixed inset-0 bg-black/50 z-150 flex items-center justify-center p-4"><div class="bg-base-100 w-full max-w-4xl max-h-[90vh] overflow-auto rounded-lg shadow-xl"><div class="bg-base-100 border-b border-base-300 p-4 flex justify-between items-center"><h2 class="text-2xl font-bold"> </h2> <button class="btn btn-square btn-ghost btn-sm"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-4"><div class="form-control"><label for="newtitle" class="floating-label"><span>Title <span class="label-text-alt text-info italic">: required</span></span> <input id="newtitle" type="text" placeholder="Title" class="input input-bordered w-full" required=""/></label></div> <div class="form-control"><label for="newAltTitles" class="floating-label"><span><span class="label-text">Alternative Titles</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <input id="newAltTitles" type="text" placeholder="Alternative Titles [Ex: Title1, Title2]" class="input input-bordered w-full"/></label></div> <div class="form-control"><label for="newCoverImg" class="floating-label"><span class="label-text">Cover Image URL</span> <input id="newCoverImg" type="text" placeholder="Cover Image URL: Web Img Link" class="input input-bordered w-full"/></label></div> <div class="form-control"><label class="floating-label"><span class="label-text">Description</span> <textarea placeholder="Description" class="textarea textarea-bordered w-full h-24"></textarea></label></div> <div class="form-control"><label for="newBadges" class="floating-label"><span><span class="label-text">Badges</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <textarea id="newBadges" placeholder="Badges [Ex: Completed, Ongoing, Author, Artist, Favorite]" class="textarea textarea-bordered w-full"></textarea></label></div> <div class="form-control"><label for="newTags" class="floating-label"><span><span class="label-text">Tags</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <textarea id="newTags" placeholder="Tags [Ex: Themes, Genres]" class="textarea textarea-bordered w-full"></textarea></label></div> <div class="form-control"><label class="floating-label"><span class="label-text font-semibold">Category</span></label> <select class="select select-bordered w-full"><option class="border border-base-content/20 hover:bg-base-200">All</option><!></select></div> <div class="form-control"><label class="flex flex-wrap gap-2 justify-between"><span><span class="label-text font-semibold">Rating <span class="text-info">(0‚Äì10)</span></span></span> <div class="text-xs md:text-sm text-info"><span class="font-semibold">Value:</span> </div></label> <div class="w-full max-w-xs"><input type="range" min="0" max="10" step="1" class="range range-xs range-info"/> <div class="flex justify-between px-2.5 mt-1 text-xs"></div> <div class="flex justify-between px-2.5 mt-1 text-xs"></div></div></div> <div class="divider">Characters</div> <div class="space-y-2"><!> <button class="btn btn-outline btn-sm">+ Add Character</button></div> <div class="divider">Chapters</div> <div class="space-y-2"><!> <button class="btn btn-outline btn-sm">+ Add Chapter</button></div></div> <div class="sticky bottom-0 bg-base-100 border-t border-base-300 p-4 flex gap-2 justify-end"><button class="btn btn-outline">Cancel</button> <button class="btn btn-primary">Save</button></div></div></div>');function Ya(c,r){Te(r,!1);const n=()=>Ce(Re,"$categories",v),[v,b]=st();let p=pe(r,"entryId",8,null);const f=lt();let u=S(""),d=S(""),$=S(""),E=S(""),j=S(""),T=S(0),O=S(""),x=S("All"),M=S([]),_=S([]);Dt(async()=>{if(p()!==null){const g=await re.getEntryById(p());g&&(s(u,g.title),s(d,g.alternativeTitles.join(", ")),s($,g.coverImageUrl||""),s(E,g.description),s(j,g.badges.join(", ")),s(T,Number(g.rating)),s(O,g.tags.join(", ")),s(x,g.category),s(M,[...g.characters]),s(_,g.rows.map(w=>({...structuredClone(w),_tagsText:w.Tags.join(", ")}))))}});function m(){s(M,[...e(M),{Name:"",Image:""}])}function y(g){s(M,e(M).filter((w,G)=>G!==g))}function B(){s(_,[...e(_),{ChapterSE:"",Description:"",Characters:"",_tagsText:""}])}function k(g){s(_,e(_).filter((w,G)=>G!==g))}async function D(){const g={title:e(u),alternativeTitles:e(d).split(",").map(w=>w.trim()).filter(Boolean),coverImageUrl:e($)||null,description:e(E),badges:e(j).split(",").map(w=>w.trim()).filter(Boolean),rating:Number(e(T)),createdAt:null,openedAt:null,editedAt:null,tags:e(O).split(",").map(w=>w.trim()).filter(Boolean),category:e(x)||"All",dataType:"json",characters:e(M).filter(w=>w.Name),rows:e(_).filter(w=>w.ChapterSE).map(w=>({ChapterSE:w.ChapterSE,Description:w.Description,Characters:w.Characters,Tags:w._tagsText.split(",").map(G=>G.trim()).filter(Boolean)}))};p()!==null?await re.updateEntry(p(),g):await re.addEntry(g),f("save")}function J(){f("cancel")}Ee();var V=Pa(),L=a(V),P=a(L),I=a(P),F=a(I,!0);t(I);var ae=l(I,2);t(P);var te=l(P,2),Y=a(te),R=a(Y),A=l(a(R),2);he(A),t(R),t(Y);var h=l(Y,2),X=a(h),de=l(a(X),2);he(de),t(X),t(h);var Q=l(h,2),Z=a(Q),ve=l(a(Z),2);he(ve),t(Z),t(Q);var fe=l(Q,2),le=a(fe),H=l(a(le),2);Ct(H),t(le),t(fe);var se=l(fe,2),_e=a(se),ye=l(a(_e),2);Ct(ye),t(_e),t(se);var ne=l(se,2),ue=a(ne),Ie=l(a(ue),2);Ct(Ie),t(ue),t(ne);var ke=l(ne,2),Be=l(a(ke),2),oe=a(Be);oe.value=oe.__value="All";var ft=l(oe);Se(ft,1,()=>(n(),z(()=>n().filter(g=>g!=="All"))),Ne,(g,w)=>{var G=Fa(),we=a(G,!0);t(G);var xe={};K(()=>{ce(we,e(w)),xe!==(xe=e(w))&&(G.value=(G.__value=e(w))??"")}),C(g,G)}),t(Be),t(ke);var rt=l(ke,2),Xe=a(rt),Fe=l(a(Xe),2),Tt=l(a(Fe));t(Fe),t(Xe);var Ze=l(Xe,2),He=a(Ze);he(He);var nt=l(He,2);Se(nt,4,()=>z(()=>Array.from({length:11},(g,w)=>w)),Ne,(g,w)=>{var G=Ha();K(()=>Ae(G,1,Ut(w===e(T)?"text-info font-bold":""))),C(g,G)}),t(nt);var Ke=l(nt,2);Se(Ke,4,()=>z(()=>Array.from({length:11},(g,w)=>w)),Ne,(g,w)=>{var G=Wa(),we=a(G,!0);t(G),K(()=>{Ae(G,1,Ut(w===e(T)?"text-info font-bold":"")),ce(we,w)}),C(g,G)}),t(Ke),t(Ze),t(rt);var We=l(rt,4),gt=a(We);Se(gt,1,()=>e(M),Ne,(g,w,G)=>{var we=Va(),xe=a(we),$e=l(a(xe),2);he($e),t(xe);var Je=l(xe,2),Ve=l(a(Je),2);he(Ve),t(Je);var Ge=l(Je,2);t(we),ie($e,()=>e(w).Name,je=>(e(w).Name=je,tt(()=>e(M)))),ie(Ve,()=>e(w).Image,je=>(e(w).Image=je,tt(()=>e(M)))),i("click",Ge,()=>y(G)),C(g,we)});var Qe=l(gt,2);t(We);var ht=l(We,4),mt=a(ht);Se(mt,1,()=>e(_),Ne,(g,w,G)=>{var we=Ga(),xe=a(we),$e=a(xe),Je=l(a($e),2);he(Je),t($e);var Ve=l($e,2);t(xe);var Ge=l(xe,2),je=l(a(Ge),2);Ct(je),t(Ge);var ot=l(Ge,2),it=l(a(ot),2);he(it),t(ot);var _t=l(ot,2),ct=l(a(_t),2);he(ct),t(_t),t(we),ie(Je,()=>e(w).ChapterSE,De=>(e(w).ChapterSE=De,tt(()=>e(_)))),i("click",Ve,()=>k(G)),ie(je,()=>e(w).Description,De=>(e(w).Description=De,tt(()=>e(_)))),ie(it,()=>e(w)._tagsText,De=>(e(w)._tagsText=De,tt(()=>e(_)))),ie(ct,()=>e(w).Characters,De=>(e(w).Characters=De,tt(()=>e(_)))),C(g,we)});var wt=l(mt,2);t(ht),t(te);var xt=l(te,2),et=a(xt),Oe=l(et,2);t(xt),t(L),t(V),K(()=>{ce(F,p()!==null?"Edit Entry":"New Entry"),ce(Tt,` ${e(T)??""} - ${ee(Rt),e(T),z(()=>Rt[e(T)])??""}`),Oe.disabled=!e(u)||!e(x)}),i("click",ae,J),ie(A,()=>e(u),g=>s(u,g)),ie(de,()=>e(d),g=>s(d,g)),ie(ve,()=>e($),g=>s($,g)),ie(H,()=>e(E),g=>s(E,g)),ie(ye,()=>e(j),g=>s(j,g)),ie(Ie,()=>e(O),g=>s(O,g)),Gt(Be,()=>e(x),g=>s(x,g)),ie(He,()=>e(T),g=>s(T,g)),i("click",Qe,m),i("click",wt,B),i("click",et,J),i("click",Oe,D),i("click",L,qe(function(g){Ye.call(this,r,g)})),i("click",V,J),C(c,V),Me(),b()}var Xa=N('<input class="input input-sm input-bordered flex-1 mr-2"/>'),Za=N('<span class="truncate cursor-pointer"> </span>'),Ka=N('<button class="btn btn-sm btn-success">Save</button>'),Qa=N('<button class="btn btn-xs btn-info">Edit</button> <button class="btn btn-xs btn-error">Delete</button>',1),el=N('<div class="flex gap-2"><!></div>'),tl=N('<li class="mb-2 flex items-center justify-between"><!> <!></li>'),al=N(`<div class="fixed inset-0 z-150 flex bg-black/50" role="button" tabindex="0" aria-label="Close categories modal"><div class="h-full w-96 bg-base-100 p-6 shadow-xl flex flex-col" role="document"><h2 class="mb-6 text-2xl font-bold">Categories</h2> <div class="flex-1 overflow-y-auto pr-1 border border-base-content/30 rounded-xl p-1 px-2"><ul class="mb-4"></ul></div> <div class="flex gap-2 mt-3"><input class="input-bordered input flex-1" placeholder="New category"/> <button aria-label="Add new category" class="btn btn-primary">Add</button></div> <button class="btn btn-soft mt-2 w-full">Close</button> <div class="mt-1 px-1 text-xs justify-center text-success"><span> </span></div> <div class="my-2 alert alert-default alert-soft "><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 shrink-0 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>When a category is <b>deleted</b>, all entries in that category are <b>moved to the 'All'</b> category</span></div></div></div>`);function ll(c,r){Te(r,!1);const n=()=>Ce(Re,"$categories",v),[v,b]=st();let p=pe(r,"show",8,!1);const f=lt();let u=S(""),d=S(null),$=S("");function E(k){s(d,k),s($,k)}async function j(k){const D=e($).trim();if(!D||D==="All"||D===k){s(d,null);return}await Re.rename(k,D),f("rename",{old:k,new:D}),s(d,null),M(`Category renamed to "${D}"`)}async function T(){const k=e(u).trim();!k||k==="All"||(await Re.add(k),s(u,""))}let O=S(""),x=S(!1);function M(k,D=2e3){s(O,k),s(x,!0),setTimeout(()=>{s(x,!1)},D)}async function _(k){k!=="All"&&(await re.moveCategoryToAll(k),await Re.remove(k),M(`Category "${k}" deleted. Entries moved to 'All'.`))}Dt(()=>{Re.load()}),Ee();var m=bt(),y=Le(m);{var B=k=>{var D=al(),J=a(D),V=l(a(J),2),L=a(V);Se(L,5,()=>(n(),z(()=>["All",...n().filter(A=>A!=="All")])),Ne,(A,h)=>{var X=tl(),de=a(X);{var Q=le=>{var H=Xa();he(H),la(H),ie(H,()=>e($),se=>s($,se)),i("keydown",H,se=>se.key==="Enter"&&j(e(h))),i("blur",H,()=>j(e(h))),C(le,H)},Z=le=>{var H=Za(),se=a(H,!0);t(H),K(()=>ce(se,e(h))),i("dblclick",H,()=>E(e(h))),C(le,H)};q(de,le=>{e(d)===e(h)?le(Q):le(Z,!1)})}var ve=l(de,2);{var fe=le=>{var H=el(),se=a(H);{var _e=ne=>{var ue=Ka();i("click",ue,qe(()=>j(e(h)))),C(ne,ue)},ye=ne=>{var ue=Qa(),Ie=Le(ue),ke=l(Ie,2);i("click",Ie,qe(()=>E(e(h)))),i("click",ke,qe(()=>_(e(h)))),C(ne,ue)};q(se,ne=>{e(d)===e(h)?ne(_e):ne(ye,!1)})}t(H),C(le,H)};q(ve,le=>{e(h)!=="All"&&le(fe)})}t(X),C(A,X)}),t(L),t(V);var P=l(V,2),I=a(P);he(I);var F=l(I,2);t(P);var ae=l(P,2),te=l(ae,2),Y=a(te),R=a(Y,!0);t(Y),t(te),Pe(2),t(J),t(D),K(()=>{Pt(te,`min-height: 1.55rem; max-height: 1.55rem; visibility: ${e(x)?"visible":"hidden"}`),ce(R,e(O))}),ie(I,()=>e(u),A=>s(u,A)),i("click",F,T),i("click",ae,()=>f("close")),i("click",J,qe(function(A){Ye.call(this,r,A)})),i("click",D,()=>f("close")),i("keydown",D,A=>{(A.key==="Enter"||A.key===" ")&&f("close")}),C(k,D)};q(y,k=>{p()&&k(B)})}C(c,m),Me(),b()}var sl=N('<li><input type="radio" name="theme-dropdown" class="theme-controller btn btn-sm btn-block btn-ghost justify-start"/></li>'),rl=N('<div><div tabindex="0" role="button" class="btn p-2 m-0 rounded-2xl">üé® <svg width="12px" height="12px" class="inline-block h-1 w-1 fill-current opacity-60" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048"><path d="M1799 349l242 241-1017 1017L7 590l242-241 775 775 775-775z"></path></svg></div> <ul tabindex="-1" class="dropdown-content menu bg-base-300 rounded-2xl z-150 w-52 p-2 shadow-sm"></ul></div>');function nl(c,r){Te(r,!1);const n=()=>Ce(qt,"$theme",v),[v,b]=st(),p=["light","cupcake","night","dark","emerald","fantasy","luxury","acid","coffee","retro","business","dracula","dim","garden"];let f=pe(r,"dropdownDirection",8,"dropdown-end");function u(E){qt.set(E)}Ee();var d=rl(),$=l(a(d),2);Se($,5,()=>p,Ne,(E,j)=>{var T=sl(),O=a(T);he(O),t(T),K(()=>{pt(O,"aria-label",e(j)),ra(O,e(j)),Vt(O,n()===e(j))}),i("change",O,()=>u(e(j))),C(E,T)}),t($),t(d),K(()=>Ae(d,1,`dropdown ${f()}`)),C(c,d),Me(),b()}var ol=N('<span class="absolute top-0 right-0 flex h-5 w-5 translate-x-1/2 translate-y-1/2 items-center justify-center rounded-full bg-red-600 text-xs font-bold text-white"> </span>'),il=N('<li><button class="w-full border border-base-300 text-left hover:bg-base-200"> </button></li>'),cl=N('<ul class="dropdown-content menu mt-3 w-52 rounded-box bg-base-100 p-2 shadow-md"></ul>'),dl=N('<div class="fixed top-16 left-1/2 z-50 flex items-center gap-4 rounded-lg border border-base-300 bg-base-100 p-2 shadow-md select-none"><div role="button" tabindex="0" class="cursor-grab rounded-md bg-base-200 p-2 hidden md:inline-block" aria-label="Drag toolbar">‚†ø</div> <div class="tooltip" data-tip="Delete"><button class="btn relative btn-square btn-error" aria-label="Delete selected"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 7h12M10 11v6m4-6v6M5 7l1 12a2 2 0 002 2h8a2 2 0 002-2l1-12M9 7V4a1 1 0 011-1h4a1 1 0 011 1v3"></path></svg> <!></button></div> <div class="tooltip" data-tip="Select all"><button class="btn btn-square btn-ghost" aria-label="Select all"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7M5 7l4 4L19 1"></path></svg></button></div> <div class="tooltip" data-tip="Deselect all"><button class="btn btn-square opacity-50 btn-ghost" aria-label="Deselect all"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current opacity-20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7M5 7l4 4L19 1"></path></svg></button></div> <div><div class="tooltip" data-tip="Move to category"><button class="btn btn-square btn-ghost" aria-label="Move to category"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4h16v4H4V4zm0 8h16v4H4v-4zm0 8h16v4H4v-4z"></path></svg></button></div> <!></div> <div class="tooltip" data-tip="Cancel"><button class="btn btn-square bg-red-700 text-white btn-ghost hover:bg-red-500" aria-label="Cancel selection"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div role="button" tabindex="0" class="drag-handle cursor-grab rounded-md bg-base-200 p-2" aria-label="Drag toolbar">‚†ø</div></div>');function vl(c,r){Te(r,!1);let n=pe(r,"selectedCount",8,0),v=pe(r,"categoryList",24,()=>[]),b=pe(r,"showCategoryDropdown",8,!1);const p=lt();let f=!1,u=0,d=0,$=S(0),E=S(0);function j(h){f=!0,u=h.clientX-e($),d=h.clientY-e(E),window.addEventListener("pointermove",T),window.addEventListener("pointerup",O)}function T(h){f&&(s($,h.clientX-u),s(E,h.clientY-d))}function O(){f=!1,window.removeEventListener("pointermove",T),window.removeEventListener("pointerup",O)}Ee();var x=dl(),M=a(x),_=l(M,2),m=a(_),y=l(a(m),2);{var B=h=>{var X=ol(),de=a(X,!0);t(X),K(()=>ce(de,n())),C(h,X)};q(y,h=>{n()>0&&h(B)})}t(m),t(_);var k=l(_,2),D=a(k);t(k);var J=l(k,2),V=a(J);t(J);var L=l(J,2);let P;var I=a(L),F=a(I);t(I);var ae=l(I,2);{var te=h=>{var X=cl();Se(X,5,v,Ne,(de,Q)=>{var Z=il(),ve=a(Z),fe=a(ve,!0);t(ve),t(Z),K(()=>ce(fe,e(Q))),i("click",ve,()=>p("moveCategory",e(Q))),C(de,Z)}),t(X),C(h,X)};q(ae,h=>{ee(b()),ee(v()),z(()=>b()&&v().length>0)&&h(te)})}t(L);var Y=l(L,2),R=a(Y);t(Y);var A=l(Y,2);t(x),K(()=>{Pt(x,`transform: translate(calc(-50% + ${e($)??""}px), ${e(E)??""}px);`),m.disabled=n()===0,P=Ae(L,1,"dropdown dropdown-end",null,P,{"dropdown-open":b()}),F.disabled=n()===0}),i("pointerdown",M,j),i("click",m,()=>p("delete")),i("click",D,()=>p("selectAll")),i("click",V,()=>p("deselectAll")),i("click",F,()=>p("toggleCategoryDropdown")),i("click",R,()=>p("cancel")),i("pointerdown",A,j),C(c,x),Me()}var ul=N('<button><div class="indicator"><span class="indicator-item bg-base-100 text-xs rounded-3xl px-1.5 py-0.5 -top-1"> </span> <div class="z-10"> </div></div></button>'),bl=N('<div class="flex h-screen flex-col"><div class="navbar bg-base-100 shadow-lg"><div class="flex-none"><button class="btn btn-square btn-ghost" aria-label="Open menu"><!></button></div> <div class="flex-1"><span class="text-md md:text-xl font-bold"> <span class="hide-on-320 svelte-j9gjs9"> </span></span></div> <div class="flex-none"><button class="btn btn-square btn-ghost" aria-label="Toggle search"><!></button> <div class="tooltip tooltip-bottom" data-tip="Open filters"><button class="btn btn-square btn-ghost" aria-label="Open filters"><!></button></div> <div class="tooltip tooltip-bottom" data-tip="Select entries"><button class="btn btn-square btn-ghost" aria-label="Select entries"><!></button></div> <button class="btn btn-square btn-ghost inline-block md:hidden" aria-label="Toggle grid columns" title="Toggle grid columns"><!></button> <!></div></div> <!> <div class="tabs tabs-border flex-nowrap gap-1 overflow-x-auto bg-base-200 px-2 pt-2 pb-1 scrollbar-hide"><button><div class="z-10">All</div> <span class="bg-base-100 text-xs rounded-3xl px-1.5 py-0.5"> </span></button> <!></div> <button class="z-100 btn fixed right-6 bottom-6 btn-circle shadow-xl btn-lg btn-primary" aria-label="Add new entry"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></button> <!>  <div class="flex-1 overflow-auto p-4"><!></div></div> <!> <!> <!> <!> <!> <!>',1);function pl(c,r){Te(r,!1);const n=()=>Ce(at,"$selectedCategory",u),v=()=>Ce(Re,"$categories",u),b=()=>Ce(St,"$entries",u),p=()=>Ce(fa,"$filteredEntries",u),f=()=>Ce(Ft,"$gridCols",u),[u,d]=st(),$=S();let E=S(!1),j=S(!1),T=S(!1),O=S(!1),x=S(!1),M=S(null),_=S(null),m=S(!1),y=S(new Set),B=S(!1);const k=lt();let D=S(""),J=S(!1);function V(){Ft.update(o=>o===3?4:3)}async function L(){const o=await re.getAllEntries();St.set(o),Array.from(new Set(o.map(U=>U.category).filter(U=>U&&U!=="All"))),Re.load()}Dt(async()=>{await L(),xa();const o=localStorage.getItem("selectedCategory");o&&at.set(o)});function P(){s(M,null),s(x,!0),s(B,!1)}async function I(){s(x,!1),s(M,null),await L()}function F(){s(x,!1),s(M,null)}async function ae(){s(O,!1),s(_,null),await L()}function te(){s(O,!1),s(_,null)}let Y;function R(o){s(D,o),s(J,!0),clearTimeout(Y),Y=window.setTimeout(()=>{s(J,!1)},1500)}async function A(o){await re.importFromJSON(o),await L(),s(T,!1)}async function h(){const o=await re.exportToJSON(),U=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),ge=URL.createObjectURL(U),be=document.createElement("a");be.href=ge,be.download=`lib-export-${new Date().toISOString()}.json`,document.body.appendChild(be),be.click(),document.body.removeChild(be),URL.revokeObjectURL(ge),s(T,!1),R("Exported to JSON üëç :Downloads/")}async function X(){const o=await re.exportToMarkdown(),U=new Blob([o],{type:"text/markdown"}),ge=URL.createObjectURL(U),be=document.createElement("a");be.href=ge,be.download=`lib-export-${new Date().toISOString()}.md`,document.body.appendChild(be),be.click(),document.body.removeChild(be),URL.revokeObjectURL(ge),s(T,!1),R("Exported to Markdown üëç :Downloads/")}async function de(o){await re.moveCategoryToAll(o),n()===o&&at.set("All"),await L(),s(m,!1)}let Q=S(!1);async function Z(o){for(const ge of e(y))b().find(yt=>yt.id===ge)&&await re.updateEntry(ge,{category:o});e(y).clear(),s(y,new Set(e(y))),s(B,!1);const U=await re.getAllEntries();St.set(U),s(Q,!1)}function ve(o){e(y).has(o)?e(y).delete(o):e(y).add(o),s(y,new Set(e(y)))}async function fe(){if(e(y).size===0)return;const o=Array.from(e(y));for(const U of o)await re.deleteEntry(U);e(y).clear(),s(y,new Set(e(y))),await L(),s(B,!1)}function le(){s(y,new Set(p().map(o=>o.id)))}function H(){e(y).clear(),s(y,new Set(e(y)))}$t(()=>v(),()=>{s($,v().filter(o=>o!=="All"))}),Wt(),Ee();var se=bl(),_e=Le(se),ye=a(_e),ne=a(ye),ue=a(ne),Ie=a(ue);me(Ie,()=>(ee(W),z(()=>W.menu))),t(ue),t(ne);var ke=l(ne,2),Be=a(ke),oe=a(Be);oe.nodeValue="Lib ";var ft=l(oe),rt=a(ft);t(ft),t(Be),t(ke);var Xe=l(ke,2),Fe=a(Xe),Tt=a(Fe);me(Tt,()=>(ee(W),z(()=>W.search))),t(Fe);var Ze=l(Fe,2),He=a(Ze),nt=a(He);me(nt,()=>(ee(W),z(()=>W.filter))),t(He),t(Ze);var Ke=l(Ze,2),We=a(Ke),gt=a(We);me(gt,()=>(ee(W),z(()=>W.select))),t(We),t(Ke);var Qe=l(Ke,2),ht=a(Qe);me(ht,()=>(ee(W),z(()=>W.toggleGrid))),t(Qe);var mt=l(Qe,2);nl(mt,{dropdownDirection:"dropdown-bottom dropdown-end"}),t(Xe),t(ye);var wt=l(ye,2);{var xt=o=>{ja(o,{get show(){return e(E)},set show(U){s(E,U)},$$legacy:!0})};q(wt,o=>{e(E)&&o(xt)})}var et=l(wt,2),Oe=a(et);let g;var w=l(a(Oe),2),G=a(w,!0);t(w),t(Oe);var we=l(Oe,2);Se(we,1,()=>e($),Ne,(o,U)=>{var ge=ul();let be;var yt=a(ge),Mt=a(yt),Qt=a(Mt,!0);t(Mt);var Jt=l(Mt,2),ea=a(Jt,!0);t(Jt),t(yt),t(ge),K(It=>{be=Ae(ge,1,"tab",null,be,{"tab-active":n()===e(U)}),ce(Qt,It),ce(ea,e(U))},[()=>(b(),e(U),z(()=>b().filter(It=>It.category===e(U)).length))]),i("click",ge,()=>at.set(e(U))),C(o,ge)}),t(et);var xe=l(et,2),$e=l(xe,2);{var Je=o=>{vl(o,{get selectedCount(){return e(y),z(()=>e(y).size)},get categoryList(){return e($)},get showCategoryDropdown(){return e(Q)},$$events:{delete:fe,selectAll:le,deselectAll:H,toggleCategoryDropdown:()=>s(Q,!e(Q)),moveCategory:U=>Z(U.detail),cancel:()=>{s(B,!1),s(Q,!1),e(y).clear(),s(y,new Set(e(y)))}}})};q($e,o=>{e(B)&&o(Je)})}var Ve=l($e,2),Ge=a(Ve);Ma(Ge,{get entries(){return p()},get selectionMode(){return e(B)},get selectedEntries(){return e(y)},get gridCols(){return f()},$$events:{toggleSelect:o=>ve(o.detail)}}),t(Ve),t(_e);var je=l(_e,2);{var ot=o=>{Na(o,{get show(){return e(j)},set show(U){s(j,U)},$$legacy:!0})};q(je,o=>{e(j)&&o(ot)})}var it=l(je,2);{var _t=o=>{qa(o,{get show(){return e(T)},set show(U){s(T,U)},$$events:{import:U=>A(U.detail),export:h,exportMd:X,showCategories:()=>{s(T,!1),s(m,!0)}},$$legacy:!0})};q(it,o=>{e(T)&&o(_t)})}var ct=l(it,2);{var De=o=>{ll(o,{get show(){return e(m)},$$events:{close:()=>s(m,!1),rename:U=>k("renameCategory",U.detail),delete:U=>de(U.detail)}})};q(ct,o=>{e(m)&&o(De)})}var Bt=l(ct,2);{var Xt=o=>{va(o,{get entryId(){return e(_)},$$events:{save:ae,cancel:te}})};q(Bt,o=>{e(O)&&o(Xt)})}var Ot=l(Bt,2);{var Zt=o=>{Ya(o,{get entryId(){return e(M)},$$events:{save:I,cancel:F}})};q(Ot,o=>{e(x)&&o(Zt)})}var Kt=l(Ot,2);Lt(Kt,{get showAlert(){return e(J)},get message(){return e(D)}}),K(()=>{ce(rt,`(${b(),z(()=>b().length)??""})`),g=Ae(Oe,1,"tab relative",null,g,{"tab-active":n()==="All"}),ce(G,(b(),z(()=>b().length)))}),i("click",ue,()=>s(T,!0)),i("click",Fe,()=>{s(E,!e(E)),s(B,!1)}),i("click",He,()=>{s(j,!e(j)),s(B,!1)}),i("click",We,()=>{e(B)&&(e(y).clear(),s(y,new Set(e(y))),s(Q,!1)),s(B,!e(B))}),i("click",Qe,V),i("click",Oe,()=>at.set("All")),i("click",xe,P),C(c,se),Me(),d()}function Sl(c){na("1uha8ag",r=>{Ht(()=>{sa.title="lib"})}),pl(c,{})}export{Sl as component};

import{a as d,f as v}from"../chunks/D3vby6U_.js";import{i as Ae}from"../chunks/Bwu4RMZf.js";import{o as Me}from"../chunks/-zjGI0Dc.js";import{D as Ee,L as Ca,M as Ce,E as ia,F as _,G as De,y as a,N as Le,I as r,K as o,O as j,$ as Se,u as n,J as t,P as B,z as ze,Q as Be}from"../chunks/riJd4J55.js";import{e as C,s as M}from"../chunks/PYUtIo-j.js";import{i as g,s as Ie,a as Te}from"../chunks/B9K7rbfb.js";import{g as na,d as Q,s as I,a as He,b as $e,E as Ne,e as R,i as F,R as Da,r as La,c as Sa,f as za,h as Ba}from"../chunks/CkIexqWV.js";import{h as Pe}from"../chunks/4SYkZMYa.js";import{s as qe,b as Oe,g as Re}from"../chunks/BUeT1_C4.js";const Fe=!1,Ue=!1,It=Object.freeze(Object.defineProperty({__proto__:null,prerender:Fe,ssr:Ue},Symbol.toStringTag,{value:"Module"})),Ge=()=>{const H=qe;return{page:{subscribe:H.page.subscribe},navigating:{subscribe:H.navigating.subscribe},updated:H.updated}},Ve={subscribe(H){return Ge().page.subscribe(H)}};var Je=v('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50" role="dialog" aria-modal="true"><div class="bg-base-100 rounded-lg p-4 m-4 shadow-lg w-96"><h3 class="text-lg font-bold mb-4">Confirm Delete</h3> <p class="mb-6">Are you sure you want to delete this entry?</p> <div class="flex justify-end gap-2"><button class="btn btn-soft">Cancel</button> <button class="btn btn-error">Delete</button></div></div></div>'),Ke=v('<div class="fixed inset-0 bg-base-100/69 flex items-center justify-center z-50 p-4"><img class="max-h-full max-w-full rounded-lg shadow-2xl"/> <button class="absolute bottom-5 right-5 btn btn-circle btn-md btn-ghost text-white bg-base-300">✕</button></div>'),Qe=v('<img class="w-31 h-46 md:w-35 md:h-55 object-cover rounded-lg"/>'),We=v('<div class="w-34 h-50 bg-base-300 rounded-lg flex items-center justify-center text-base-content/20"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-16 h-16 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'),Xe=v('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words hidden md:inline-block"> </p>'),Ye=v('<span class="badge badge-primary badge-sm md:badge-md"> </span>'),Ze=v('<div class="flex flex-wrap gap-1 md:gap-2 mb-2 md:mb-4" title="badges"></div>'),at=v('<button class="btn badge-soft badge-outline badge-sm md:badge-md block break-all whitespace-normal line-clamp-2" title="category"> </button>'),et=v('<div class="badge badge-dash badge-sm md:badge-md" title="dataType"> </div>'),tt=v('<span class="text-xm badge badge-sm badge-ghost gap-0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" class="w-3 h-3 stroke-current fill-base-content"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l2.122 6.53a1 1 0 00.95.69h6.866c.969 0 1.371 1.24.588 1.81l-5.556 4.04a1 1 0 00-.364 1.118l2.122 6.53c.3.921-.755 1.688-1.54 1.118l-5.556-4.04a1 1 0 00-1.176 0l-5.556 4.04c-.784.57-1.838-.197-1.539-1.118l2.122-6.53a1 1 0 00-.364-1.118L.47 11.957c-.783-.57-.38-1.81.588-1.81h6.866a1 1 0 00.95-.69l2.122-6.53z"></path></svg> </span>'),st=v('<input type="radio" name="rating" class="mask mask-star-2 mask-half-1 bg-base-content"/> <input type="radio" name="rating" class="mask mask-star-2 mask-half-2 bg-base-content"/>',1),rt=v('<div><div class="rating rating-lg rating-half mt-2"></div></div>'),it=v('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words inline-block md:hidden"> </p>'),nt=v('<span class="badge badge-info badge-sm md:badge-md"> </span>'),ot=v('<div class="flex flex-wrap gap-1 md:gap-2 mb-2 mt-1 justify-end" title="tags"></div>'),lt=v('<img class="w-15 h-15 rounded-full object-cover"/>'),dt=v('<div class="w-19 h-19 md:w-20 md:h-20 rounded-full bg-base-300 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-8 h-8 stroke-current text-base-content/20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div>'),vt=v('<div class="flex flex-col items-center gap-2 flex-shrink-0"><!> <span class="text-sm text-center"> </span></div>'),ct=v('<div class="card bg-base-100 shadow-xl"><div class="card-body p-4 md:p-6"><h2 class="card-title">Characters <button class="btn btn-ghost btn-sm ml-auto" aria-label="Edit Characters"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></h2> <div class="flex gap-2 md:gap-4 overflow-x-auto pb-1 scrollbar-hide"></div></div></div>'),pt=v('<div class="card bg-base-100 shadow-xl"><div class="card-body gap-1 md:gap-2 p-4 md:p-6"><h2 class="card-title">Description <button class="btn btn-square btn-ghost ml-auto" aria-label="Edit Description"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></h2> <div class="ml-2 break-words prose prose-sm max-w-none prose-p:my-1 prose-ul:my-0 prose-li:my-0 prose-h1:my-0 prose-h2:my-0"><!></div></div></div>'),bt=v('<span class="bg-base-200 rounded-lg px-0.5"> </span>'),gt=v('<div class="flex flex-wrap gap-1"></div>'),mt=v('<div class="p-1 text-sm text-base-content/70 bg-base-200/50 border border-base-content/10 rounded-b-lg"><span class="ml-2 text-base-content/60">↳ <span class="font-semibold">Description:</span></span> <span class="inline prose prose-sm prose-neutral prose-p:m-0 prose-strong:inline prose-em:inline prose-code:inline"><!></span></div>'),ut=v('<div class="grid grid-cols-3 gap-4 px-4 py-3 bg-base-100 divide-x-[2px] divide-base-content/10 border border-base-content/10 rounded-t-lg"><div class="font-semibold"> </div> <div> </div> <div><!></div></div> <!>',1),_t=v('<div class="card bg-base-100 shadow-xl"><div class="card-body p-3 md:p-6"><h2 class="card-title ml-1">Chapters <button class="btn btn-ghost btn-sm ml-auto" aria-label="Edit Chapters"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></h2> <div class="overflow-x-auto"><div class="w-full border border-base-300 rounded-lg"><div class="grid grid-cols-3 gap-4 px-4 py-3 font-semibold bg-base-200 rounded-t-lg"><div>Chapter</div> <div>Characters</div> <div>Tags</div></div> <div class="divide-y divide-base-300"></div></div></div></div></div>'),ft=v('<div><span class="font-semibold text-base-content">Created:</span> <span> </span></div>'),ht=v('<div><span class="font-semibold text-base-content">Last opened:</span> <span> </span></div>'),xt=v('<div><span class="font-semibold text-base-content">Last edited:</span> <span> </span></div>'),wt=v('<details class="collapse bg-base-100"><summary class="collapse-title font-semibold">Timestamps</summary> <div class="collapse-content text-sm"><div class="rounded-lg bg-base-200 p-3 text-xs text-gray-500 space-y-1"><!> <!> <!></div></div></details>'),kt=v('<div class="container mx-auto p-2 md:p-4 max-w-4xl space-y-2 md:space-y-6"><div class="card bg-base-100 shadow-xl"><div class="card-body p-4 md:p-6"><div class="flex flex-row md:flex-row gap-3 md:gap-5"><div class="flex-shrink-0"><!></div> <div class="flex-1 min-w-0 flex flex-col justify-center"><h1 class="text-2xl font-bold mb-2 whitespace-pre-wrap break-words" title="Title"> </h1> <!> <!> <div class="flex flex-wrap gap-1.5 md:gap-2 mt-2"><!> <!> <!></div> <!></div></div> <div><!> <!></div></div></div> <!> <!> <!> <!></div>'),yt=v('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),jt=v('<!> <div class="min-h-screen bg-base-200"><div class="sticky top-0 z-50 navbar bg-base-100 shadow-lg"><div class="flex-none"><a class="btn btn-square btn-ghost" aria-label="Go back"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></a></div> <div class="flex-1"><span class="text-xl font-bold">Details</span></div> <div class="flex-none gap-2"><button class="btn btn-square btn-ghost" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="btn btn-square btn-ghost text-error" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <!> <!></div> <!>',1);function Tt(H,W){Ee(W,!1);const Ia=()=>Te(Ve,"$page",Ta),[Ta,Ha]=Ie(),oa=B(),la=B();let e=B(null),G=B(!1),$=B(),V=B(!1),T=B(0),da=B("All");function U(l="All"){j(da,l),j(G,!0)}Me(async()=>{j($,parseInt(Ia().params.id)),await va(),await Q.markAsOpened(a($))});async function va(){j(e,await Q.getEntryById(a($))),j(T,a(e)?.rating??0)}async function ca(l){a($)&&(j(T,l),await Q.updateEntryPartial(a($),{rating:a(T)}),a(e)&&Be(e,a(e).rating=a(T)))}function $a(){history.length>1?window.history.back():Re("/")}async function Na(){j(G,!1),await va()}function Pa(){j(G,!1)}let J=B(!1);function qa(){j(J,!0)}async function Oa(){await Q.deleteEntry(a($)),j(J,!1),$a()}function Ra(){j(J,!1)}function Fa(l){return na.parseInline(l)}function X(l){return l?new Date(l).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null}function Ua(l,m){const E=parseFloat(l),L=parseFloat(m),D=!isNaN(E),S=!isNaN(L);return D&&!S?-1:!D&&S?1:D&&S?E-L:l.localeCompare(m,void 0,{numeric:!0,sensitivity:"base"})}Ca(()=>(a(e),na),()=>{j(oa,a(e)?.description?na.parse(a(e).description):"")}),Ca(()=>a(e),()=>{j(la,(a(e)?.rows??[]).slice().sort((l,m)=>Ua(l.ChapterSE,m.ChapterSE)))}),Ce(),Ae();var pa=jt();Pe("9y3fua",l=>{Le(()=>{Se.title=`${a(e),n(()=>a(e)?.title||"Loading...")??""} - lib`})});var ba=ia(pa);{var Ga=l=>{var m=Je(),E=r(m),L=o(r(E),4),D=r(L),S=o(D,2);t(L),t(E),t(m),C("click",D,Ra),C("click",S,Oa),d(l,m)};g(ba,l=>{a(J)&&l(Ga)})}var Y=o(ba,2),Z=r(Y),aa=r(Z),Va=r(aa);t(aa);var ga=o(aa,4),ma=r(ga),Ja=o(ma,2);t(ga),t(Z);var ua=o(Z,2);{var Ka=l=>{var m=Ke(),E=r(m),L=o(E,2);t(m),_(()=>{I(E,"src",(a(e),n(()=>a(e).coverImageUrl))),I(E,"alt",(a(e),n(()=>a(e).title)))}),C("click",E,He(function(D){$e.call(this,W,D)})),C("click",L,()=>j(V,!1)),C("click",m,()=>j(V,!1)),d(l,m)};g(ua,l=>{a(V)&&l(Ka)})}var Qa=o(ua,2);{var Wa=l=>{var m=kt(),E=r(m),L=r(E),D=r(L),S=r(D),ae=r(S);{var ee=i=>{var s=Qe();_(()=>{I(s,"src",(a(e),n(()=>a(e).coverImageUrl))),I(s,"alt",(a(e),n(()=>a(e).title)))}),C("click",s,()=>j(V,!0)),d(i,s)},te=i=>{var s=We();d(i,s)};g(ae,i=>{a(e),n(()=>a(e).coverImageUrl)?i(ee):i(te,!1)})}t(S);var _a=o(S,2),ea=r(_a),se=r(ea,!0);t(ea);var fa=o(ea,2);{var re=i=>{var s=Xe(),c=r(s,!0);t(s),_(b=>M(c,b),[()=>(a(e),n(()=>a(e).alternativeTitles.join(", ")))]),d(i,s)};g(fa,i=>{a(e),n(()=>a(e).alternativeTitles.length>0)&&i(re)})}var ha=o(fa,2);{var ie=i=>{var s=Ze();R(s,5,()=>(a(e),n(()=>a(e).badges)),F,(c,b)=>{var p=Ye(),f=r(p,!0);t(p),_(()=>M(f,a(b))),d(c,p)}),t(s),d(i,s)};g(ha,i=>{a(e),n(()=>a(e).badges.length>0)&&i(ie)})}var ta=o(ha,2),xa=r(ta);{var ne=i=>{var s=at(),c=r(s,!0);t(s),_(()=>M(c,(a(e),n(()=>a(e).category)))),C("click",s,()=>U("category")),d(i,s)};g(xa,i=>{a(e),n(()=>a(e).category)&&i(ne)})}var wa=o(xa,2);{var oe=i=>{var s=et(),c=r(s,!0);t(s),_(()=>M(c,(a(e),n(()=>a(e).dataType)))),d(i,s)};g(wa,i=>{a(e),n(()=>a(e).dataType)&&i(oe)})}var le=o(wa,2);{var de=i=>{var s=tt(),c=o(r(s));t(s),_(()=>M(c,` ${ze(Da),a(T),n(()=>Da[a(T)])??""}`)),d(i,s)};g(le,i=>{a(e),n(()=>a(e).rating)&&i(de)})}t(ta);var ve=o(ta,2);{var ce=i=>{var s=rt(),c=r(s);R(c,4,()=>n(()=>Array.from({length:5},(b,p)=>p+1)),F,(b,p)=>{var f=st(),w=ia(f);La(w);var u=o(w,2);La(u),_(()=>{Sa(w,p*2-1),za(w,a(T)===p*2-1),I(w,"aria-label",`${p-.5} star`),Sa(u,p*2),za(u,a(T)===p*2),I(u,"aria-label",`${p} star`)}),C("change",w,()=>ca(p*2-1)),C("change",u,()=>ca(p*2)),d(b,f)}),t(c),t(s),d(i,s)};g(ve,i=>{a(e),n(()=>a(e).rating)&&i(ce)})}t(_a),t(D);var ka=o(D,2),ya=r(ka);{var pe=i=>{var s=it(),c=r(s,!0);t(s),_(b=>M(c,b),[()=>(a(e),n(()=>a(e).alternativeTitles.join(", ")))]),d(i,s)};g(ya,i=>{a(e),n(()=>a(e).alternativeTitles.length>0)&&i(pe)})}var be=o(ya,2);{var ge=i=>{var s=ot();R(s,5,()=>(a(e),n(()=>a(e).tags)),F,(c,b)=>{var p=nt(),f=r(p,!0);t(p),_(()=>M(f,a(b))),d(c,p)}),t(s),d(i,s)};g(be,i=>{a(e),n(()=>a(e).tags.length>0)&&i(ge)})}t(ka),t(L),t(E);var ja=o(E,2);{var me=i=>{var s=ct(),c=r(s),b=r(c),p=o(r(b));t(b);var f=o(b,2);R(f,5,()=>(a(e),n(()=>a(e).characters)),F,(w,u)=>{var N=vt(),h=r(N);{var k=y=>{var P=lt();_(()=>{I(P,"src",(a(u),n(()=>a(u).Image))),I(P,"alt",(a(u),n(()=>a(u).Name)))}),d(y,P)},x=y=>{var P=dt();d(y,P)};g(h,y=>{a(u),n(()=>a(u).Image)?y(k):y(x,!1)})}var A=o(h,2),z=r(A,!0);t(A),t(N),_(()=>M(z,(a(u),n(()=>a(u).Name)))),d(w,N)}),t(f),t(c),t(s),C("click",p,()=>U("characters")),d(i,s)};g(ja,i=>{a(e),n(()=>a(e).characters.length>0)&&i(me)})}var Aa=o(ja,2);{var ue=i=>{var s=pt(),c=r(s),b=r(c),p=o(r(b));t(b);var f=o(b,2),w=r(f);Ba(w,()=>a(oa)),t(f),t(c),t(s),C("click",p,()=>U("description")),d(i,s)};g(Aa,i=>{a(e),n(()=>a(e).description)&&i(ue)})}var Ma=o(Aa,2);{var _e=i=>{var s=_t(),c=r(s),b=r(c),p=o(r(b));t(b);var f=o(b,2),w=r(f),u=o(r(w),2);R(u,5,()=>a(la),F,(N,h)=>{var k=ut(),x=ia(k),A=r(x),z=r(A,!0);t(A);var y=o(A,2),P=r(y,!0);t(y);var Ea=o(y,2),xe=r(Ea);{var we=q=>{var O=gt();R(O,5,()=>(a(h),n(()=>a(h).Tags)),F,(K,sa)=>{var ra=bt(),je=r(ra,!0);t(ra),_(()=>M(je,a(sa))),d(K,ra)}),t(O),d(q,O)};g(xe,q=>{a(h),n(()=>a(h).Tags.length>0)&&q(we)})}t(Ea),t(x);var ke=o(x,2);{var ye=q=>{var O=mt(),K=o(r(O),2),sa=r(K);Ba(sa,()=>(a(h),n(()=>Fa(a(h).Description)))),t(K),t(O),d(q,O)};g(ke,q=>{a(h),n(()=>a(h).Description)&&q(ye)})}_(()=>{M(z,(a(h),n(()=>a(h).ChapterSE))),M(P,(a(h),n(()=>a(h).Characters)))}),d(N,k)}),t(u),t(w),t(f),t(c),t(s),C("click",p,()=>U("chapters")),d(i,s)};g(Ma,i=>{a(e),n(()=>a(e).rows.length>0)&&i(_e)})}var fe=o(Ma,2);{var he=i=>{var s=wt(),c=o(r(s),2),b=r(c),p=r(b);{var f=k=>{var x=ft(),A=o(r(x),2),z=r(A,!0);t(A),t(x),_(y=>M(z,y),[()=>(a(e),n(()=>X(a(e).createdAt)))]),d(k,x)};g(p,k=>{a(e),n(()=>a(e).createdAt)&&k(f)})}var w=o(p,2);{var u=k=>{var x=ht(),A=o(r(x),2),z=r(A,!0);t(A),t(x),_(y=>M(z,y),[()=>(a(e),n(()=>X(a(e).openedAt)))]),d(k,x)};g(w,k=>{a(e),n(()=>a(e).openedAt)&&k(u)})}var N=o(w,2);{var h=k=>{var x=xt(),A=o(r(x),2),z=r(A,!0);t(A),t(x),_(y=>M(z,y),[()=>(a(e),n(()=>X(a(e).editedAt)))]),d(k,x)};g(N,k=>{a(e),n(()=>a(e).editedAt)&&k(h)})}t(b),t(c),t(s),d(i,s)};g(fe,i=>{a(e),n(()=>a(e).createdAt||a(e).openedAt||a(e).editedAt)&&i(he)})}t(m),_(()=>M(se,(a(e),n(()=>a(e).title)))),d(l,m)},Xa=l=>{var m=yt();d(l,m)};g(Qa,l=>{a(e)?l(Wa):l(Xa,!1)})}t(Y);var Ya=o(Y,2);{var Za=l=>{Ne(l,{get entryId(){return a($)},get editSection(){return a(da)},$$events:{save:Na,cancel:Pa}})};g(Ya,l=>{a(G)&&l(Za)})}_(()=>I(Va,"href",`${Oe??""}/`)),C("click",ma,()=>U("All")),C("click",Ja,qa),d(H,pa),De(),Ha()}export{Tt as component,It as universal};

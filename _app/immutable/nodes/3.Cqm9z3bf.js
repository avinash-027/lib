import{a as l,f as p,c as Bt}from"../chunks/0ubpWbpi.js";import{i as Rt}from"../chunks/Da3VXKUW.js";import{o as Ht}from"../chunks/Dpwwg9Ra.js";import{$ as Pt,M as Ot,aQ as qt,af as Ut,e as Wt,u as n,aR as Vt,aS as Gt,q as Kt,U as ma,aD as rt,D as Jt,aT as La,aU as Qt,E as ka,F as x,G as Xt,y as a,aV as Yt,I as r,K as o,W as z,aW as Zt,J as e,V as aa,z as ae,aP as te,aX as ee}from"../chunks/DLYKDbEr.js";import{a as re,e as q,s as T}from"../chunks/Do5Jj52h.js";import{i as g,s as se,a as ie}from"../chunks/yaLrqqUo.js";import{g as za,d as ya,s as sa,a as ne,b as oe,E as de,e as na,i as oa,R as Xa,r as Ya,c as Za,f as at,h as tt}from"../chunks/rdfiWT26.js";import{h as le}from"../chunks/Cph_gCIw.js";import{s as ve,b as ce,g as pe}from"../chunks/CFc1me8x.js";const ue=()=>performance.now(),ia={tick:v=>requestAnimationFrame(v),now:()=>ue(),tasks:new Set};function st(){const v=ia.now();ia.tasks.forEach(d=>{d.c(v)||(ia.tasks.delete(d),d.f())}),ia.tasks.size!==0&&ia.tick(st)}function fe(v){let d;return ia.tasks.size===0&&ia.tick(st),{promise:new Promise(N=>{ia.tasks.add(d={c:v,f:N})}),abort(){ia.tasks.delete(d)}}}function $a(v,d){rt(()=>{v.dispatchEvent(new CustomEvent(d))})}function ge(v){if(v==="float")return"cssFloat";if(v==="offset")return"cssOffset";if(v.startsWith("--"))return v;const d=v.split("-");return d.length===1?d[0]:d[0]+d.slice(1).map(N=>N[0].toUpperCase()+N.slice(1)).join("")}function et(v){const d={},N=v.split(";");for(const M of N){const[H,k]=M.split(":");if(!H||k===void 0)break;const P=ge(H.trim());d[P]=k.trim()}return d}const be=v=>v;function _e(v,d,N,M){var H=(v&Vt)!==0,k="both",P,Y=d.inert,t=d.style.overflow,w,_;function V(){return rt(()=>P??=N()(d,M?.()??{},{direction:k}))}var D={is_global:H,in(){d.inert=Y,w=Da(d,V(),_,1,()=>{$a(d,"introend"),w?.abort(),w=P=void 0,d.style.overflow=t})},out(J){d.inert=!0,_=Da(d,V(),w,0,()=>{$a(d,"outroend"),J?.()})},stop:()=>{w?.abort(),_?.abort()}},G=Pt;if((G.nodes.t??=[]).push(D),re){var K=H;if(!K){for(var h=G.parent;h&&(h.f&Ot)!==0;)for(;(h=h.parent)&&(h.f&qt)===0;);K=!h||(h.f&Ut)!==0}K&&Wt(()=>{n(()=>D.in())})}}function Da(v,d,N,M,H){var k=M===1;if(Gt(d)){var P,Y=!1;return Kt(()=>{if(!Y){var J=d({direction:k?"in":"out"});P=Da(v,J,N,M,H)}}),{abort:()=>{Y=!0,P?.abort()},deactivate:()=>P.deactivate(),reset:()=>P.reset(),t:()=>P.t()}}if(N?.deactivate(),!d?.duration&&!d?.delay)return $a(v,k?"introstart":"outrostart"),H(),{abort:ma,deactivate:ma,reset:ma,t:()=>M};const{delay:t=0,css:w,tick:_,easing:V=be}=d;var D=[];if(k&&N===void 0&&(_&&_(0,1),w)){var G=et(w(0,1));D.push(G,G)}var K=()=>1-M,h=v.animate(D,{duration:t,fill:"forwards"});return h.onfinish=()=>{h.cancel(),$a(v,k?"introstart":"outrostart");var J=N?.t()??1-M;N?.abort();var $=M-J,da=d.duration*Math.abs($),ga=[];if(da>0){var ha=!1;if(w)for(var wa=Math.ceil(da/16.666666666666668),ba=0;ba<=wa;ba+=1){var la=J+$*V(ba/wa),xa=et(w(la,1-la));ga.push(xa),ha||=xa.overflow==="hidden"}ha&&(v.style.overflow="hidden"),K=()=>{var pa=h.currentTime;return J+$*V(pa/da)},_&&fe(()=>{if(h.playState!=="running")return!1;var pa=K();return _(pa,1-pa),!0})}h=v.animate(ga,{duration:da,fill:"forwards"}),h.onfinish=()=>{K=()=>M,_?.(M,1-M),H()}},{abort:()=>{h&&(h.cancel(),h.effect=null,h.onfinish=ma)},deactivate:()=>{H=ma},reset:()=>{M===0&&_?.(1,0)},t:()=>K()}}const me=!1,he=!1,_r=Object.freeze(Object.defineProperty({__proto__:null,prerender:me,ssr:he},Symbol.toStringTag,{value:"Module"}));function we(v){const d=v-1;return d*d*d+1}function xe(v,{delay:d=0,duration:N=400,easing:M=we,axis:H="y"}={}){const k=getComputedStyle(v),P=+k.opacity,Y=H==="y"?"height":"width",t=parseFloat(k[Y]),w=H==="y"?["top","bottom"]:["left","right"],_=w.map($=>`${$[0].toUpperCase()}${$.slice(1)}`),V=parseFloat(k[`padding${_[0]}`]),D=parseFloat(k[`padding${_[1]}`]),G=parseFloat(k[`margin${_[0]}`]),K=parseFloat(k[`margin${_[1]}`]),h=parseFloat(k[`border${_[0]}Width`]),J=parseFloat(k[`border${_[1]}Width`]);return{delay:d,duration:N,easing:M,css:$=>`overflow: hidden;opacity: ${Math.min($*20,1)*P};${Y}: ${$*t}px;padding-${w[0]}: ${$*V}px;padding-${w[1]}: ${$*D}px;margin-${w[0]}: ${$*G}px;margin-${w[1]}: ${$*K}px;border-${w[0]}-width: ${$*h}px;border-${w[1]}-width: ${$*J}px;min-${Y}: 0`}}const ke=()=>{const v=ve;return{page:{subscribe:v.page.subscribe},navigating:{subscribe:v.navigating.subscribe},updated:v.updated}},ye={subscribe(v){return ke().page.subscribe(v)}};var $e=p('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50" role="dialog" aria-modal="true"><div class="bg-base-100 rounded-lg p-4 m-4 shadow-lg w-96"><h3 class="text-lg font-bold mb-4">Confirm Delete</h3> <p class="mb-6">Are you sure you want to delete this entry?</p> <div class="flex justify-end gap-2"><button class="btn btn-soft">Cancel</button> <button class="btn btn-error">Delete</button></div></div></div>'),Ce=p('<div class="fixed inset-0 bg-base-100/69 flex items-center justify-center z-50 p-4"><img class="max-h-full max-w-full rounded-lg shadow-2xl"/> <button class="absolute bottom-5 right-5 btn btn-circle btn-md btn-ghost text-white bg-base-300">✕</button></div>'),Ae=p('<img class="w-31 h-46 md:w-35 md:h-55 object-cover rounded-lg"/>'),je=p('<div class="w-34 h-50 bg-base-300 rounded-lg flex items-center justify-center text-base-content/20"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-16 h-16 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'),Ee=p('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words hidden md:inline-block"> </p>'),Te=p('<span class="badge badge-primary badge-sm md:badge-md"> </span>'),Ne=p('<div class="flex flex-wrap gap-1 md:gap-2 mb-2 md:mb-4" title="badges"></div>'),Me=p('<button class="btn badge-soft badge-outline badge-sm md:badge-md block break-all whitespace-normal line-clamp-2" title="category"> </button>'),Se=p('<div class="badge badge-dash badge-sm md:badge-md" title="dataType"> </div>'),Le=p('<span class="text-xm badge badge-sm badge-ghost gap-0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" class="w-3 h-3 stroke-current fill-base-content"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l2.122 6.53a1 1 0 00.95.69h6.866c.969 0 1.371 1.24.588 1.81l-5.556 4.04a1 1 0 00-.364 1.118l2.122 6.53c.3.921-.755 1.688-1.54 1.118l-5.556-4.04a1 1 0 00-1.176 0l-5.556 4.04c-.784.57-1.838-.197-1.539-1.118l2.122-6.53a1 1 0 00-.364-1.118L.47 11.957c-.783-.57-.38-1.81.588-1.81h6.866a1 1 0 00.95-.69l2.122-6.53z"></path></svg> </span>'),ze=p('<input type="radio" name="rating" class="mask mask-star-2 mask-half-1 bg-base-content"/> <input type="radio" name="rating" class="mask mask-star-2 mask-half-2 bg-base-content"/>',1),De=p('<div><div class="rating rating-lg rating-half mt-2"></div></div>'),Fe=p('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words inline-block md:hidden"> </p>'),Ie=p('<span class="badge badge-info badge-sm md:badge-md"> </span>'),Be=p('<div class="flex flex-wrap gap-1 md:gap-2 mb-2 mt-1 justify-end" title="tags"></div>'),Re=p('<img class="w-15 h-15 md:w-18 md:h-18 rounded-full object-cover"/>'),He=p('<div class="w-15 h-15 md:w-18 md:h-18 rounded-full bg-base-300 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-8 h-8 stroke-current text-base-content/20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div>'),Pe=p('<span class="indicator-item indicator-bottom indicator-center status status-info"></span>'),Oe=p('<div class="flex flex-col items-center gap-2 flex-shrink-0 w-18 md:w-22 text-center cursor-pointer"><!> <div class="text-sm text-center leading-tight break-all line-clamp-2"><!> <span> </span></div></div>'),qe=p('<div class="break-all"><span class="font-semibold">Role:</span> </div>'),Ue=p('<div class="break-words"><span class="font-semibold">Alternative Names:</span> </div>'),We=p('<span class="badge badge-info badge-xs"> </span>'),Ve=p('<div class="flex flex-wrap gap-1 font-semibold">Tags:<!></div>'),Ge=p('<div class="mt-2 p-2 w-full bg-base-200 rounded-md text-xs text-left space-y-1 text-info"><div class="break-all"><span class="font-semibold">Name:</span> </div> <!> <!> <!></div>'),Ke=p('<div class="card bg-base-100 shadow-xl"><div class="card-body p-5 md:p-6"><h2 class="card-title">Characters <button class="btn btn-ghost btn-sm ml-auto" aria-label="Edit Characters"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></h2> <div class="flex gap-2 md:gap-4 overflow-x-auto pb-1 scrollbar-hide"></div> <!></div></div>'),Je=p('<div class="card bg-base-100 shadow-xl"><div class="card-body gap-1 md:gap-2 p-4 md:p-6"><h2 class="card-title">Description <button class="btn btn-square btn-ghost ml-auto" aria-label="Edit Description"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></h2> <div class="ml-2 break-words prose prose-sm max-w-none prose-p:my-1 prose-ul:my-0 prose-li:my-0 prose-h1:my-0 prose-h2:my-0"><!></div></div></div>'),Qe=p('<span class="bg-base-200 rounded-lg px-0.5"> </span>'),Xe=p('<div class="flex flex-wrap gap-1"></div>'),Ye=p('<div class="p-1 text-sm text-base-content/70 bg-base-200/50 border border-base-content/10 rounded-b-lg"><span class="ml-2 text-base-content/60">↳ <span class="font-semibold">Description:</span></span> <span class="inline prose prose-sm prose-neutral prose-p:m-0 prose-strong:inline prose-em:inline prose-code:inline"><!></span></div>'),Ze=p('<div class="grid grid-cols-3 gap-4 px-4 py-3 bg-base-100 divide-x-[2px] divide-base-content/10 border border-base-content/10 rounded-t-lg"><div class="font-semibold"> </div> <div> </div> <div><!></div></div> <!>',1),ar=p('<div class="card bg-base-100 shadow-xl"><div class="card-body p-3 md:p-6"><h2 class="card-title ml-1">Chapters <button class="btn btn-ghost btn-sm ml-auto" aria-label="Edit Chapters"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></h2> <div class="overflow-x-auto"><div class="w-full border border-base-300 rounded-lg"><div class="grid grid-cols-3 gap-4 px-4 py-3 font-semibold bg-base-200 rounded-t-lg"><div>Chapter</div> <div>Characters</div> <div>Tags</div></div> <div class="divide-y divide-base-300"></div></div></div></div></div>'),tr=p('<div><span class="font-semibold text-base-content">Created:</span> <span> </span></div>'),er=p('<div><span class="font-semibold text-base-content">Last opened:</span> <span> </span></div>'),rr=p('<div><span class="font-semibold text-base-content">Last edited:</span> <span> </span></div>'),sr=p('<details class="collapse bg-base-100"><summary class="collapse-title font-semibold">Timestamps</summary> <div class="collapse-content text-sm"><div class="rounded-lg bg-base-200 p-3 text-xs text-gray-500 space-y-1"><!> <!> <!></div></div></details>'),ir=p('<div class="container mx-auto p-2 md:p-4 max-w-4xl space-y-2 md:space-y-6"><div class="card bg-base-100 shadow-xl"><div class="card-body p-4 md:p-6"><div class="flex flex-row md:flex-row gap-3 md:gap-5"><div class="flex-shrink-0"><!></div> <div class="flex-1 min-w-0 flex flex-col justify-center"><h1 class="text-2xl font-bold mb-2 whitespace-pre-wrap break-words" title="Title"> </h1> <!> <!> <div class="flex flex-wrap gap-1.5 md:gap-2 mt-2"><!> <!> <!></div> <!></div></div> <div><!> <!></div></div></div> <!> <!> <!> <!></div>'),nr=p('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),or=p('<!> <div class="min-h-screen bg-base-200"><div class="sticky top-0 z-50 navbar bg-base-100 shadow-lg"><div class="flex-none"><a class="btn btn-square btn-ghost" aria-label="Go back"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></a></div> <div class="flex-1"><span class="text-xl font-bold">Details</span></div> <div class="flex-none gap-2"><button class="btn btn-square btn-ghost" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="btn btn-square btn-ghost text-error" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <!> <!></div> <!>',1);function mr(v,d){Jt(d,!1);const N=()=>ie(ye,"$page",M),[M,H]=se(),k=aa(),P=aa(),Y=aa();let t=aa(null),w=aa(!1),_=aa(),V=aa(!1),D=aa(0),G=aa(null);function K(c){z(G,a(G)===c?null:c)}const h=["main","lead","mc","fmc","protagonist"];let J=aa("All");function $(c="All"){z(J,c),z(w,!0)}Ht(async()=>{z(_,parseInt(N().params.id)),await da(),await ya.markAsOpened(a(_))});async function da(){z(t,await ya.getEntryById(a(_))),z(D,a(t)?.rating??0)}async function ga(c){a(_)&&(z(D,c),await ya.updateEntryPartial(a(_),{rating:a(D)}),a(t)&&ee(t,a(t).rating=a(D)))}function ha(){history.length>1?window.history.back():pe("/")}async function wa(){z(w,!1),await da()}function ba(){z(w,!1)}let la=aa(!1);function xa(){z(la,!0)}async function pa(){await ya.deleteEntry(a(_)),z(la,!1),ha()}function it(){z(la,!1)}function nt(c){return za.parseInline(c)}function ot(c,C){const F=parseFloat(c),Q=parseFloat(C),X=!isNaN(F),ta=!isNaN(Q);return X&&!ta?-1:!X&&ta?1:X&&ta?F-Q:c.localeCompare(C,void 0,{numeric:!0,sensitivity:"base"})}function Ca(c){return c?new Date(c).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null}La(()=>a(t),()=>{z(k,a(t)?.characters?[...a(t).characters].sort((c,C)=>{const F=h.includes(c.role.toLowerCase())?0:1,Q=h.includes(C.role.toLowerCase())?0:1;return F-Q}):[])}),La(()=>(a(t),za),()=>{z(P,a(t)?.description?za.parse(a(t).description):"")}),La(()=>a(t),()=>{z(Y,(a(t)?.rows??[]).slice().sort((c,C)=>ot(c.ChapterSE,C.ChapterSE)))}),Qt(),Rt();var Fa=or();le("9y3fua",c=>{Yt(()=>{Zt.title=`${a(t),n(()=>a(t)?.title||"Loading...")??""} - lib`})});var Ia=ka(Fa);{var dt=c=>{var C=$e(),F=r(C),Q=o(r(F),4),X=r(Q),ta=o(X,2);e(Q),e(F),e(C),q("click",X,it),q("click",ta,pa),l(c,C)};g(Ia,c=>{a(la)&&c(dt)})}var Aa=o(Ia,2),ja=r(Aa),Ea=r(ja),lt=r(Ea);e(Ea);var Ba=o(Ea,4),Ra=r(Ba),vt=o(Ra,2);e(Ba),e(ja);var Ha=o(ja,2);{var ct=c=>{var C=Ce(),F=r(C),Q=o(F,2);e(C),x(()=>{sa(F,"src",(a(t),n(()=>a(t).coverImageUrl))),sa(F,"alt",(a(t),n(()=>a(t).title)))}),q("click",F,ne(function(X){oe.call(this,d,X)})),q("click",Q,()=>z(V,!1)),q("click",C,()=>z(V,!1)),l(c,C)};g(Ha,c=>{a(V)&&c(ct)})}var pt=o(Ha,2);{var ut=c=>{var C=ir(),F=r(C),Q=r(F),X=r(Q),ta=r(X),_t=r(ta);{var mt=i=>{var s=Ae();x(()=>{sa(s,"src",(a(t),n(()=>a(t).coverImageUrl))),sa(s,"alt",(a(t),n(()=>a(t).title)))}),q("click",s,()=>z(V,!0)),l(i,s)},ht=i=>{var s=je();l(i,s)};g(_t,i=>{a(t),n(()=>a(t).coverImageUrl)?i(mt):i(ht,!1)})}e(ta);var Pa=o(ta,2),Ta=r(Pa),wt=r(Ta,!0);e(Ta);var Oa=o(Ta,2);{var xt=i=>{var s=Ee(),f=r(s,!0);e(s),x(m=>T(f,m),[()=>(a(t),n(()=>a(t).alternativeTitles.join(", ")))]),l(i,s)};g(Oa,i=>{a(t),n(()=>a(t).alternativeTitles.length>0)&&i(xt)})}var qa=o(Oa,2);{var kt=i=>{var s=Ne();na(s,5,()=>(a(t),n(()=>a(t).badges)),oa,(f,m)=>{var b=Te(),S=r(b,!0);e(b),x(()=>T(S,a(m))),l(f,b)}),e(s),l(i,s)};g(qa,i=>{a(t),n(()=>a(t).badges.length>0)&&i(kt)})}var Na=o(qa,2),Ua=r(Na);{var yt=i=>{var s=Me(),f=r(s,!0);e(s),x(()=>T(f,(a(t),n(()=>a(t).category)))),q("click",s,()=>$("category")),l(i,s)};g(Ua,i=>{a(t),n(()=>a(t).category)&&i(yt)})}var Wa=o(Ua,2);{var $t=i=>{var s=Se(),f=r(s,!0);e(s),x(()=>T(f,(a(t),n(()=>a(t).dataType)))),l(i,s)};g(Wa,i=>{a(t),n(()=>a(t).dataType)&&i($t)})}var Ct=o(Wa,2);{var At=i=>{var s=Le(),f=o(r(s));e(s),x(()=>T(f,` ${ae(Xa),a(D),n(()=>Xa[a(D)])??""}`)),l(i,s)};g(Ct,i=>{a(t),n(()=>a(t).rating)&&i(At)})}e(Na);var jt=o(Na,2);{var Et=i=>{var s=De(),f=r(s);na(f,4,()=>n(()=>Array.from({length:5},(m,b)=>b+1)),oa,(m,b)=>{var S=ze(),I=ka(S);Ya(I);var U=o(I,2);Ya(U),x(()=>{Za(I,b*2-1),at(I,a(D)===b*2-1),sa(I,"aria-label",`${b-.5} star`),Za(U,b*2),at(U,a(D)===b*2),sa(U,"aria-label",`${b} star`)}),q("change",I,()=>ga(b*2-1)),q("change",U,()=>ga(b*2)),l(m,S)}),e(f),e(s),l(i,s)};g(jt,i=>{a(t),n(()=>a(t).rating)&&i(Et)})}e(Pa),e(X);var Va=o(X,2),Ga=r(Va);{var Tt=i=>{var s=Fe(),f=r(s,!0);e(s),x(m=>T(f,m),[()=>(a(t),n(()=>a(t).alternativeTitles.join(", ")))]),l(i,s)};g(Ga,i=>{a(t),n(()=>a(t).alternativeTitles.length>0)&&i(Tt)})}var Nt=o(Ga,2);{var Mt=i=>{var s=Be();na(s,5,()=>(a(t),n(()=>a(t).tags)),oa,(f,m)=>{var b=Ie(),S=r(b,!0);e(b),x(()=>T(S,a(m))),l(f,b)}),e(s),l(i,s)};g(Nt,i=>{a(t),n(()=>a(t).tags.length>0)&&i(Mt)})}e(Va),e(Q),e(F);var Ka=o(F,2);{var St=i=>{var s=Ke(),f=r(s),m=r(f),b=o(r(m));e(m);var S=o(m,2);na(S,5,()=>a(k),oa,(U,u)=>{var y=Oe(),A=r(y);{var j=W=>{var Z=Re();x(()=>{sa(Z,"src",(a(u),n(()=>a(u).Image))),sa(Z,"alt",(a(u),n(()=>a(u).Name)))}),l(W,Z)},L=W=>{var Z=He();l(W,Z)};g(A,W=>{a(u),n(()=>a(u).Image)?W(j):W(L,!1)})}var O=o(A,2),B=r(O);{var _a=W=>{var Z=Pe();l(W,Z)},va=te(()=>(a(u),n(()=>h.includes(a(u).role.toLowerCase()))));g(B,W=>{a(va)&&W(_a)})}var ua=o(B,2),fa=r(ua,!0);e(ua),e(O),e(y),x(()=>T(fa,(a(u),n(()=>a(u).Name)))),q("click",y,()=>K(a(u).Name)),l(U,y)}),e(S);var I=o(S,2);na(I,1,()=>a(k),oa,(U,u)=>{var y=Bt(),A=ka(y);{var j=L=>{var O=Ge(),B=r(O),_a=o(r(B));e(B);var va=o(B,2);{var ua=E=>{var R=qe(),ra=o(r(R));e(R),x(()=>T(ra,` ${a(u),n(()=>a(u).role)??""}`)),l(E,R)};g(va,E=>{a(u),n(()=>a(u).role)&&E(ua)})}var fa=o(va,2);{var W=E=>{var R=Ue(),ra=o(r(R));e(R),x(ca=>T(ra,` ${ca??""}`),[()=>(a(u),n(()=>a(u).alternativeNames.join(", ")))]),l(E,R)};g(fa,E=>{a(u),n(()=>a(u).alternativeNames.length>0)&&E(W)})}var Z=o(fa,2);{var ea=E=>{var R=Ve(),ra=o(r(R));na(ra,1,()=>(a(u),n(()=>a(u).tags)),oa,(ca,Ma)=>{var Sa=We(),It=r(Sa,!0);e(Sa),x(()=>T(It,a(Ma))),l(ca,Sa)}),e(R),l(E,R)};g(Z,E=>{a(u),n(()=>a(u).tags.length>0)&&E(ea)})}e(O),x(()=>T(_a,` ${a(u),n(()=>a(u).Name)??""}`)),_e(3,O,()=>xe,()=>({duration:200})),l(L,O)};g(A,L=>{a(G),a(u),n(()=>a(G)===a(u).Name&&(a(u).role||a(u).alternativeNames.length>0||a(u).tags.length>0))&&L(j)})}l(U,y)}),e(f),e(s),q("click",b,()=>$("characters")),l(i,s)};g(Ka,i=>{a(t),n(()=>a(t).characters.length>0)&&i(St)})}var Ja=o(Ka,2);{var Lt=i=>{var s=Je(),f=r(s),m=r(f),b=o(r(m));e(m);var S=o(m,2),I=r(S);tt(I,()=>a(P)),e(S),e(f),e(s),q("click",b,()=>$("description")),l(i,s)};g(Ja,i=>{a(t),n(()=>a(t).description)&&i(Lt)})}var Qa=o(Ja,2);{var zt=i=>{var s=ar(),f=r(s),m=r(f),b=o(r(m));e(m);var S=o(m,2),I=r(S),U=o(r(I),2);na(U,5,()=>a(Y),oa,(u,y)=>{var A=Ze(),j=ka(A),L=r(j),O=r(L,!0);e(L);var B=o(L,2),_a=r(B,!0);e(B);var va=o(B,2),ua=r(va);{var fa=ea=>{var E=Xe();na(E,5,()=>(a(y),n(()=>a(y).Tags)),oa,(R,ra)=>{var ca=Qe(),Ma=r(ca,!0);e(ca),x(()=>T(Ma,a(ra))),l(R,ca)}),e(E),l(ea,E)};g(ua,ea=>{a(y),n(()=>a(y).Tags.length>0)&&ea(fa)})}e(va),e(j);var W=o(j,2);{var Z=ea=>{var E=Ye(),R=o(r(E),2),ra=r(R);tt(ra,()=>(a(y),n(()=>nt(a(y).Description)))),e(R),e(E),l(ea,E)};g(W,ea=>{a(y),n(()=>a(y).Description)&&ea(Z)})}x(()=>{T(O,(a(y),n(()=>a(y).ChapterSE))),T(_a,(a(y),n(()=>a(y).Characters)))}),l(u,A)}),e(U),e(I),e(S),e(f),e(s),q("click",b,()=>$("chapters")),l(i,s)};g(Qa,i=>{a(t),n(()=>a(t).rows.length>0)&&i(zt)})}var Dt=o(Qa,2);{var Ft=i=>{var s=sr(),f=o(r(s),2),m=r(f),b=r(m);{var S=A=>{var j=tr(),L=o(r(j),2),O=r(L,!0);e(L),e(j),x(B=>T(O,B),[()=>(a(t),n(()=>Ca(a(t).createdAt)))]),l(A,j)};g(b,A=>{a(t),n(()=>a(t).createdAt)&&A(S)})}var I=o(b,2);{var U=A=>{var j=er(),L=o(r(j),2),O=r(L,!0);e(L),e(j),x(B=>T(O,B),[()=>(a(t),n(()=>Ca(a(t).openedAt)))]),l(A,j)};g(I,A=>{a(t),n(()=>a(t).openedAt)&&A(U)})}var u=o(I,2);{var y=A=>{var j=rr(),L=o(r(j),2),O=r(L,!0);e(L),e(j),x(B=>T(O,B),[()=>(a(t),n(()=>Ca(a(t).editedAt)))]),l(A,j)};g(u,A=>{a(t),n(()=>a(t).editedAt)&&A(y)})}e(m),e(f),e(s),l(i,s)};g(Dt,i=>{a(t),n(()=>a(t).createdAt||a(t).openedAt||a(t).editedAt)&&i(Ft)})}e(C),x(()=>T(wt,(a(t),n(()=>a(t).title)))),l(c,C)},ft=c=>{var C=nr();l(c,C)};g(pt,c=>{a(t)?c(ut):c(ft,!1)})}e(Aa);var gt=o(Aa,2);{var bt=c=>{de(c,{get entryId(){return a(_)},get editSection(){return a(J)},$$events:{save:wa,cancel:ba}})};g(gt,c=>{a(w)&&c(bt)})}x(()=>sa(lt,"href",`${ce??""}/`)),q("click",Ra,()=>$("All")),q("click",vt,xa),l(v,Fa),Xt(),H()}export{mr as component,_r as universal};

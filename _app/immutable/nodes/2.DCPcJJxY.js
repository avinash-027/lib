import{c as ht,a as C,f as j,t as Tt}from"../chunks/nDTj7mGi.js";import{i as Me}from"../chunks/B8tiu_hu.js";import{e as Vt,u as z,h as Rt,D as De,E as Oe,G as $e,z as te,I as a,K as l,y as e,J as t,F as K,Q as ta,L as Lt,M as Pt,O as s,P as A,aT as aa,aD as et,bd as pt,be as Te,bf as la,$ as sa}from"../chunks/DAkF8UHE.js";import{h as ra}from"../chunks/CEBlMecO.js";import{d as na,w as It,c as it,o as Ot}from"../chunks/C9gZSnLM.js";import{s as de,e as c,r as oa}from"../chunks/Dp8iI5pk.js";import{p as ge,i as H,a as Ae,s as ct}from"../chunks/DNRQKU6i.js";import{t as ia,d as oe,e as Ne,j as Ie,s as wt,h as he,S as V,r as ne,k as ee,l as Gt,a as Ge,b as tt,f as Yt,g as ca,i as Be,m as Ft,R as Ht,n as Pe,c as da,o as qt,E as va}from"../chunks/DZYMlQVP.js";import{g as ua,b as ba}from"../chunks/BYMkt1nZ.js";import{b as Bt}from"../chunks/3hUq8g6e.js";function pa(d,n,o){Vt(()=>{var u=z(()=>n(d,o?.())||{});if(u?.destroy)return()=>u.destroy()})}function Xt(d,n,o,u){var p=d.__style;if(Rt||p!==n){var g=ia(n);(!Rt||g!==d.getAttribute("style"))&&(g==null?d.removeAttribute("style"):d.style.cssText=g),d.__style=n}return u}function ga(){const{subscribe:d,set:n,update:o}=It([]);return{subscribe:d,set:n,update:o,load:async()=>{const u=await oe.getAllEntries();return n(u),u},add:async u=>{const p=await oe.addEntry(u);o(g=>[...g,{...u,id:p}])},updateEntry:async(u,p)=>{await oe.updateEntry(u,p),o(g=>g.map(f=>f.id===u?{...f,...p}:f))},deleteEntry:async u=>{await oe.deleteEntry(u),o(p=>p.filter(g=>g.id!==u))}}}const Nt=ga(),We=It(""),Ve=It("default"),ot=Mt("libsettings:selectedCategory","All"),gt=Mt("libsettings:sortField","createdAt"),ft=Mt("libsettings:sortOrder","desc"),Wt=Mt("lib:gridCols",4),fa=na([Nt,ot,We,Ve,gt,ft],([d,n,o,u,p,g])=>{let f=[...d];if(n!=="All"&&(f=f.filter(b=>b.category===n)),o){const b=o.toLowerCase();f=f.filter(v=>{switch(u){case"a":return v.alternativeTitles.join(" ").toLowerCase().includes(b);case"t":return v.tags.join(" ").toLowerCase().includes(b);case"b":return v.badges.join(" ").toLowerCase().includes(b);case"c":return v.characters.map(M=>M.Name).join(" ").toLowerCase().includes(b);default:return v.title.toLowerCase().includes(b)||v.alternativeTitles.join(" ").toLowerCase().includes(b)}})}return f=f.sort((b,v)=>{const M=b[p]??"",T=v[p]??"";return g==="asc"?M>T?1:-1:M<T?1:-1}),f});function Mt(d,n){const o=localStorage.getItem(d),{subscribe:u,set:p,update:g}=It(o?JSON.parse(o):n);return{subscribe:u,set:f=>{localStorage.setItem(d,JSON.stringify(f)),p(f)},update:f=>{g(b=>{const v=f(b);return localStorage.setItem(d,JSON.stringify(v)),v})}}}const ma="autoBackupEnabled",ha="autoBackupDirHandle";let mt=null;async function wa(){const d=await window.showDirectoryPicker();await d.requestPermission({mode:"readwrite"}),localStorage.setItem("autoBackupEnabled","true"),localStorage.setItem("autoBackupFolderName",d.name),localStorage.setItem("autoBackupDirHandle",JSON.stringify(d)),Jt(d),await Zt(d)}function xa(){localStorage.removeItem("autoBackupEnabled"),localStorage.removeItem("autoBackupDirHandle"),localStorage.removeItem("autoBackupFolderName"),mt&&clearTimeout(mt)}function _a(){if(localStorage.getItem(ma)!=="true")return;const d=localStorage.getItem(ha);if(!d)return;const n=JSON.parse(d);Jt(n)}async function Zt(d){const n=await oe.exportToJSON(),u=await(await d.getFileHandle("lib-autobackup.json",{create:!0})).createWritable();await u.write(JSON.stringify(n,null,2)),await u.close(),console.log("‚úÖ Auto backup saved at",new Date().toLocaleString())}function Jt(d){mt&&clearTimeout(mt);const n=new Date,o=new Date;o.setHours(24,0,0,0);const u=o.getTime()-n.getTime();mt=window.setTimeout(async()=>{await Zt(d),Jt(d)},u)}function ya(d){const n=new IntersectionObserver(([o],u)=>{if(o.isIntersecting){const p=d.dataset.src;p&&(d.src=p),d.classList.add("lozad-loaded"),u.unobserve(d)}});return n.observe(d),{destroy(){n.unobserve(d)}}}var ka=j('<div class="px-1 w-full opacity-80 text-sm h-65 md:h-55 flex items-end justify-center text-base-content/50"><div>No entries found. <ul class="list-disc list-inside mt-1"><li>Add new entries by clicking the <b>"+"</b> button.</li> <li>To Manage categories, click the "Categories" button in the <b>Drawer Menu</b>.</li></ul></div></div>'),Ca=j('<button type="button"><!></button>'),Sa=j('<img class="w-full h-full object-cover lozad"/>'),Aa=j('<div class="w-full h-full flex items-center justify-center text-base-content/20"><!></div>'),Ea=j('<span class="absolute top-1.5 left-1 rounded-2xl text-xs md:text-sm bg-info text-base-300 px-1 py-0 font-semibold"> </span>'),Ta=j('<div class="relative"><!> <button class="card bg-base-100 shadow-xl cursor-pointer hover:shadow-2xl transition-shadow w-full h-full"><figure class="aspect-[3/4] bg-base-300"><!></figure> <div class="card-body p-2"><!> <h3 class="card-title text-xs sm:text-sm line-clamp-2"> </h3></div></button></div>'),Na=j("<div></div>");function Ia(d,n){De(n,!1);let o=ge(n,"entries",24,()=>[]),u=ge(n,"selectionMode",8,!1),p=ge(n,"selectedEntries",24,()=>new Set),g=ge(n,"gridCols",8,4);const f=it();function b(x){!u()&&x!==void 0&&ua(`${ba}/detail/${x}`)}function v(x){f("toggleSelect",x)}const M={2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5"};Me();var T=ht(),D=Oe(T);{var N=x=>{var S=ka();C(x,S)},O=x=>{var S=Na();Ne(S,5,o,_=>_.id,(_,w)=>{var y=Ta(),B=a(y);{var k=R=>{var E=Ca();let h;var X=a(E);{var ve=Z=>{var ue=ht(),fe=Oe(ue);he(fe,()=>(te(V),z(()=>V.selectTick))),C(Z,ue)},Q=ta(()=>(te(p()),e(w),z(()=>p().has(e(w).id))));H(X,Z=>{e(Q)&&Z(ve)})}t(E),K(Z=>h=Ie(E,1,"rounded-xl absolute inset-0 z-10 flex items-center justify-center bg-black/20 cursor-pointer transition-opacity",null,h,Z),[()=>({selected:p().has(e(w).id)})]),c("click",E,Z=>{Z.stopPropagation(),v(e(w).id)}),C(R,E)};H(B,R=>{u()&&R(k)})}var $=l(B,2),J=a($),P=a(J);{var L=R=>{var E=Sa();pa(E,h=>ya?.(h)),K(()=>{wt(E,"src",(e(w),z(()=>e(w).coverImageUrl))),wt(E,"alt",(e(w),z(()=>e(w).title)))}),oa(E),C(R,E)},G=R=>{var E=Aa(),h=a(E);he(h,()=>(te(V),z(()=>V.imgIcon))),t(E),C(R,E)};H(P,R=>{e(w),z(()=>e(w).coverImageUrl)?R(L):R(G,!1)})}t(J);var I=l(J,2),q=a(I);{var le=R=>{var E=Ea(),h=a(E,!0);t(E),K(()=>de(h,(e(w),z(()=>e(w).rating)))),C(R,E)};H(q,R=>{e(w),z(()=>e(w).rating!==null&&e(w).rating>0)&&R(le)})}var ae=l(q,2),Y=a(ae,!0);t(ae),t(I),t($),t(y),K(()=>de(Y,(e(w),z(()=>e(w).title)))),c("click",$,()=>b(e(w).id)),C(_,y)}),t(S),K(()=>Ie(S,1,(te(g()),z(()=>`grid gap-2 ${M[g()]} md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10`)))),C(x,S)};H(D,x=>{te(o()),z(()=>o().length===0)?x(N):x(O,!1)})}C(d,T),$e()}var Ma=j('<div class="text-xs text-info mt-2">Searching in: <!> <!> <!> <!></div>'),Da=j(`<div class="bg-base-200 px-4 pt-3 pb-1 shadow-lg"><div class="flex gap-2 items-center"><input type="text" placeholder="Search ('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters)" class="input input-bordered flex-1"/> <button class="btn btn-square btn-ghost" aria-label="Close search"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!></div>`);function $a(d,n){De(n,!1);const o=()=>Ae(Ve,"$searchMode",u),[u,p]=ct();let g=ge(n,"show",12,!1),f=A(""),b=A();async function v(){await aa(),e(b)?.focus()}function M(){s(f,""),We.set(""),Ve.set("default"),g(!1)}Lt(()=>te(g()),()=>{g()&&v()}),Lt(()=>(e(f),We),()=>{const _=e(f).trim(),w=_.toLowerCase();w.startsWith("a:")?(Ve.set("a"),We.set(_.slice(2))):w.startsWith("t:")?(Ve.set("t"),We.set(_.slice(2))):w.startsWith("b:")?(Ve.set("b"),We.set(_.slice(2))):w.startsWith("c:")?(Ve.set("c"),We.set(_.slice(2))):(Ve.set("default"),We.set(_))}),Pt(),Me();var T=Da(),D=a(T),N=a(D);ne(N),Bt(N,_=>s(b,_),()=>e(b));var O=l(N,2);t(D);var x=l(D,2);{var S=_=>{var w=Ma(),y=l(a(w));{var B=I=>{var q=Tt("alternative titles");C(I,q)};H(y,I=>{o()==="a"&&I(B)})}var k=l(y,2);{var $=I=>{var q=Tt("tags");C(I,q)};H(k,I=>{o()==="t"&&I($)})}var J=l(k,2);{var P=I=>{var q=Tt("badges");C(I,q)};H(J,I=>{o()==="b"&&I(P)})}var L=l(J,2);{var G=I=>{var q=Tt("characters");C(I,q)};H(L,I=>{o()==="c"&&I(G)})}t(w),C(_,w)};H(x,_=>{o()!=="default"&&_(S)})}t(T),ee(N,()=>e(f),_=>s(f,_)),c("click",O,M),C(d,T),$e(),p()}var ja=j('<div class="fixed inset-0 bg-black/50 z-150 flex items-end" role="presentation"><div class="bg-base-100 w-full rounded-t-2xl p-6 max-h-[80vh] overflow-auto" role="dialog" tabindex="-1"><h3 class="text-2xl font-bold mb-6">Sort & Filter</h3> <div class="form-control mb-4"><label class="label" for="sort-field"><span class="label-text font-semibold">Sort By</span></label> <select id="sort-field" class="select select-bordered w-full"><option>Title (A-Z)</option><option>Rating</option><option>Last Edited</option><option>Date Created</option><option>Last Opened</option></select></div> <div class="form-control mb-6"><label class="label" for="sort-order"><span class="label-text font-semibold">Order</span></label> <div class="flex gap-2"><button>Ascending</button> <button>Descending</button></div></div> <div class="flex gap-2"><button class="btn btn-outline flex-1">Reset</button> <button class="btn btn-primary flex-1">Apply</button></div></div></div>');function La(d,n){De(n,!1);const o=()=>Ae(gt,"$sortField",p),u=()=>Ae(ft,"$sortOrder",p),[p,g]=ct();let f=ge(n,"show",12,!1),b=A(o()),v=A(u());gt.subscribe(x=>s(b,x)),ft.subscribe(x=>s(v,x));function M(){gt.set(e(b)),ft.set(e(v)),f(!1)}function T(){s(b,"title"),s(v,"asc"),gt.set(e(b)),ft.set(e(v)),f(!1)}Me();var D=ht(),N=Oe(D);{var O=x=>{var S=ja(),_=a(S),w=l(a(_),2),y=l(a(w),2),B=a(y);B.value=B.__value="title";var k=l(B);k.value=k.__value="rating";var $=l(k);$.value=$.__value="editedAt";var J=l($);J.value=J.__value="createdAt";var P=l(J);P.value=P.__value="openedAt",t(y),t(w);var L=l(w,2),G=l(a(L),2),I=a(G);let q;var le=l(I,2);let ae;t(G),t(L);var Y=l(L,2),R=a(Y),E=l(R,2);t(Y),t(_),t(S),K(()=>{q=Ie(I,1,"btn flex-1",null,q,{"btn-primary":e(v)==="asc"}),wt(I,"aria-pressed",e(v)==="asc"),ae=Ie(le,1,"btn flex-1",null,ae,{"btn-primary":e(v)==="desc"}),wt(le,"aria-pressed",e(v)==="desc")}),Gt(y,()=>e(b),h=>s(b,h)),c("click",I,()=>s(v,"asc")),c("click",le,()=>s(v,"desc")),c("click",R,T),c("click",E,M),c("click",_,Ge(function(h){tt.call(this,n,h)})),c("keydown",_,function(h){tt.call(this,n,h)}),c("click",S,()=>f(!1)),c("keydown",S,function(h){tt.call(this,n,h)}),C(x,S)};H(N,x=>{f()&&x(O)})}C(d,D),$e(),g()}const Ba=`\`\`\`json\r
// Example\r
[\r
  {\r
    "id": 2,\r
    "title": "Solo Leveling",\r
    "alternativeTitles": [ "Only I Level Up", "Na Honja Level Up" ],\r
    "coverImageUrl": "https://example.com/covers/solo-leveling.jpg",\r
    "description": "In a world where gates connect Earth to deadly dungeons, the weakest hunter awakens a mysterious system that allows him to level up alone.",\r
    "badges": ["Manhwa", "Action", "Fantasy", "Completed"],\r
    "tags": [ "gates", "hunters", "dungeons", "system", "shadows", "awakening"],\r
    "rating": null,\r
    "createdAt": "2024-12-15T08:20:00.000Z",\r
    "openedAt": "2025-02-07T14:10:30.000Z",\r
    "editedAt": "2025-02-07T18:45:10.000Z",\r
    "characters": [\r
      {\r
        "Name": "Sung Jin-Woo",\r
        "role": "Main",\r
        "Image": "https://example.com/characters/sung-jin-woo.png",\r
        "alternativeNames": [ "Jinwoo"],\r
        "tags": ["MC", "Solo-Player"],\r
        "description": ""\r
      },\r
      {\r
        "Name": "Cha Hae-In",\r
        "role": "Main",\r
        "Image": "https://example.com/characters/cha-hae-in.png"\r
      },\r
      {\r
        "Name": "Go Gun-Hee",\r
        "role": "supporting",\r
        "Image": "https://example.com/characters/go-gun-hee.png"\r
      }\r
    ],\r
    "rows": [\r
      {\r
        "ChapterSE": "Episode 1 ‚Äì The Weakest Hunter",\r
        "Description": "E-rank hunter Sung Jin-Woo barely survives a low-level dungeon while struggling to pay his family‚Äôs medical bills.",\r
        "Tags": ["introduction", "low-rank", "desperation"],\r
        "Characters": "Sung Jin-Woo"\r
      },\r
      {\r
        "ChapterSE": "Episode 2 ‚Äì Double Dungeon",\r
        "Description": "A hidden dungeon reveals a deadly trial where survival depends on following cryptic rules.",\r
        "Tags": ["double-dungeon", "statues", "death"],\r
        "Characters": "Sung Jin-Woo, Dungeon Party"\r
      },\r
      {\r
        "ChapterSE": "Episode 3 ‚Äì The System",\r
        "Description": "After facing death, Jin-Woo awakens to a mysterious system that only he can see.",\r
        "Tags": ["awakening", "system", "rebirth"],\r
        "Characters": "Sung Jin-Woo"\r
      }\r
    ],\r
    "category": "Manhwa",\r
    "dataType": "json"\r
  },\r
  // ...\r
]\r
\`\`\``;var Oa=j('<div role="alert" class="fixed bottom-2 left-2 z-300 alert alert-info alert-outline bg-base-100"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 shrink-0 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>');function zt(d,n){let o=ge(n,"showAlert",8,!1),u=ge(n,"message",8,"");var p=ht(),g=Oe(p);{var f=b=>{var v=Oa(),M=l(a(v),2),T=a(M,!0);t(M),t(v),K(()=>de(T,u())),C(b,v)};H(g,b=>{o()&&b(f)})}C(d,p)}var Ja=j('<div class="text-xs text-gray-500 mt-1 pl-1"> <br/>‚è∞ Every night at 12:00 AM</div>'),za=j('<button class="btn btn-md btn-ghost rounded-full flex justify-between py-3 px-0"><span>üïõ Auto Backup</span> <input type="checkbox" class="toggle toggle-primary"/></button> <!> <!>',1);function Ua(d,n){De(n,!1);let o=A(localStorage.getItem("autoBackupEnabled")==="true"),u=A(localStorage.getItem("autoBackupFolderName")),p=A(!1),g=A("");async function f(){try{e(o)?(xa(),s(o,!1),s(u,null),s(g,"Auto backup disabled")):(await wa(),s(o,!0),s(u,localStorage.getItem("autoBackupFolderName")),s(g,"Auto backup enabled (every night 12:00)"))}catch{s(o,!1),s(g,"Backup permission denied")}s(p,!0),setTimeout(()=>s(p,!1),1500)}Me();var b=za(),v=Oe(b),M=l(a(v),2);ne(M),t(v);var T=l(v,2);{var D=O=>{var x=Ja(),S=a(x);et(2),t(x),K(()=>de(S,`üìÅ ${e(u)??""}/lib-autobackup.json`)),C(O,x)};H(T,O=>{e(o)&&e(u)&&O(D)})}var N=l(T,2);zt(N,{get showAlert(){return e(p)},get message(){return e(g)}}),K(()=>Yt(M,e(o))),c("click",v,f),C(d,b),$e()}var Ra=j('<div class="fixed inset-0 bg-black/50 z-150 flex" role="presentation"><div class="bg-base-100 w-80 h-full shadow-xl p-6 flex flex-col justify-between" role="dialog" tabindex="-1"><div><h2 class="text-2xl font-bold mb-6">Menu <button class="float-right cursor-pointer" aria-label="Close menu" type="button"><!></button></h2> <ul class="menu bg-base-200 rounded-box gap-1 md:gap-3"><li><button aria-label="Import JSON" class="btn btn-md btn-ghost"><!> Import JSON</button></li> <li><button aria-label="Export data" class="btn btn-md btn-ghost"><!> Export JSON</button></li> <li><button class="btn btn-md btn-ghost" aria-label="Export Markdown"><!> Export Md</button></li> <li><button aria-label="Open categories" class="btn btn-md btn-ghost"><!> Categories</button></li> <li><button class="btn btn-md btn-ghost">JSON Format</button></li></ul></div> <dialog class="modal"><div class="modal-box max-w-3xl w-85 md:w-full h-auto max-h-[65vh]"><form method="dialog"><button type="button" aria-label="CloseJSONmodal" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2 text-lg p-5"><!></button></form> <h3 class="font-bold mb-2">Import JSON Structure</h3> <div class="prose max-w-full overflow-auto text-sm"><!></div></div></dialog> <div class="text-sm text-gray-500"><!> <div class="divider"></div> <p class="font-semibold my-4">ü§ñ AI √ó <a href="https://github.com/avinash-027/" target="_blank" class="link link-primary no-underline">User-A027</a> üë®‚Äçüíª</p></div></div></div>'),Fa=j('<!> <!> <input type="file" accept=".json" class="hidden"/>',1);function Ha(d,n){De(n,!1);let o=ge(n,"show",12,!1),u=A(""),p=A(!1);const g=it();let f=A();function b(){e(f).click()}function v(B){const $=B.target.files?.[0];if(!$)return;const J=new FileReader;J.onload=P=>{try{const L=JSON.parse(P.target?.result),G=Array.isArray(L)?L:[L];g("import",G)}catch{s(u,"Invalid JSON file"),s(p,!0),setTimeout(()=>{s(p,!1)},2e3)}},J.readAsText($)}function M(){g("export")}let T=ca.parse(Ba),D=A();function N(){e(D).showModal()}function O(){e(D).close()}Me();var x=Fa(),S=Oe(x);zt(S,{get showAlert(){return e(p)},get message(){return e(u)}});var _=l(S,2);{var w=B=>{var k=Ra(),$=a(k),J=a($),P=a(J),L=l(a(P)),G=a(L);he(G,()=>(te(V),z(()=>V.circleClose))),t(L),t(P);var I=l(P,2),q=a(I),le=a(q),ae=a(le);he(ae,()=>(te(V),z(()=>V.import))),et(),t(le),t(q);var Y=l(q,2),R=a(Y),E=a(R);he(E,()=>(te(V),z(()=>V.export))),et(),t(R),t(Y);var h=l(Y,2),X=a(h),ve=a(X);he(ve,()=>(te(V),z(()=>V.export))),et(),t(X),t(h);var Q=l(h,2),Z=a(Q),ue=a(Z);he(ue,()=>(te(V),z(()=>V.category))),et(),t(Z),t(Q);var fe=l(Q,2),se=a(fe);t(fe),t(I),t(J);var W=l(J,2),re=a(W),ke=a(re),Ce=a(ke),ie=a(Ce);he(ie,()=>(te(V),z(()=>V.circleClose))),t(Ce),t(ke);var be=l(ke,4),je=a(be);he(je,()=>T),t(be),t(re),t(W),Bt(W,ce=>s(D,ce),()=>e(D));var Se=l(W,2),Je=a(Se);Ua(Je,{}),et(4),t(Se),t($),t(k),c("click",L,()=>o(!1)),c("click",le,b),c("click",R,M),c("click",X,()=>g("exportMd")),c("click",Z,()=>g("showCategories")),c("click",se,N),c("click",Ce,O),c("click",W,ce=>{ce.target===e(D)&&O()}),c("click",$,Ge(function(ce){tt.call(this,n,ce)})),c("keydown",$,Ge(function(ce){tt.call(this,n,ce)})),c("click",k,()=>o(!1)),c("keydown",k,ce=>ce.key==="Escape"&&o(!1)),C(B,k)};H(_,B=>{o()&&B(w)})}var y=l(_,2);Bt(y,B=>s(f,B),()=>e(f)),c("change",y,v),C(d,x),$e()}var qa=j('<option class="border border-base-200"> </option>'),Wa=j("<span>|</span>"),Va=j("<span> </span>"),Pa=j('<div class="flex gap-2 flex-wrap mb-2 p-2 rounded-lg bg-base-200"><div class="flex gap-2"><label class="floating-label w-full" for="charName"><span><span class="label-text">Name **</span></span> <input type="text" id="charName" placeholder="Name *" class="input input-sm w-full md:w-100"/></label> <label class="floating-label w-full" for="charRole"><span><span class="label-text">Role</span></span> <input type="text" id="charRole" placeholder="role" class="input input-sm w-full md:w-93"/></label> <button class="btn btn-sm btn-square btn-error btn-outline">‚úï</button></div> <label class="floating-label w-full" for="charImgUrl"><span><span class="label-text">Image URL</span></span> <input type="text" id="charImgUrl" placeholder="Img URL" class="input input-sm w-full"/></label> <label class="floating-label w-full sm:w-100" for="charAltNames"><span><span class="label-text">alternativeNames</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <input id="charAltNames" placeholder="Alternative Names [Ex: Name01, name-01]" class="input input-sm w-full"/></label> <label class="floating-label w-full sm:w-1/2" for="charTags"><span><span class="label-text">char-Tags</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <input id="charTags" placeholder="Tags [Ex: Hero, Villain]" class="input input-sm w-full"/></label> <label class="floating-label w-full" for="charDescription"><span><span class="label-text">Description</span></span> <textarea id="charDescription" placeholder="Description" class="textarea textarea-bordered w-full"></textarea></label></div>'),Ga=j('<div class="card bg-base-200 p-4"><div class="flex gap-2 mb-2"><label class="floating-label w-full"><span>Chapter *</span> <input type="text" placeholder="Chapter (e.g., 1-5)" class="input input-bordered w-full input-sm flex-1"/></label> <button class="btn btn-square btn-error btn-outline btn-sm"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-4 h-4 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <label class="floating-label w-full"><span>Description</span> <textarea placeholder="Description" class="textarea textarea-bordered w-full textarea-sm mb-2"></textarea></label> <label class="floating-label w-full"><span>Tags (comma separated)</span> <input type="text" placeholder="Tags (comma separated)" class="input input-bordered w-full input-sm mb-2"/></label> <label class="floating-label w-full"><span>Characters</span> <input type="text" placeholder="Characters" class="input input-bordered w-full input-sm"/></label></div>'),Ya=j('<div class="fixed inset-0 bg-black/50 z-150 flex items-center justify-center p-4"><div class="bg-base-100 w-full max-w-4xl max-h-[90vh] overflow-auto rounded-lg shadow-xl"><div class="bg-base-100 border-b border-base-300 p-4 flex justify-between items-center"><h2 class="text-2xl font-bold"> </h2> <button class="btn btn-square btn-ghost btn-sm"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-4"><div class="form-control"><label for="newtitle" class="floating-label"><span>Title <span class="label-text-alt text-info italic">: required</span></span> <input id="newtitle" type="text" placeholder="Title" class="input input-bordered w-full" required=""/></label></div> <div class="form-control"><label for="newAltTitles" class="floating-label"><span><span class="label-text">Alternative Titles</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <input id="newAltTitles" type="text" placeholder="Alternative Titles [Ex: Title1, Title2]" class="input input-bordered w-full"/></label></div> <div class="form-control"><label for="newCoverImg" class="floating-label"><span class="label-text">Cover Image URL</span> <input id="newCoverImg" type="text" placeholder="Cover Image URL: Web Img Link" class="input input-bordered w-full"/></label></div> <div class="form-control"><label class="floating-label"><span class="label-text">Description</span> <textarea placeholder="Description" class="textarea textarea-bordered w-full h-24"></textarea></label></div> <div class="form-control"><label for="newBadges" class="floating-label"><span><span class="label-text">Badges</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <textarea id="newBadges" placeholder="Badges [Ex: Completed, Ongoing, Author, Artist, Favorite]" class="textarea textarea-bordered w-full"></textarea></label></div> <div class="form-control"><label for="newTags" class="floating-label"><span><span class="label-text">Tags</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <textarea id="newTags" placeholder="Tags [Ex: Themes, Genres]" class="textarea textarea-bordered w-full"></textarea></label></div> <div class="form-control"><label class="floating-label"><span class="label-text font-semibold">Category</span></label> <select class="select select-bordered w-full"><option class="border border-base-content/20 hover:bg-base-200">All</option><!></select></div> <div class="form-control"><label class="flex flex-wrap gap-2 justify-between"><span><span class="label-text font-semibold">Rating <span class="text-info">(0‚Äì10)</span></span></span> <div class="text-xs md:text-sm text-info"><span class="font-semibold">Value:</span> </div></label> <div class="w-full max-w-xs"><input type="range" min="0" max="10" step="1" class="range range-xs range-info"/> <div class="flex justify-between px-2.5 mt-1 text-xs"></div> <div class="flex justify-between px-2.5 mt-1 text-xs"></div></div></div> <div class="divider">Characters</div> <div class="space-y-2"><!> <button class="btn btn-outline btn-sm">+ Add Character</button></div> <div class="divider">Chapters</div> <div class="space-y-2"><!> <button class="btn btn-outline btn-sm">+ Add Chapter</button></div></div> <div class="sticky bottom-0 bg-base-100 border-t border-base-300 p-4 flex gap-2 justify-end"><button class="btn btn-outline">Cancel</button> <button class="btn btn-primary">Save</button></div></div></div>');function Xa(d,n){De(n,!1);const o=()=>Ae(Pe,"$categories",u),[u,p]=ct();let g=ge(n,"entryId",8,null);const f=it();let b=A(""),v=A(""),M=A(""),T=A(""),D=A(""),N=A(0),O=A(""),x=A("All"),S=A([]),_=A([]);Ot(async()=>{if(g()!==null){const m=await oe.getEntryById(g());m&&(s(b,m.title),s(v,m.alternativeTitles.join(", ")),s(M,m.coverImageUrl||""),s(T,m.description),s(D,m.badges.join(", ")),s(N,Number(m.rating)),s(O,m.tags.join(", ")),s(x,m.category),s(S,m.characters.map(r=>({...r,_alternativeNamesString:(r.alternativeNames??[]).join(", "),_tagsString:(r.tags??[]).join(", ")}))),s(_,m.rows.map(r=>({...structuredClone(r),_tagsText:r.Tags.join(", ")}))))}});function w(){s(S,[...e(S),{Name:"",Image:"",role:"",alternativeNames:[],tags:[],description:"",_alternativeNamesString:"",_tagsString:""}])}function y(m){s(S,e(S).filter((r,F)=>F!==m))}function B(){s(_,[...e(_),{ChapterSE:"",Description:"",Characters:"",_tagsText:""}])}function k(m){s(_,e(_).filter((r,F)=>F!==m))}async function $(){const m={title:e(b),alternativeTitles:e(v).split(",").map(r=>r.trim()).filter(Boolean),coverImageUrl:e(M)||null,description:e(T),badges:e(D).split(",").map(r=>r.trim()).filter(Boolean),rating:Number(e(N)),createdAt:null,openedAt:null,editedAt:null,tags:e(O).split(",").map(r=>r.trim()).filter(Boolean),category:e(x)||"All",dataType:"json",characters:e(S).filter(r=>r.Name).map(r=>({Name:r.Name,Image:r.Image,role:r.role,description:r.description,alternativeNames:(r._alternativeNamesString??"").split(",").map(F=>F.trim()).filter(Boolean),tags:(r._tagsString??"").split(",").map(F=>F.trim()).filter(Boolean)})),rows:e(_).filter(r=>r.ChapterSE).map(r=>({ChapterSE:r.ChapterSE,Description:r.Description,Characters:r.Characters,Tags:r._tagsText.split(",").map(F=>F.trim()).filter(Boolean)}))};g()!==null?await oe.updateEntry(g(),m):await oe.addEntry(m),f("save")}function J(){f("cancel")}Me();var P=Ya(),L=a(P),G=a(L),I=a(G),q=a(I,!0);t(I);var le=l(I,2);t(G);var ae=l(G,2),Y=a(ae),R=a(Y),E=l(a(R),2);ne(E),t(R),t(Y);var h=l(Y,2),X=a(h),ve=l(a(X),2);ne(ve),t(X),t(h);var Q=l(h,2),Z=a(Q),ue=l(a(Z),2);ne(ue),t(Z),t(Q);var fe=l(Q,2),se=a(fe),W=l(a(se),2);pt(W),t(se),t(fe);var re=l(fe,2),ke=a(re),Ce=l(a(ke),2);pt(Ce),t(ke),t(re);var ie=l(re,2),be=a(ie),je=l(a(be),2);pt(je),t(be),t(ie);var Se=l(ie,2),Je=l(a(Se),2),ce=a(Je);ce.value=ce.__value="All";var xt=l(ce);Ne(xt,1,()=>(o(),z(()=>o().filter(m=>m!=="All"))),Be,(m,r)=>{var F=qa(),we=a(F,!0);t(F);var xe={};K(()=>{de(we,e(r)),xe!==(xe=e(r))&&(F.value=(F.__value=e(r))??"")}),C(m,F)}),t(Je),t(Se);var dt=l(Se,2),at=a(dt),Ye=l(a(at),2),Dt=l(a(Ye));t(Ye),t(at);var lt=l(at,2),Xe=a(lt);ne(Xe);var vt=l(Xe,2);Ne(vt,4,()=>z(()=>Array.from({length:11},(m,r)=>r)),Be,(m,r)=>{var F=Wa();K(()=>Ie(F,1,Ft(r===e(N)?"text-info font-bold":""))),C(m,F)}),t(vt);var st=l(vt,2);Ne(st,4,()=>z(()=>Array.from({length:11},(m,r)=>r)),Be,(m,r)=>{var F=Va(),we=a(F,!0);t(F),K(()=>{Ie(F,1,Ft(r===e(N)?"text-info font-bold":"")),de(we,r)}),C(m,F)}),t(st),t(lt),t(dt);var Ze=l(dt,4),_t=a(Ze);Ne(_t,1,()=>e(S),Be,(m,r,F)=>{var we=Pa(),xe=a(we),Ee=a(xe),Ke=l(a(Ee),2);ne(Ke),t(Ee);var Ue=l(Ee,2),Re=l(a(Ue),2);ne(Re),t(Ue);var Qe=l(Ue,2);t(xe);var Le=l(xe,2),Fe=l(a(Le),2);ne(Fe),t(Le);var He=l(Le,2),qe=l(a(He),2);ne(qe),t(He);var _e=l(He,2),ut=l(a(_e),2);ne(ut),t(_e);var At=l(_e,2),bt=l(a(At),2);pt(bt),t(At),t(we),ee(Ke,()=>e(r).Name,ye=>(e(r).Name=ye,Te(()=>e(S)))),ee(Re,()=>e(r).role,ye=>(e(r).role=ye,Te(()=>e(S)))),c("click",Qe,()=>y(F)),ee(Fe,()=>e(r).Image,ye=>(e(r).Image=ye,Te(()=>e(S)))),ee(qe,()=>e(r)._alternativeNamesString,ye=>(e(r)._alternativeNamesString=ye,Te(()=>e(S)))),ee(ut,()=>e(r)._tagsString,ye=>(e(r)._tagsString=ye,Te(()=>e(S)))),ee(bt,()=>e(r).description,ye=>(e(r).description=ye,Te(()=>e(S)))),C(m,we)});var rt=l(_t,2);t(Ze);var yt=l(Ze,4),kt=a(yt);Ne(kt,1,()=>e(_),Be,(m,r,F)=>{var we=Ga(),xe=a(we),Ee=a(xe),Ke=l(a(Ee),2);ne(Ke),t(Ee);var Ue=l(Ee,2);t(xe);var Re=l(xe,2),Qe=l(a(Re),2);pt(Qe),t(Re);var Le=l(Re,2),Fe=l(a(Le),2);ne(Fe),t(Le);var He=l(Le,2),qe=l(a(He),2);ne(qe),t(He),t(we),ee(Ke,()=>e(r).ChapterSE,_e=>(e(r).ChapterSE=_e,Te(()=>e(_)))),c("click",Ue,()=>k(F)),ee(Qe,()=>e(r).Description,_e=>(e(r).Description=_e,Te(()=>e(_)))),ee(Fe,()=>e(r)._tagsText,_e=>(e(r)._tagsText=_e,Te(()=>e(_)))),ee(qe,()=>e(r).Characters,_e=>(e(r).Characters=_e,Te(()=>e(_)))),C(m,we)});var Ct=l(kt,2);t(yt),t(ae);var St=l(ae,2),nt=a(St),ze=l(nt,2);t(St),t(L),t(P),K(()=>{de(q,g()!==null?"Edit Entry":"New Entry"),de(Dt,` ${e(N)??""} - ${te(Ht),e(N),z(()=>Ht[e(N)])??""}`),ze.disabled=!e(b)||!e(x)}),c("click",le,J),ee(E,()=>e(b),m=>s(b,m)),ee(ve,()=>e(v),m=>s(v,m)),ee(ue,()=>e(M),m=>s(M,m)),ee(W,()=>e(T),m=>s(T,m)),ee(Ce,()=>e(D),m=>s(D,m)),ee(je,()=>e(O),m=>s(O,m)),Gt(Je,()=>e(x),m=>s(x,m)),ee(Xe,()=>e(N),m=>s(N,m)),c("click",rt,w),c("click",Ct,B),c("click",nt,J),c("click",ze,$),c("click",L,Ge(function(m){tt.call(this,n,m)})),c("click",P,J),C(d,P),$e(),p()}var Za=j('<input class="input input-sm input-bordered flex-1 mr-2"/>'),Ka=j('<span class="truncate cursor-pointer"> </span>'),Qa=j('<button class="btn btn-sm btn-success">Save</button>'),el=j('<button class="btn btn-xs btn-info">Edit</button> <button class="btn btn-xs btn-error">Delete</button>',1),tl=j('<div class="flex gap-2"><!></div>'),al=j('<li class="mb-2 flex items-center justify-between"><!> <!></li>'),ll=j(`<div class="fixed inset-0 z-150 flex bg-black/50" role="button" tabindex="0" aria-label="Close categories modal"><div class="h-full w-96 bg-base-100 p-6 shadow-xl flex flex-col" role="document"><h2 class="mb-6 text-2xl font-bold">Categories</h2> <div class="flex-1 overflow-y-auto pr-1 border border-base-content/30 rounded-xl p-1 px-2"><ul class="mb-4"></ul></div> <div class="flex gap-2 mt-3"><input class="input-bordered input flex-1" placeholder="New category"/> <button aria-label="Add new category" class="btn btn-primary">Add</button></div> <button class="btn btn-soft mt-2 w-full">Close</button> <div class="mt-1 px-1 text-xs justify-center text-success"><span> </span></div> <div class="my-2 alert alert-default alert-soft "><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 shrink-0 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>When a category is <b>deleted</b>, all entries in that category are <b>moved to the 'All'</b> category</span></div></div></div>`);function sl(d,n){De(n,!1);const o=()=>Ae(Pe,"$categories",u),[u,p]=ct();let g=ge(n,"show",8,!1);const f=it();let b=A(""),v=A(null),M=A("");function T(k){s(v,k),s(M,k)}async function D(k){const $=e(M).trim();if(!$||$==="All"||$===k){s(v,null);return}await Pe.rename(k,$),f("rename",{old:k,new:$}),s(v,null),S(`Category renamed to "${$}"`)}async function N(){const k=e(b).trim();!k||k==="All"||(await Pe.add(k),s(b,""))}let O=A(""),x=A(!1);function S(k,$=2e3){s(O,k),s(x,!0),setTimeout(()=>{s(x,!1)},$)}async function _(k){k!=="All"&&(await oe.moveCategoryToAll(k),await Pe.remove(k),S(`Category "${k}" deleted. Entries moved to 'All'.`))}Ot(()=>{Pe.load()}),Me();var w=ht(),y=Oe(w);{var B=k=>{var $=ll(),J=a($),P=l(a(J),2),L=a(P);Ne(L,5,()=>(o(),z(()=>["All",...o().filter(E=>E!=="All")])),Be,(E,h)=>{var X=al(),ve=a(X);{var Q=se=>{var W=Za();ne(W),la(W),ee(W,()=>e(M),re=>s(M,re)),c("keydown",W,re=>re.key==="Enter"&&D(e(h))),c("blur",W,()=>D(e(h))),C(se,W)},Z=se=>{var W=Ka(),re=a(W,!0);t(W),K(()=>de(re,e(h))),c("dblclick",W,()=>T(e(h))),C(se,W)};H(ve,se=>{e(v)===e(h)?se(Q):se(Z,!1)})}var ue=l(ve,2);{var fe=se=>{var W=tl(),re=a(W);{var ke=ie=>{var be=Qa();c("click",be,Ge(()=>D(e(h)))),C(ie,be)},Ce=ie=>{var be=el(),je=Oe(be),Se=l(je,2);c("click",je,Ge(()=>T(e(h)))),c("click",Se,Ge(()=>_(e(h)))),C(ie,be)};H(re,ie=>{e(v)===e(h)?ie(ke):ie(Ce,!1)})}t(W),C(se,W)};H(ue,se=>{e(h)!=="All"&&se(fe)})}t(X),C(E,X)}),t(L),t(P);var G=l(P,2),I=a(G);ne(I);var q=l(I,2);t(G);var le=l(G,2),ae=l(le,2),Y=a(ae),R=a(Y,!0);t(Y),t(ae),et(2),t(J),t($),K(()=>{Xt(ae,`min-height: 1.55rem; max-height: 1.55rem; visibility: ${e(x)?"visible":"hidden"}`),de(R,e(O))}),ee(I,()=>e(b),E=>s(b,E)),c("click",q,N),c("click",le,()=>f("close")),c("click",J,Ge(function(E){tt.call(this,n,E)})),c("click",$,()=>f("close")),c("keydown",$,E=>{(E.key==="Enter"||E.key===" ")&&f("close")}),C(k,$)};H(y,k=>{g()&&k(B)})}C(d,w),$e(),p()}var rl=j('<li><input type="radio" name="theme-dropdown" class="theme-controller btn btn-sm btn-block btn-ghost justify-start"/></li>'),nl=j('<div><div tabindex="0" role="button" class="btn p-2 m-0 rounded-2xl">üé® <svg width="12px" height="12px" class="inline-block h-1 w-1 fill-current opacity-60" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048"><path d="M1799 349l242 241-1017 1017L7 590l242-241 775 775 775-775z"></path></svg></div> <ul tabindex="-1" class="dropdown-content menu bg-base-300 rounded-2xl z-150 w-52 p-2 shadow-sm"></ul></div>');function ol(d,n){De(n,!1);const o=()=>Ae(qt,"$theme",u),[u,p]=ct(),g=["light","cupcake","night","dark","emerald","fantasy","luxury","acid","coffee","retro","business","dracula","dim","garden"];let f=ge(n,"dropdownDirection",8,"dropdown-end");function b(T){qt.set(T)}Me();var v=nl(),M=l(a(v),2);Ne(M,5,()=>g,Be,(T,D)=>{var N=rl(),O=a(N);ne(O),t(N),K(()=>{wt(O,"aria-label",e(D)),da(O,e(D)),Yt(O,o()===e(D))}),c("change",O,()=>b(e(D))),C(T,N)}),t(M),t(v),K(()=>Ie(v,1,`dropdown ${f()}`)),C(d,v),$e(),p()}var il=j('<span class="absolute top-0 right-0 flex h-5 w-5 translate-x-1/2 translate-y-1/2 items-center justify-center rounded-full bg-red-600 text-xs font-bold text-white"> </span>'),cl=j('<li><button class="w-full border border-base-300 text-left hover:bg-base-200"> </button></li>'),dl=j('<ul class="dropdown-content menu mt-3 w-52 rounded-box bg-base-100 p-2 shadow-md"></ul>'),vl=j('<div class="fixed top-16 left-1/2 z-50 flex items-center gap-4 rounded-lg border border-base-300 bg-base-100 p-2 shadow-md select-none"><div role="button" tabindex="0" class="cursor-grab rounded-md bg-base-200 p-2 hidden md:inline-block" aria-label="Drag toolbar">‚†ø</div> <div class="tooltip" data-tip="Delete"><button class="btn relative btn-square btn-error" aria-label="Delete selected"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 7h12M10 11v6m4-6v6M5 7l1 12a2 2 0 002 2h8a2 2 0 002-2l1-12M9 7V4a1 1 0 011-1h4a1 1 0 011 1v3"></path></svg> <!></button></div> <div class="tooltip" data-tip="Select all"><button class="btn btn-square btn-ghost" aria-label="Select all"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7M5 7l4 4L19 1"></path></svg></button></div> <div class="tooltip" data-tip="Deselect all"><button class="btn btn-square opacity-50 btn-ghost" aria-label="Deselect all"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current opacity-20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7M5 7l4 4L19 1"></path></svg></button></div> <div><div class="tooltip" data-tip="Move to category"><button class="btn btn-square btn-ghost" aria-label="Move to category"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4h16v4H4V4zm0 8h16v4H4v-4zm0 8h16v4H4v-4z"></path></svg></button></div> <!></div> <div class="tooltip" data-tip="Cancel"><button class="btn btn-square bg-red-700 text-white btn-ghost hover:bg-red-500" aria-label="Cancel selection"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div role="button" tabindex="0" class="drag-handle cursor-grab rounded-md bg-base-200 p-2" aria-label="Drag toolbar">‚†ø</div></div>');function ul(d,n){De(n,!1);let o=ge(n,"selectedCount",8,0),u=ge(n,"categoryList",24,()=>[]),p=ge(n,"showCategoryDropdown",8,!1);const g=it();let f=!1,b=0,v=0,M=A(0),T=A(0);function D(h){f=!0,b=h.clientX-e(M),v=h.clientY-e(T),window.addEventListener("pointermove",N),window.addEventListener("pointerup",O)}function N(h){f&&(s(M,h.clientX-b),s(T,h.clientY-v))}function O(){f=!1,window.removeEventListener("pointermove",N),window.removeEventListener("pointerup",O)}Me();var x=vl(),S=a(x),_=l(S,2),w=a(_),y=l(a(w),2);{var B=h=>{var X=il(),ve=a(X,!0);t(X),K(()=>de(ve,o())),C(h,X)};H(y,h=>{o()>0&&h(B)})}t(w),t(_);var k=l(_,2),$=a(k);t(k);var J=l(k,2),P=a(J);t(J);var L=l(J,2);let G;var I=a(L),q=a(I);t(I);var le=l(I,2);{var ae=h=>{var X=dl();Ne(X,5,u,Be,(ve,Q)=>{var Z=cl(),ue=a(Z),fe=a(ue,!0);t(ue),t(Z),K(()=>de(fe,e(Q))),c("click",ue,()=>g("moveCategory",e(Q))),C(ve,Z)}),t(X),C(h,X)};H(le,h=>{te(p()),te(u()),z(()=>p()&&u().length>0)&&h(ae)})}t(L);var Y=l(L,2),R=a(Y);t(Y);var E=l(Y,2);t(x),K(()=>{Xt(x,`transform: translate(calc(-50% + ${e(M)??""}px), ${e(T)??""}px);`),w.disabled=o()===0,G=Ie(L,1,"dropdown dropdown-end",null,G,{"dropdown-open":p()}),q.disabled=o()===0}),c("pointerdown",S,D),c("click",w,()=>g("delete")),c("click",$,()=>g("selectAll")),c("click",P,()=>g("deselectAll")),c("click",q,()=>g("toggleCategoryDropdown")),c("click",R,()=>g("cancel")),c("pointerdown",E,D),C(d,x),$e()}var bl=j('<button><div class="indicator"><span class="indicator-item bg-base-100 text-xs rounded-3xl px-1.5 py-0.5 -top-1"> </span> <div class="z-10"> </div></div></button>'),pl=j('<div class="flex h-screen flex-col"><div class="navbar bg-base-100 shadow-lg"><div class="flex-none"><button class="btn btn-square btn-ghost" aria-label="Open menu"><!></button></div> <div class="flex-1"><span class="text-md md:text-xl font-bold"> <span class="hide-on-320 svelte-j9gjs9"> </span></span></div> <div class="flex-none"><button class="btn btn-square btn-ghost" aria-label="Toggle search"><!></button> <div class="tooltip tooltip-bottom" data-tip="Open filters"><button class="btn btn-square btn-ghost" aria-label="Open filters"><!></button></div> <div class="tooltip tooltip-bottom" data-tip="Select entries"><button class="btn btn-square btn-ghost" aria-label="Select entries"><!></button></div> <button class="btn btn-square btn-ghost inline-block md:hidden" aria-label="Toggle grid columns" title="Toggle grid columns"><!></button> <!></div></div> <!> <div class="tabs tabs-border flex-nowrap gap-1 overflow-x-auto bg-base-200 px-2 pt-2 pb-1 scrollbar-hide"><button><div class="z-10">All</div> <span class="bg-base-100 text-xs rounded-3xl px-1.5 py-0.5"> </span></button> <!></div> <button class="z-100 btn fixed right-6 bottom-6 btn-circle shadow-xl btn-lg btn-primary" aria-label="Add new entry"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></button> <!>  <div class="flex-1 overflow-auto p-4"><!></div></div> <!> <!> <!> <!> <!> <!>',1);function gl(d,n){De(n,!1);const o=()=>Ae(ot,"$selectedCategory",b),u=()=>Ae(Pe,"$categories",b),p=()=>Ae(Nt,"$entries",b),g=()=>Ae(fa,"$filteredEntries",b),f=()=>Ae(Wt,"$gridCols",b),[b,v]=ct(),M=A();let T=A(!1),D=A(!1),N=A(!1),O=A(!1),x=A(!1),S=A(null),_=A(null),w=A(!1),y=A(new Set),B=A(!1);const k=it();let $=A(""),J=A(!1);function P(){Wt.update(i=>i===3?4:3)}async function L(){const i=await oe.getAllEntries();Nt.set(i),Array.from(new Set(i.map(U=>U.category).filter(U=>U&&U!=="All"))),Pe.load()}Ot(async()=>{await L(),_a();const i=localStorage.getItem("selectedCategory");i&&ot.set(i)});function G(){s(S,null),s(x,!0),s(B,!1)}async function I(){s(x,!1),s(S,null),await L()}function q(){s(x,!1),s(S,null)}async function le(){s(O,!1),s(_,null),await L()}function ae(){s(O,!1),s(_,null)}let Y;function R(i){s($,i),s(J,!0),clearTimeout(Y),Y=window.setTimeout(()=>{s(J,!1)},1500)}async function E(i){await oe.importFromJSON(i),await L(),s(N,!1)}async function h(){const i=await oe.exportToJSON(),U=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),me=URL.createObjectURL(U),pe=document.createElement("a");pe.href=me,pe.download=`lib-export-${new Date().toISOString()}.json`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(me),s(N,!1),R("Exported to JSON üëç :Downloads/")}async function X(){const i=await oe.exportToMarkdown(),U=new Blob([i],{type:"text/markdown"}),me=URL.createObjectURL(U),pe=document.createElement("a");pe.href=me,pe.download=`lib-export-${new Date().toISOString()}.md`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(me),s(N,!1),R("Exported to Markdown üëç :Downloads/")}async function ve(i){await oe.moveCategoryToAll(i),o()===i&&ot.set("All"),await L(),s(w,!1)}let Q=A(!1);async function Z(i){for(const me of e(y))p().find(Et=>Et.id===me)&&await oe.updateEntry(me,{category:i});e(y).clear(),s(y,new Set(e(y))),s(B,!1);const U=await oe.getAllEntries();Nt.set(U),s(Q,!1)}function ue(i){e(y).has(i)?e(y).delete(i):e(y).add(i),s(y,new Set(e(y)))}async function fe(){if(e(y).size===0)return;const i=Array.from(e(y));for(const U of i)await oe.deleteEntry(U);e(y).clear(),s(y,new Set(e(y))),await L(),s(B,!1)}function se(){s(y,new Set(g().map(i=>i.id)))}function W(){e(y).clear(),s(y,new Set(e(y)))}Lt(()=>u(),()=>{s(M,u().filter(i=>i!=="All"))}),Pt(),Me();var re=pl(),ke=Oe(re),Ce=a(ke),ie=a(Ce),be=a(ie),je=a(be);he(je,()=>(te(V),z(()=>V.menu))),t(be),t(ie);var Se=l(ie,2),Je=a(Se),ce=a(Je);ce.nodeValue="Lib ";var xt=l(ce),dt=a(xt);t(xt),t(Je),t(Se);var at=l(Se,2),Ye=a(at),Dt=a(Ye);he(Dt,()=>(te(V),z(()=>V.search))),t(Ye);var lt=l(Ye,2),Xe=a(lt),vt=a(Xe);he(vt,()=>(te(V),z(()=>V.filter))),t(Xe),t(lt);var st=l(lt,2),Ze=a(st),_t=a(Ze);he(_t,()=>(te(V),z(()=>V.select))),t(Ze),t(st);var rt=l(st,2),yt=a(rt);he(yt,()=>(te(V),z(()=>V.toggleGrid))),t(rt);var kt=l(rt,2);ol(kt,{dropdownDirection:"dropdown-bottom dropdown-end"}),t(at),t(Ce);var Ct=l(Ce,2);{var St=i=>{$a(i,{get show(){return e(T)},set show(U){s(T,U)},$$legacy:!0})};H(Ct,i=>{e(T)&&i(St)})}var nt=l(Ct,2),ze=a(nt);let m;var r=l(a(ze),2),F=a(r,!0);t(r),t(ze);var we=l(ze,2);Ne(we,1,()=>e(M),Be,(i,U)=>{var me=bl();let pe;var Et=a(me),$t=a(Et),Qt=a($t,!0);t($t);var Ut=l($t,2),ea=a(Ut,!0);t(Ut),t(Et),t(me),K(jt=>{pe=Ie(me,1,"tab",null,pe,{"tab-active":o()===e(U)}),de(Qt,jt),de(ea,e(U))},[()=>(p(),e(U),z(()=>p().filter(jt=>jt.category===e(U)).length))]),c("click",me,()=>ot.set(e(U))),C(i,me)}),t(nt);var xe=l(nt,2),Ee=l(xe,2);{var Ke=i=>{ul(i,{get selectedCount(){return e(y),z(()=>e(y).size)},get categoryList(){return e(M)},get showCategoryDropdown(){return e(Q)},$$events:{delete:fe,selectAll:se,deselectAll:W,toggleCategoryDropdown:()=>s(Q,!e(Q)),moveCategory:U=>Z(U.detail),cancel:()=>{s(B,!1),s(Q,!1),e(y).clear(),s(y,new Set(e(y)))}}})};H(Ee,i=>{e(B)&&i(Ke)})}var Ue=l(Ee,2),Re=a(Ue);Ia(Re,{get entries(){return g()},get selectionMode(){return e(B)},get selectedEntries(){return e(y)},get gridCols(){return f()},$$events:{toggleSelect:i=>ue(i.detail)}}),t(Ue),t(ke);var Qe=l(ke,2);{var Le=i=>{La(i,{get show(){return e(D)},set show(U){s(D,U)},$$legacy:!0})};H(Qe,i=>{e(D)&&i(Le)})}var Fe=l(Qe,2);{var He=i=>{Ha(i,{get show(){return e(N)},set show(U){s(N,U)},$$events:{import:U=>E(U.detail),export:h,exportMd:X,showCategories:()=>{s(N,!1),s(w,!0)}},$$legacy:!0})};H(Fe,i=>{e(N)&&i(He)})}var qe=l(Fe,2);{var _e=i=>{sl(i,{get show(){return e(w)},$$events:{close:()=>s(w,!1),rename:U=>k("renameCategory",U.detail),delete:U=>ve(U.detail)}})};H(qe,i=>{e(w)&&i(_e)})}var ut=l(qe,2);{var At=i=>{va(i,{get entryId(){return e(_)},$$events:{save:le,cancel:ae}})};H(ut,i=>{e(O)&&i(At)})}var bt=l(ut,2);{var ye=i=>{Xa(i,{get entryId(){return e(S)},$$events:{save:I,cancel:q}})};H(bt,i=>{e(x)&&i(ye)})}var Kt=l(bt,2);zt(Kt,{get showAlert(){return e(J)},get message(){return e($)}}),K(()=>{de(dt,`(${p(),z(()=>p().length)??""})`),m=Ie(ze,1,"tab relative",null,m,{"tab-active":o()==="All"}),de(F,(p(),z(()=>p().length)))}),c("click",be,()=>s(N,!0)),c("click",Ye,()=>{s(T,!e(T)),s(B,!1)}),c("click",Xe,()=>{s(D,!e(D)),s(B,!1)}),c("click",Ze,()=>{e(B)&&(e(y).clear(),s(y,new Set(e(y))),s(Q,!1)),s(B,!e(B))}),c("click",rt,P),c("click",ze,()=>ot.set("All")),c("click",xe,G),C(d,re),$e(),v()}function Al(d){ra("1uha8ag",n=>{Vt(()=>{sa.title="lib"})}),gl(d,{})}export{Al as component};

import{c as Ot,a as m,f as S,d as Wt}from"../chunks/DLeEY7fs.js";import{i as Je}from"../chunks/D56Uv2cy.js";import{h as Zt,z as Ue,A as at,D as qe,w as le,o as j,E as a,G as l,v as e,F as t,B as te,aP as Xt,W as s,aN as Ct,aT as Ve,aU as Vt,V as k,ax as Le,aY as _t,aZ as je,a_ as ga,O as fa,aW as ma}from"../chunks/BPO9GtFz.js";import{h as ha}from"../chunks/CuXflmye.js";import{d as wa,w as Bt,c as pt,o as zt,g as xa}from"../chunks/Dpa3FFmK.js";import{s as ie,e as v,r as _a}from"../chunks/DfAXxMbk.js";import{p as be,i as z,b as Ht,a as ke,s as gt}from"../chunks/CrlJmSwP.js";import{t as ya,d as oe,e as De,k as Ie,c as ka,s as St,j as ge,S as G,r as ue,l as ne,m as sa,a as We,b as tt,g as Ca,i as ze,n as Kt,R as ea,o as He,f as Sa,h as Aa,p as ta,q as aa,E as Ea}from"../chunks/5GfNp6By.js";import{g as Ta,b as $a}from"../chunks/d2e-q6Gy.js";function ra(x,i,_,b){var f=x.__style;if(Zt||f!==i){var y=ya(i);(!Zt||y!==x.getAttribute("style"))&&(y==null?x.removeAttribute("style"):x.style.cssText=y),x.__style=i}return b}function Ma(){const{subscribe:x,set:i,update:_}=Bt([]);return{subscribe:x,set:i,update:_,load:async()=>{const b=await oe.getAllEntries();return i(b),b},add:async b=>{const f=await oe.addEntry(b);_(y=>[...y,{...b,id:f}])},updateEntry:async(b,f)=>{await oe.updateEntry(b,f),_(y=>y.map(c=>c.id===b?{...c,...f}:c))},deleteEntry:async b=>{await oe.deleteEntry(b),_(f=>f.filter(y=>y.id!==b))}}}const It=Ma(),Ne=Bt(""),ut=Bt("default"),bt=Jt("libsettings:selectedCategory","All"),yt=Jt("libsettings:sortField","createdAt"),kt=Jt("libsettings:sortOrder","desc"),la=Jt("lib:gridCols",4),ja=wa([It,bt,Ne,ut,yt,kt],([x,i,_,b,f,y])=>{let c=[...x];if(i!=="All"&&(c=c.filter(h=>h.category===i)),_){const h=_.toLowerCase();c=c.filter(o=>{switch(b){case"a":return o.alternativeTitles.join(" ").toLowerCase().includes(h);case"t":return o.tags.join(" ").toLowerCase().includes(h);case"b":return o.badges.join(" ").toLowerCase().includes(h);case"c":return o.characters.map(N=>N.Name).join(" ").toLowerCase().includes(h);case"d":return o.dataType.toLowerCase().includes(h);default:return o.title.toLowerCase().includes(h)||o.alternativeTitles.join(" ").toLowerCase().includes(h)}})}return c=c.sort((h,o)=>{const N=h[f]??"",J=o[f]??"";return y==="asc"?N>J?1:-1:N<J?1:-1}),c});function Jt(x,i){const _=localStorage.getItem(x),{subscribe:b,set:f,update:y}=Bt(_?JSON.parse(_):i);return{subscribe:b,set:c=>{localStorage.setItem(x,JSON.stringify(c)),f(c)},update:c=>{y(h=>{const o=c(h);return localStorage.setItem(x,JSON.stringify(o)),o})}}}let Ft=null;async function Na(){if(localStorage.getItem("autoBackupEnabled")!=="true")return;const i=await(await oe.getDB()).get("settings","backupDirHandle");i&&na(i)}async function La(x){const i=await oe.exportToJSON(),b=await(await x.getFileHandle("lib-autobackup.json",{create:!0})).createWritable();await b.write(JSON.stringify(i,null,2)),await b.close(),console.log("‚úÖ Auto backup saved at",new Date().toLocaleString())}function na(x){Ft&&clearTimeout(Ft);const i=new Date,_=new Date;_.setHours(12,0,0,0);const b=new Date;b.setHours(24,0,0,0);let f;i<_?f=_:f=b;const y=f.getTime()-i.getTime();Ft=window.setTimeout(async()=>{await x.queryPermission({mode:"readwrite"})==="granted"&&await La(x),na(x)},y)}function Da(x){const i=new IntersectionObserver(([_],b)=>{if(_.isIntersecting){const f=x.dataset.src;f&&(x.src=f),x.classList.add("lozad-loaded"),b.unobserve(x)}});return i.observe(x),{destroy(){i.unobserve(x)}}}var Ia=S('<div class="px-1 w-full opacity-80 text-sm h-65 md:h-55 flex items-end justify-center text-base-content/50 scroll-smooth"><div>No entries found. <ul class="list-disc list-inside mt-1"><li>Add new entries by clicking the <b>"+"</b> button.</li> <li>To Manage categories, click the "Categories" button in the <b>Menu</b>.</li> <li class="text-success mt-1">ID (auto-generated) and slug are <b>unique identifiers</b></li> <li class="text-success"><b>Import</b> uses fingerprint matching (slug prioritized)</li></ul></div></div>'),Oa=Wt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-12 h-12 bg-base-300/50 rounded-xl  drop-shadow-[0_0_10px_rgba(239,68,68,0.8)]" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7M5 7l4 4L19 1"></path></svg>'),Ba=S('<button type="button"><!></button>'),za=S('<img class="w-full h-full object-cover lozad"/>'),Ja=S('<div class="w-full h-full flex items-center justify-center text-base-content/20"><!></div>'),Ua=S('<span class="absolute bottom-0 left-0 rounded-se-md text-[.7em] md:text-sm bg-base-200/85 px-1 py-0"> </span>'),qa=S('<span class="z-11 absolute -top-[5px] right-1 rounded-full text-[.6em] w-1/2 font-semibold px-1 py-0 line-clamp-1 break-words md:text-sm bg-info text-base-300 group-hover:hidden"> </span>'),Ra=S('<span class="absolute top-1 left-1 rounded-2xl text-xs md:text-sm bg-info text-base-300 px-1 py-0 font-semibold"> </span>'),Fa=S('<div class="relative"><!> <button class="group card bg-base-100 shadow-xl cursor-pointer hover:shadow-info/30 transition-[1px] w-full h-full transition duration-150 ease-in-out hover:-translate-y-1 hover:scale-102"><figure class="relative aspect-[3/4] bg-base-300"><!> <!></figure> <!> <div class="card-body p-2"><!> <div class="card-title text-xs sm:text-sm line-clamp-2"> </div></div></button></div>'),Ha=S("<div></div>");function Wa(x,i){Ue(i,!1);let _=be(i,"entries",24,()=>[]),b=be(i,"selectionMode",8,!1),f=be(i,"selectedEntries",24,()=>new Set),y=be(i,"gridCols",8,4);const c=pt();function h(C){!b()&&C!==void 0&&Ta(`${$a}/detail/${C}`)}function o(C){c("toggleSelect",C)}const N={2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5"};Je();var J=Ot(),q=at(J);{var O=C=>{var I=Ia();m(C,I)},E=C=>{var I=Ha();De(I,5,_,U=>U.id,(U,g)=>{var w=Fa(),d=a(w);{var p=B=>{var T=Ba();let V;var Ce=a(T);{var X=ae=>{var Se=Oa();m(ae,Se)},K=Xt(()=>(le(f()),e(g),j(()=>f().has(e(g).id))));z(Ce,ae=>{e(K)&&ae(X)})}t(T),te(ae=>V=Ie(T,1,"rounded-xl absolute inset-0 z-10 flex items-center justify-center bg-black/30 text-base-accent cursor-pointer transition-opacity",null,V,ae),[()=>({selected:f().has(e(g).id)})]),v("click",T,ae=>{ae.stopPropagation(),o(e(g).id)}),m(B,T)};z(d,B=>{b()&&B(p)})}var L=l(d,2),D=a(L),H=a(D);{var P=B=>{var T=za();ka(T,V=>Da?.(V)),te(()=>{St(T,"src",(e(g),j(()=>e(g).coverImageUrl))),St(T,"alt",(e(g),j(()=>e(g).title)))}),_a(T),m(B,T)},F=B=>{var T=Ja(),V=a(T);ge(V,()=>(le(G),j(()=>G.imgIcon))),t(T),m(B,T)};z(H,B=>{e(g),j(()=>e(g).coverImageUrl)?B(P):B(F,!1)})}var Q=l(H,2);{var Y=B=>{var T=Ua(),V=a(T,!0);t(T),te(()=>ie(V,(e(g),j(()=>e(g).dataType)))),m(B,T)};z(Q,B=>{e(g),j(()=>e(g).dataType)&&B(Y)})}t(D);var M=l(D,2);{var W=B=>{var T=qa(),V=a(T,!0);t(T),te(()=>ie(V,(e(g),j(()=>e(g).category)))),m(B,T)},de=Xt(()=>(e(g),j(()=>e(g).category&&e(g).category.trim().toLowerCase()!=="all")));z(M,B=>{e(de)&&B(W)})}var ce=l(M,2),ee=a(ce);{var A=B=>{var T=Ra(),V=a(T,!0);t(T),te(()=>ie(V,(e(g),j(()=>e(g).rating)))),m(B,T)};z(ee,B=>{e(g),j(()=>e(g).rating!==null&&e(g).rating>0)&&B(A)})}var Z=l(ee,2),se=a(Z,!0);t(Z),t(ce),t(L),t(w),te(()=>ie(se,(e(g),j(()=>e(g).title)))),v("click",L,()=>h(e(g).id)),m(U,w)}),t(I),te(()=>Ie(I,1,(le(y()),j(()=>`grid gap-2 ${N[y()]} md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 scroll-smooth`)))),m(C,I)};z(q,C=>{le(_()),j(()=>_().length===0)?C(O):C(E,!1)})}m(x,J),qe()}var Va=S("alternative titles <br/>('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)",1),Ga=S("tags <br/>('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)",1),Pa=S("badges <br/>('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)",1),Qa=S("characters <br/>('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)",1),Ya=S('<div class="text-xs text-info mt-2">Searching in: <!> <!> <!> <!></div>'),Za=S(`<div class="bg-base-200 px-4 pt-3 pb-1 shadow-lg"><div class="flex gap-2 items-center"><input type="text" placeholder="Search ('a:' altTitles, 't:' tags, 'b:' badges, 'c:' characters, 'd:' dataType)" class="input input-bordered flex-1"/> <button class="btn px-[10px] btn-outline text-bg-accent rounded-full" aria-label="Close search"><!></button></div> <!></div>`);function Xa(x,i){Ue(i,!1);const _=()=>ke(Ne,"$searchQuery",f),b=()=>ke(ut,"$searchMode",f),[f,y]=gt();let c=be(i,"show",12,!1),h=k(""),o=k(),N=k(!1);zt(async()=>{const w=_(),d=b();w&&(c(!0),s(h,d!=="default"?`${d}:${w}`:w)),await Ct(),s(N,!0)});function J(){s(h,""),Ne.set(""),ut.set("default"),c(!1)}Ve(()=>Ne,()=>{xa(Ne)&&c(!0)}),Ve(()=>(le(c()),e(o),Ct),()=>{c()&&e(o)&&Ct().then(()=>e(o).focus())}),Ve(()=>(e(N),e(h),Ne),()=>{if(e(N)){const w=e(h).trim(),d=w.toLowerCase();d.startsWith("a:")?(ut.set("a"),Ne.set(w.slice(2))):d.startsWith("t:")?(ut.set("t"),Ne.set(w.slice(2))):(ut.set("default"),Ne.set(w))}}),Vt(),Je();var q=Za(),O=a(q),E=a(O);ue(E),Ht(E,w=>s(o,w),()=>e(o));var C=l(E,2),I=a(C);ge(I,()=>(le(G),j(()=>G.closeCross))),t(C),t(O);var U=l(O,2);{var g=w=>{var d=Ya(),p=l(a(d));{var L=M=>{var W=Va();Le(2),m(M,W)};z(p,M=>{b()==="a"&&M(L)})}var D=l(p,2);{var H=M=>{var W=Ga();Le(2),m(M,W)};z(D,M=>{b()==="t"&&M(H)})}var P=l(D,2);{var F=M=>{var W=Pa();Le(2),m(M,W)};z(P,M=>{b()==="b"&&M(F)})}var Q=l(P,2);{var Y=M=>{var W=Qa();Le(2),m(M,W)};z(Q,M=>{b()==="c"&&M(Y)})}t(d),m(w,d)};z(U,w=>{b()!=="default"&&w(g)})}t(q),ne(E,()=>e(h),w=>s(h,w)),v("click",C,J),m(x,q),qe(),y()}var Ka=S('<div class="fixed inset-0 bg-black/50 z-150 flex items-end" role="presentation"><div class="bg-base-100 w-full rounded-t-2xl p-6 max-h-[80vh] overflow-auto" role="dialog" tabindex="-1"><h3 class="text-2xl font-bold mb-6">Sort & Filter</h3> <div class="form-control mb-4"><label class="label" for="sort-field"><span class="label-text font-semibold">Sort By</span></label> <select id="sort-field" class="select select-bordered w-full"><option>Title (A-Z)</option><option>Rating</option><option>Last Edited</option><option>Date Created</option><option>Last Opened</option></select></div> <div class="form-control mb-6"><label class="label" for="sort-order"><span class="label-text font-semibold">Order</span></label> <div class="flex gap-2"><button>Ascending</button> <button>Descending</button></div></div> <div class="flex gap-2"><button class="btn btn-outline flex-1">Reset</button> <button class="btn btn-primary flex-1">Apply</button></div></div></div>');function el(x,i){Ue(i,!1);const _=()=>ke(yt,"$sortField",f),b=()=>ke(kt,"$sortOrder",f),[f,y]=gt();let c=be(i,"show",12,!1),h=k(_()),o=k(b());yt.subscribe(C=>s(h,C)),kt.subscribe(C=>s(o,C));function N(){yt.set(e(h)),kt.set(e(o)),c(!1)}function J(){s(h,"title"),s(o,"asc"),yt.set(e(h)),kt.set(e(o)),c(!1)}Je();var q=Ot(),O=at(q);{var E=C=>{var I=Ka(),U=a(I),g=l(a(U),2),w=l(a(g),2),d=a(w);d.value=d.__value="title";var p=l(d);p.value=p.__value="rating";var L=l(p);L.value=L.__value="editedAt";var D=l(L);D.value=D.__value="createdAt";var H=l(D);H.value=H.__value="openedAt",t(w),t(g);var P=l(g,2),F=l(a(P),2),Q=a(F);let Y;var M=l(Q,2);let W;t(F),t(P);var de=l(P,2),ce=a(de),ee=l(ce,2);t(de),t(U),t(I),te(()=>{Y=Ie(Q,1,"btn flex-1",null,Y,{"btn-primary":e(o)==="asc"}),St(Q,"aria-pressed",e(o)==="asc"),W=Ie(M,1,"btn flex-1",null,W,{"btn-primary":e(o)==="desc"}),St(M,"aria-pressed",e(o)==="desc")}),sa(w,()=>e(h),A=>s(h,A)),v("click",Q,()=>s(o,"asc")),v("click",M,()=>s(o,"desc")),v("click",ce,J),v("click",ee,N),v("click",U,We(function(A){tt.call(this,i,A)})),v("keydown",U,function(A){tt.call(this,i,A)}),v("click",I,()=>c(!1)),v("keydown",I,function(A){tt.call(this,i,A)}),m(C,I)};z(O,C=>{c()&&C(E)})}m(x,q),qe(),y()}const tl=`\`\`\`json\r
// Example\r
[\r
  {\r
    "id": 2,\r
    "title": "Solo Leveling",\r
    "slug": "solo-leveling",\r
    "alternativeTitles": [ "Only I Level Up", "Na Honja Level Up" ],\r
    "coverImageUrl": "https://example.com/covers/solo-leveling.jpg",\r
    "description": "In a world where gates connect Earth to deadly dungeons, the weakest hunter awakens a mysterious system that allows him to level up alone.",\r
    "badges": ["Manhwa", "Action", "Fantasy", "Completed"],\r
    "tags": [ "gates", "hunters", "dungeons", "system", "shadows", "awakening"],\r
    "rating": null,\r
    "createdAt": "2024-12-15T08:20:00.000Z",\r
    "openedAt": "2025-02-07T14:10:30.000Z",\r
    "editedAt": "2025-02-07T18:45:10.000Z",\r
    "characters": [\r
      {\r
        "Name": "Sung Jin-Woo",\r
        "Image": "https://example.com/characters/sung-jin-woo.png",\r
        "role": "Main",\r
        "alternativeNames": [ "Jinwoo"],\r
        "tags": ["MC", "Solo-Player"],\r
        "description": ""\r
      },\r
      {\r
        "Name": "Cha Hae-In",\r
        "role": "Main",\r
        "Image": "https://example.com/characters/cha-hae-in.png"\r
      },\r
      {\r
        "Name": "Go Gun-Hee",\r
        "role": "supporting",\r
        "Image": "https://example.com/characters/go-gun-hee.png"\r
      }\r
    ],\r
    "rows": [\r
      {\r
        "ChapterSE": "Episode 1 ‚Äì The Weakest Hunter",\r
        "Description": "E-rank hunter Sung Jin-Woo barely survives a low-level dungeon while struggling to pay his family‚Äôs medical bills.",\r
        "Tags": ["introduction", "low-rank", "desperation"],\r
        "Characters": "Sung Jin-Woo"\r
      },\r
      {\r
        "ChapterSE": "Episode 2 ‚Äì Double Dungeon",\r
        "Description": "A hidden dungeon reveals a deadly trial where survival depends on following cryptic rules.",\r
        "Tags": ["double-dungeon", "statues", "death"],\r
        "Characters": "Sung Jin-Woo, Dungeon Party"\r
      },\r
      {\r
        "ChapterSE": "Episode 3 ‚Äì The System",\r
        "Description": "After facing death, Jin-Woo awakens to a mysterious system that only he can see.",\r
        "Tags": ["awakening", "system", "rebirth"],\r
        "Characters": "Sung Jin-Woo"\r
      }\r
    ],\r
    "category": "Manhwa",\r
    "dataType": "json"\r
  },\r
  // ...\r
]\r
\`\`\``;var al=S('<div role="alert" class="fixed bottom-2 left-2 z-300 alert alert-info alert-outline bg-base-100"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 shrink-0 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>');function oa(x,i){let _=be(i,"showAlert",8,!1),b=be(i,"message",8,"");var f=Ot(),y=at(f);{var c=h=>{var o=al(),N=l(a(o),2),J=a(N,!0);t(N),t(o),te(()=>ie(J,b())),m(h,o)};z(y,h=>{_()&&h(c)})}m(x,f)}var ll=S('<div class="text-left p-4 gap-1"><span class="loading loading-bars loading-sm text-primary"></span>Importing<span class="loading loading-bars loading-sm text-primary"></span></div>'),sl=S('<div class="fixed inset-0 bg-black/50 z-150 flex" role="presentation"><div class="bg-base-100 w-80 h-full shadow-xl p-6 flex flex-col justify-between" role="dialog" tabindex="-1"><div><h2 class="text-2xl font-bold mb-6">Menu <button class="float-right cursor-pointer" aria-label="Close menu" type="button"><!></button></h2> <ul class="menu bg-base-200 rounded-box gap-1 md:gap-3"><li><button aria-label="Import JSON" class="btn btn-md btn-ghost"><!> Import JSON</button></li> <li><button aria-label="Export data" class="btn btn-md btn-ghost"><!> Export JSON</button></li> <li><button class="btn btn-md btn-ghost" aria-label="Export Markdown"><!> Export Md</button></li> <li><button aria-label="Open categories" class="btn btn-md btn-ghost"><!> Categories</button></li> <li><button class="btn btn-md btn-ghost">JSON Format</button></li></ul> <!></div> <dialog class="modal"><div class="modal-box max-w-3xl w-85 md:w-full h-auto max-h-[65vh]"><form method="dialog"><button type="button" aria-label="CloseJSONmodal" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2 text-lg p-5"><!></button></form> <h3 class="font-bold mb-2">Import JSON Structure</h3> <div class="prose max-w-full overflow-auto text-sm"><!></div></div></dialog> <div class="text-sm text-gray-500 disable"><div class="divider"></div> <p class="font-semibold my-4">ü§ñ AI √ó <a href="https://github.com/avinash-027/" target="_blank" class="link link-primary no-underline">User-A027</a> üë®‚Äçüíª</p></div></div></div>'),rl=S('<!> <!> <input type="file" accept=".json" class="hidden"/>',1);function nl(x,i){Ue(i,!1);let _=be(i,"show",12,!1),b=k(""),f=k(!1);const y=pt();let c=k(),h=be(i,"importing",8,!1);function o(){e(c).click()}function N(p){const D=p.target.files?.[0];if(!D)return;const H=new FileReader;H.onload=P=>{try{const F=JSON.parse(P.target?.result),Q=Array.isArray(F)?F:[F];y("import",Q)}catch{s(b,"Invalid JSON file"),s(f,!0),setTimeout(()=>{s(f,!1)},2e3)}},H.readAsText(D)}function J(){y("export")}let q=Ca.parse(tl),O=k();function E(){e(O).showModal()}function C(){e(O).close()}Je();var I=rl(),U=at(I);oa(U,{get showAlert(){return e(f)},get message(){return e(b)}});var g=l(U,2);{var w=p=>{var L=sl(),D=a(L),H=a(D),P=a(H),F=l(a(P)),Q=a(F);ge(Q,()=>(le(G),j(()=>G.circleClose))),t(F),t(P);var Y=l(P,2),M=a(Y),W=a(M),de=a(W);ge(de,()=>(le(G),j(()=>G.import))),Le(),t(W),t(M);var ce=l(M,2),ee=a(ce),A=a(ee);ge(A,()=>(le(G),j(()=>G.export))),Le(),t(ee),t(ce);var Z=l(ce,2),se=a(Z),B=a(se);ge(B,()=>(le(G),j(()=>G.export))),Le(),t(se),t(Z);var T=l(Z,2),V=a(T),Ce=a(V);ge(Ce,()=>(le(G),j(()=>G.category))),Le(),t(V),t(T);var X=l(T,2),K=a(X);t(X),t(Y);var ae=l(Y,2);{var Se=re=>{var lt=ll();m(re,lt)};z(ae,re=>{h()&&re(Se)})}t(H);var Ae=l(H,2),fe=a(Ae),me=a(fe),xe=a(me),Te=a(xe);ge(Te,()=>(le(G),j(()=>G.circleClose))),t(xe),t(me);var Oe=l(me,4),Be=a(Oe);ge(Be,()=>q),t(Oe),t(fe),t(Ae),Ht(Ae,re=>s(O,re),()=>e(O)),Le(2),t(D),t(L),v("click",F,()=>_(!1)),v("click",W,o),v("click",ee,J),v("click",se,()=>y("exportMd")),v("click",V,()=>y("showCategories")),v("click",K,E),v("click",xe,C),v("click",Ae,re=>{re.target===e(O)&&C()}),v("click",D,We(function(re){tt.call(this,i,re)})),v("keydown",D,We(function(re){tt.call(this,i,re)})),v("click",L,()=>_(!1)),v("keydown",L,re=>re.key==="Escape"&&_(!1)),m(p,L)};z(g,p=>{_()&&p(w)})}var d=l(g,2);Ht(d,p=>s(c,p),()=>e(c)),v("change",d,N),m(x,I),qe()}var ol=S('<p class="text-error text-sm mt-1"> </p>'),il=S('<option class="border border-base-200"> </option>'),dl=S("<span>|</span>"),cl=S("<span> </span>"),vl=S('<div class="flex gap-2 flex-wrap mb-2 p-2 rounded-lg bg-base-200 border border-base-300"><div class="flex gap-2 w-full"><label class="floating-label w-full" for="charName"><span><span class="label-text">Name **</span></span> <input type="text" id="charName" placeholder="Name *" class="input input-sm w-full"/></label> <label class="floating-label w-full" for="charRole"><span><span class="label-text">Role</span></span> <input type="text" id="charRole" placeholder="role" class="input input-sm w-full"/></label> <button class="btn btn-sm btn-square btn-error btn-outline">‚úï</button></div> <label class="floating-label w-full" for="charImgUrl"><span><span class="label-text">Image URL</span></span> <input type="text" id="charImgUrl" placeholder="Img URL" class="input input-sm w-full"/></label> <details class="w-full mt-2"><summary class="cursor-pointer text-sm font-medium text-primary text-center">Extra Details</summary> <div class="space-y-2 mt-2"><label class="floating-label w-full" for="charAltNames"><span><span class="label-text">alternativeNames</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <input id="charAltNames" placeholder="Alternative Names [Ex: Name01, name-01]" class="input input-sm w-full"/></label> <label class="floating-label w-full" for="charTags"><span><span class="label-text">char-Tags</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <input id="charTags" placeholder="Tags [Ex: Hero, Villain]" class="input input-sm w-full"/></label> <label class="floating-label w-full" for="charDescription"><span><span class="label-text">Description</span></span> <textarea id="charDescription" placeholder="Description" class="textarea textarea-bordered w-full"></textarea></label></div></details></div>'),ul=S('<div class="card bg-base-200 border border-base-300 p-4"><div class="flex gap-2 mb-2"><label class="floating-label w-full"><span>Chapter *</span> <input type="text" placeholder="Chapter (e.g., 1-5)" class="input input-bordered w-full input-sm flex-1"/></label> <button class="btn btn-square btn-error btn-outline btn-sm"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-4 h-4 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <label class="floating-label w-full"><span>Description</span> <textarea placeholder="Description" class="textarea textarea-bordered w-full textarea-sm mb-2"></textarea></label> <label class="floating-label w-full"><span>Tags (comma separated)</span> <input type="text" placeholder="Tags (comma separated)" class="input input-bordered w-full input-sm mb-2"/></label> <label class="floating-label w-full"><span>Characters</span> <input type="text" placeholder="Characters" class="input input-bordered w-full input-sm"/></label></div>'),bl=S('<div class="fixed inset-0 bg-black/50 z-150 flex items-center justify-center p-4"><div class="bg-base-100 w-full max-w-4xl max-h-[90vh] overflow-auto rounded-lg shadow-xl"><div class="bg-base-100 border-b border-base-300 p-4 flex justify-between items-center"><h2 class="text-2xl font-bold"> </h2> <button class="btn btn-square btn-ghost btn-sm"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-4"><div class="form-control"><label for="newtitle" class="floating-label"><span>Title <span class="label-text-alt text-info italic">: required</span></span> <input id="newtitle" type="text" placeholder="Title" class="input input-bordered w-full" required=""/></label> <!></div> <div class="form-control"><label for="newAltTitles" class="floating-label"><span><span class="label-text">Alternative Titles</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <input id="newAltTitles" type="text" placeholder="Alternative Titles [Ex: Title1, Title2]" class="input input-bordered w-full"/></label></div> <div class="form-control"><label for="newCoverImg" class="floating-label"><span class="label-text">Cover Image URL</span> <input id="newCoverImg" type="text" placeholder="Cover Image URL: Web Img Link" class="input input-bordered w-full"/></label></div> <div class="form-control"><label class="floating-label"><span class="label-text">Description</span> <textarea placeholder="Description" class="textarea textarea-bordered w-full h-24"></textarea></label></div> <div class="form-control"><label for="newBadges" class="floating-label"><span><span class="label-text">Badges</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <textarea id="newBadges" placeholder="Badges [Ex: Completed, Ongoing, Author, Artist, Favorite]" class="textarea textarea-bordered w-full"></textarea></label></div> <div class="form-control"><label for="newTags" class="floating-label"><span><span class="label-text">Tags</span> <span class="label-text-alt text-info italic">: Comma separated</span></span> <textarea id="newTags" placeholder="Tags [Ex: Themes, Genres]" class="textarea textarea-bordered w-full"></textarea></label></div> <div class="form-control"><label class="floating-label"><span class="label-text font-semibold">Category</span></label> <select class="select select-bordered w-full"><option class="border border-base-content/20 hover:bg-base-200">All</option><!></select></div> <div class="form-control"><label class="flex flex-wrap gap-2 justify-between"><span><span class="label-text font-semibold">Rating <span class="text-info">(0‚Äì10)</span></span></span> <div class="text-xs md:text-sm text-info"><span class="font-semibold">Value:</span> </div></label> <div class="w-full max-w-xs"><input type="range" min="0" max="10" step="1" class="range range-xs range-info"/> <div class="flex justify-between px-2.5 mt-1 text-xs"></div> <div class="flex justify-between px-2.5 mt-1 text-xs"></div></div></div> <div class="divider">Characters</div> <div class="space-y-2"><!> <button class="btn btn-outline btn-sm">+ Add Character</button></div> <div class="divider">Chapters</div> <div class="space-y-2"><!> <button class="btn btn-outline btn-sm">+ Add Chapter</button></div></div> <div class="sticky bottom-0 bg-base-100 border-t border-base-300 p-4 flex gap-2 justify-end"><button class="btn btn-outline">Cancel</button> <button class="btn btn-primary">Save</button></div></div></div>');function pl(x,i){Ue(i,!1);const _=()=>ke(He,"$categories",b),[b,f]=gt(),y=k();let c=be(i,"entryId",8,null);const h=pt();let o=k(""),N=k(""),J=k(""),q=k(""),O=k(""),E=k(0),C=k(""),I=k("All"),U=k(!1),g=k(""),w=k([]),d=k([]);zt(async()=>{if(c()!==null){const u=await oe.getEntryById(c());u&&(s(o,u.title),s(N,u.alternativeTitles.join(", ")),s(J,u.coverImageUrl||""),s(q,u.description),s(O,u.badges.join(", ")),s(E,Number(u.rating)),s(C,u.tags.join(", ")),s(I,u.category),s(w,u.characters.map(n=>({...n,_alternativeNamesString:(n.alternativeNames??[]).join(", "),_tagsString:(n.tags??[]).join(", ")}))),s(d,u.rows.map(n=>({...structuredClone(n),_tagsText:n.tags.join(", ")}))))}});function p(){s(w,[...e(w),{name:"",image:"",role:"",alternativeNames:[],tags:[],description:"",_alternativeNamesString:"",_tagsString:""}])}function L(u){s(w,e(w).filter((n,R)=>R!==u))}function D(){s(d,[...e(d),{chapterSE:"",description:"",characters:"",tags:[],_tagsText:""}])}function H(u){s(d,e(d).filter((n,R)=>R!==u))}async function P(){const u={title:e(o),slug:e(o).toLowerCase().trim().replace(/[\s]+/g,"-").replace(/[^a-z0-9\-]/g,""),alternativeTitles:e(N).split(",").map(n=>n.trim()).filter(Boolean),coverImageUrl:e(J)||null,description:e(q),badges:e(O).split(",").map(n=>n.trim()).filter(Boolean),rating:Number(e(E)),createdAt:null,openedAt:null,editedAt:null,tags:e(C).split(",").map(n=>n.trim()).filter(Boolean),category:e(I)||"All",dataType:"Lib",characters:e(w).filter(n=>n.name).map(n=>({name:n.name,image:n.image,role:n.role,description:n.description,alternativeNames:(n._alternativeNamesString??"").split(",").map(R=>R.trim()).filter(Boolean),tags:(n._tagsString??"").split(",").map(R=>R.trim()).filter(Boolean)})),rows:e(d).filter(n=>n.chapterSE).map(n=>({chapterSE:n.chapterSE,description:n.description,characters:n.characters,tags:n._tagsText.split(",").map(R=>R.trim()).filter(Boolean)}))};c()!==null?await oe.updateEntry(c(),u):await oe.addEntry(u),h("save")}function F(){h("cancel")}Ve(()=>e(o),()=>{s(y,e(o).toLowerCase().trim().replace(/[\s]+/g,"-").replace(/[^a-z0-9\-]/g,""))}),Ve(()=>(e(o),le(c()),e(y),e(U),Ct),()=>{e(o)?(async()=>{if(c()!==null){const u=await oe.getEntryBySlug(e(y));s(U,!!u&&u.id!==c())}else s(U,!!await oe.getEntryBySlug(e(y)));s(g,e(U)?`This title generates a slug(${e(y)}) that already Exists. Change title text`:""),await Ct()})():(s(U,!1),s(g,""))}),Vt(),Je();var Q=bl(),Y=a(Q),M=a(Y),W=a(M),de=a(W,!0);t(W);var ce=l(W,2);t(M);var ee=l(M,2),A=a(ee),Z=a(A),se=l(a(Z),2);ue(se),t(Z);var B=l(Z,2);{var T=u=>{var n=ol(),R=a(n,!0);t(n),te(()=>ie(R,e(g))),m(u,n)};z(B,u=>{e(U)&&u(T)})}t(A);var V=l(A,2),Ce=a(V),X=l(a(Ce),2);ue(X),t(Ce),t(V);var K=l(V,2),ae=a(K),Se=l(a(ae),2);ue(Se),t(ae),t(K);var Ae=l(K,2),fe=a(Ae),me=l(a(fe),2);_t(me),t(fe),t(Ae);var xe=l(Ae,2),Te=a(xe),Oe=l(a(Te),2);_t(Oe),t(Te),t(xe);var Be=l(xe,2),re=a(Be),lt=l(a(re),2);_t(lt),t(re),t(Be);var Ge=l(Be,2),st=l(a(Ge),2),rt=a(st);rt.value=rt.__value="All";var At=l(rt);De(At,1,()=>(_(),j(()=>_().filter(u=>u!=="All"))),ze,(u,n)=>{var R=il(),ve=a(R,!0);t(R);var _e={};te(()=>{ie(ve,e(n)),_e!==(_e=e(n))&&(R.value=(R.__value=e(n))??"")}),m(u,R)}),t(st),t(Ge);var ft=l(Ge,2),nt=a(ft),Pe=l(a(nt),2),Ut=l(a(Pe));t(Pe),t(nt);var ot=l(nt,2),Qe=a(ot);ue(Qe);var mt=l(Qe,2);De(mt,4,()=>j(()=>Array.from({length:11},(u,n)=>n)),ze,(u,n)=>{var R=dl();te(()=>Ie(R,1,Kt(n===e(E)?"text-info font-bold":""))),m(u,R)}),t(mt);var it=l(mt,2);De(it,4,()=>j(()=>Array.from({length:11},(u,n)=>n)),ze,(u,n)=>{var R=cl(),ve=a(R,!0);t(R),te(()=>{Ie(R,1,Kt(n===e(E)?"text-info font-bold":"")),ie(ve,n)}),m(u,R)}),t(it),t(ot),t(ft);var Ye=l(ft,4),Et=a(Ye);De(Et,1,()=>e(w),ze,(u,n,R)=>{var ve=vl(),_e=a(ve),$e=a(_e),Xe=l(a($e),2);ue(Xe),t($e);var Ke=l($e,2),Ee=l(a(Ke),2);ue(Ee),t(Ke);var vt=l(Ke,2);t(_e);var Me=l(_e,2),et=l(a(Me),2);ue(et),t(Me);var Re=l(Me,2),Fe=l(a(Re),2),ye=a(Fe),ht=l(a(ye),2);ue(ht),t(ye);var wt=l(ye,2),Nt=l(a(wt),2);ue(Nt),t(wt);var xt=l(wt,2),Lt=l(a(xt),2);_t(Lt),t(xt),t(Fe),t(Re),t(ve),ne(Xe,()=>e(n).name,he=>(e(n).name=he,je(()=>e(w)))),ne(Ee,()=>e(n).role,he=>(e(n).role=he,je(()=>e(w)))),v("click",vt,()=>L(R)),ne(et,()=>e(n).image,he=>(e(n).image=he,je(()=>e(w)))),ne(ht,()=>e(n)._alternativeNamesString,he=>(e(n)._alternativeNamesString=he,je(()=>e(w)))),ne(Nt,()=>e(n)._tagsString,he=>(e(n)._tagsString=he,je(()=>e(w)))),ne(Lt,()=>e(n).description,he=>(e(n).description=he,je(()=>e(w)))),m(u,ve)});var dt=l(Et,2);t(Ye);var Tt=l(Ye,4),$t=a(Tt);De($t,1,()=>e(d),ze,(u,n,R)=>{var ve=ul(),_e=a(ve),$e=a(_e),Xe=l(a($e),2);ue(Xe),t($e);var Ke=l($e,2);t(_e);var Ee=l(_e,2),vt=l(a(Ee),2);_t(vt),t(Ee);var Me=l(Ee,2),et=l(a(Me),2);ue(et),t(Me);var Re=l(Me,2),Fe=l(a(Re),2);ue(Fe),t(Re),t(ve),ne(Xe,()=>e(n).chapterSE,ye=>(e(n).chapterSE=ye,je(()=>e(d)))),v("click",Ke,()=>H(R)),ne(vt,()=>e(n).description,ye=>(e(n).description=ye,je(()=>e(d)))),ne(et,()=>e(n)._tagsText,ye=>(e(n)._tagsText=ye,je(()=>e(d)))),ne(Fe,()=>e(n).characters,ye=>(e(n).characters=ye,je(()=>e(d)))),m(u,ve)});var Mt=l($t,2);t(Tt),t(ee);var jt=l(ee,2),ct=a(jt),Ze=l(ct,2);t(jt),t(Y),t(Q),te(()=>{ie(de,c()!==null?"Edit Entry":"New Entry"),ie(Ut,` ${e(E)??""} - ${le(ea),e(E),j(()=>ea[e(E)])??""}`),Ze.disabled=!e(o)||!e(I)||e(U)}),v("click",ce,F),ne(se,()=>e(o),u=>s(o,u)),ne(X,()=>e(N),u=>s(N,u)),ne(Se,()=>e(J),u=>s(J,u)),ne(me,()=>e(q),u=>s(q,u)),ne(Oe,()=>e(O),u=>s(O,u)),ne(lt,()=>e(C),u=>s(C,u)),sa(st,()=>e(I),u=>s(I,u)),ne(Qe,()=>e(E),u=>s(E,u)),v("click",dt,p),v("click",Mt,D),v("click",ct,F),v("click",Ze,P),v("click",Y,We(function(u){tt.call(this,i,u)})),v("click",Q,F),m(x,Q),qe(),f()}var gl=S('<input class="input input-sm input-bordered flex-1 mr-2"/>'),fl=S('<span class="truncate cursor-pointer"> </span>'),ml=S('<button class="btn btn-sm btn-success">Save</button>'),hl=S('<button class="btn btn-xs btn-info">Edit</button> <button class="btn btn-xs btn-error">Delete</button>',1),wl=S('<div class="flex gap-2"><!></div>'),xl=S('<li class="mb-2 flex items-center justify-between"><!> <!></li>'),_l=S(`<div class="fixed inset-0 z-150 flex bg-black/50" role="button" tabindex="0" aria-label="Close categories modal"><div class="h-full w-96 bg-base-100 p-6 shadow-xl flex flex-col" role="document"><h2 class="mb-6 text-2xl font-bold">Categories</h2> <div class="flex-1 overflow-y-auto pr-1 border border-base-content/30 rounded-xl p-1 px-2"><ul class="mb-4"></ul></div> <div class="flex gap-2 mt-3"><input class="input-bordered input flex-1" placeholder="New category"/> <button aria-label="Add new category" class="btn btn-primary">Add</button></div> <button class="btn btn-soft mt-2 w-full">Close</button> <div class="mt-1 px-1 text-xs justify-center text-success"><span> </span></div> <div class="my-2 alert alert-default alert-soft "><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 shrink-0 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>When a category is <b>deleted</b>, all entries in that category are <b>moved to the 'All'</b> category</span></div></div></div>`);function yl(x,i){Ue(i,!1);const _=()=>ke(He,"$categories",b),[b,f]=gt();let y=be(i,"show",8,!1);const c=pt();let h=k(""),o=k(null),N=k("");function J(p){s(o,p),s(N,p)}async function q(p){const L=e(N).trim();if(!L||L==="All"||L===p){s(o,null);return}await He.rename(p,L),c("rename",{old:p,new:L}),s(o,null),I(`Category renamed to "${L}"`)}async function O(){const p=e(h).trim();!p||p==="All"||(await He.add(p),s(h,""))}let E=k(""),C=k(!1);function I(p,L=2e3){s(E,p),s(C,!0),setTimeout(()=>{s(C,!1)},L)}async function U(p){p!=="All"&&(await oe.moveCategoryToAll(p),await He.remove(p),I(`Category "${p}" deleted. Entries moved to 'All'.`))}zt(()=>{He.load()}),Je();var g=Ot(),w=at(g);{var d=p=>{var L=_l(),D=a(L),H=l(a(D),2),P=a(H);De(P,5,()=>(_(),j(()=>["All",..._().filter(ee=>ee!=="All")])),ze,(ee,A)=>{var Z=xl(),se=a(Z);{var B=X=>{var K=gl();ue(K),ga(K),ne(K,()=>e(N),ae=>s(N,ae)),v("keydown",K,ae=>ae.key==="Enter"&&q(e(A))),v("blur",K,()=>q(e(A))),m(X,K)},T=X=>{var K=fl(),ae=a(K,!0);t(K),te(()=>ie(ae,e(A))),v("dblclick",K,()=>J(e(A))),m(X,K)};z(se,X=>{e(o)===e(A)?X(B):X(T,!1)})}var V=l(se,2);{var Ce=X=>{var K=wl(),ae=a(K);{var Se=fe=>{var me=ml();v("click",me,We(()=>q(e(A)))),m(fe,me)},Ae=fe=>{var me=hl(),xe=at(me),Te=l(xe,2);v("click",xe,We(()=>J(e(A)))),v("click",Te,We(()=>U(e(A)))),m(fe,me)};z(ae,fe=>{e(o)===e(A)?fe(Se):fe(Ae,!1)})}t(K),m(X,K)};z(V,X=>{e(A)!=="All"&&X(Ce)})}t(Z),m(ee,Z)}),t(P),t(H);var F=l(H,2),Q=a(F);ue(Q);var Y=l(Q,2);t(F);var M=l(F,2),W=l(M,2),de=a(W),ce=a(de,!0);t(de),t(W),Le(2),t(D),t(L),te(()=>{ra(W,`min-height: 1.55rem; max-height: 1.55rem; visibility: ${e(C)?"visible":"hidden"}`),ie(ce,e(E))}),ne(Q,()=>e(h),ee=>s(h,ee)),v("click",Y,O),v("click",M,()=>c("close")),v("click",D,We(function(ee){tt.call(this,i,ee)})),v("click",L,()=>c("close")),m(p,L)};z(w,p=>{y()&&p(d)})}m(x,g),qe(),f()}var kl=S('<li><input type="radio" name="theme-dropdown" class="theme-controller btn btn-sm btn-block btn-ghost justify-start"/></li>'),Cl=S('<div><div tabindex="0" role="button" class="btn p-2 m-0 rounded-2xl">üé® <svg width="12px" height="12px" class="inline-block h-1 w-1 fill-current opacity-60" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048"><path d="M1799 349l242 241-1017 1017L7 590l242-241 775 775 775-775z"></path></svg></div> <ul tabindex="-1" class="dropdown-content menu bg-base-300 rounded-2xl z-150 w-52 p-2 shadow-sm"></ul></div>');function Sl(x,i){Ue(i,!1);const _=()=>ke(ta,"$theme",b),[b,f]=gt(),y=["light","cupcake","night","dark","emerald","fantasy","luxury","acid","coffee","retro","business","dracula","dim","garden"];let c=be(i,"dropdownDirection",8,"dropdown-end");function h(J){ta.set(J)}Je();var o=Cl(),N=l(a(o),2);De(N,5,()=>y,ze,(J,q)=>{var O=kl(),E=a(O);ue(E),t(O),te(()=>{St(E,"aria-label",e(q)),Sa(E,e(q)),Aa(E,_()===e(q))}),v("change",E,()=>h(e(q))),m(J,O)}),t(N),t(o),te(()=>Ie(o,1,`dropdown ${c()}`)),m(x,o),qe(),f()}var Al=S('<span class="absolute -top-6 -left-2 flex h-5 w-20 items-center justify-center rounded-full bg-red-600 text-xs font-bold text-white p-1"> </span>'),El=S('<li><button class="w-full border border-base-300 text-left hover:bg-base-200"> </button></li>'),Tl=S('<ul class="dropdown-content menu mt-3 w-52 rounded-box bg-base-100 p-2 shadow-md"></ul>'),$l=S('<div class="fixed top-16 left-1/2 z-50 flex items-center gap-4 rounded-lg border border-base-300 bg-base-100 p-2 shadow-md select-none"><div role="button" tabindex="0" class="cursor-grab rounded-md bg-base-200 p-2 hidden md:inline-block" aria-label="Drag toolbar">‚†ø</div> <div class="md:tooltip" data-tip="Delete"><button class="btn relative btn-square btn-error" aria-label="Delete selected"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 7h12M10 11v6m4-6v6M5 7l1 12a2 2 0 002 2h8a2 2 0 002-2l1-12M9 7V4a1 1 0 011-1h4a1 1 0 011 1v3"></path></svg> <!></button></div> <div class="md:tooltip" data-tip="Select all"><button class="btn btn-square btn-ghost" aria-label="Select all"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7M5 7l4 4L19 1"></path></svg></button></div> <div class="md:tooltip" data-tip="Deselect all"><button class="btn btn-square opacity-50 btn-ghost" aria-label="Deselect all"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current opacity-20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7M5 7l4 4L19 1"></path></svg></button></div> <div><div class="md:tooltip" data-tip="Move to category"><button class="btn btn-square btn-ghost" aria-label="Move to category"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4h16v4H4V4zm0 8h16v4H4v-4zm0 8h16v4H4v-4z"></path></svg></button></div> <!></div> <div class="md:tooltip" data-tip="Cancel"><button class="btn btn-square bg-red-700 text-white btn-ghost hover:bg-red-500" aria-label="Cancel selection"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div role="button" tabindex="0" class="drag-handle cursor-grab rounded-md bg-base-200 p-2" aria-label="Drag toolbar">‚†ø</div></div>');function Ml(x,i){Ue(i,!1);let _=be(i,"selectedCount",8,0),b=be(i,"categoryList",24,()=>[]),f=be(i,"showCategoryDropdown",8,!1);const y=pt();let c=!1,h=0,o=0,N=k(0),J=k(0);function q(A){c=!0,h=A.clientX-e(N),o=A.clientY-e(J),window.addEventListener("pointermove",O),window.addEventListener("pointerup",E)}function O(A){c&&(s(N,A.clientX-h),s(J,A.clientY-o))}function E(){c=!1,window.removeEventListener("pointermove",O),window.removeEventListener("pointerup",E)}Je();var C=$l(),I=a(C),U=l(I,2),g=a(U),w=l(a(g),2);{var d=A=>{var Z=Al(),se=a(Z,!0);t(Z),te(()=>ie(se,_())),m(A,Z)};z(w,A=>{_()>0&&A(d)})}t(g),t(U);var p=l(U,2),L=a(p);t(p);var D=l(p,2),H=a(D);t(D);var P=l(D,2);let F;var Q=a(P),Y=a(Q);t(Q);var M=l(Q,2);{var W=A=>{var Z=Tl();De(Z,5,b,ze,(se,B)=>{var T=El(),V=a(T),Ce=a(V,!0);t(V),t(T),te(()=>ie(Ce,e(B))),v("click",V,()=>y("moveCategory",e(B))),m(se,T)}),t(Z),m(A,Z)};z(M,A=>{le(f()),le(b()),j(()=>f()&&b().length>0)&&A(W)})}t(P);var de=l(P,2),ce=a(de);t(de);var ee=l(de,2);t(C),te(()=>{ra(C,`transform: translate(calc(-50% + ${e(N)??""}px), ${e(J)??""}px);`),g.disabled=_()===0,F=Ie(P,1,"dropdown dropdown-end",null,F,{"dropdown-open":f()}),Y.disabled=_()===0}),v("pointerdown",I,q),v("click",g,()=>y("delete")),v("click",L,()=>y("selectAll")),v("click",H,()=>y("deselectAll")),v("click",Y,()=>y("toggleCategoryDropdown")),v("click",ce,()=>y("cancel")),v("pointerdown",ee,q),m(x,C),qe()}var jl=Wt('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-current" fill="none" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4h16v16H4V4z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M8 12h8"></path></svg>'),Nl=Wt('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-current" fill="none" viewBox="0 0 24 24" stroke-width="2"><rect x="4" y="4" width="16" height="16" stroke="currentColor" stroke-width="2"></rect><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h8"></path></svg>'),Ll=S('<button><div class="indicator"><span class="indicator-item bg-base-100 text-xs rounded-3xl px-1.5 py-0.5 -top-1"> </span> <div class="z-10"> </div></div></button>'),Dl=S('<div class="flex items-center justify-center"><span class="loading loading-dots loading-sm text-primary"></span> <span class="loading loading-ring loading-sm text-primary"></span> <span class="loading loading-dots loading-sm text-primary"></span></div>'),Il=S('<div class="flex items-center justify-center"><span class="loading loading-bars loading-sm text-primary"></span></div>'),Ol=S('<div class="flex h-screen flex-col"><div class="navbar bg-base-100 shadow-lg"><div class="flex-none"><button class="btn btn-square btn-ghost" aria-label="Open menu"><!></button></div> <div class="flex-1"><span class="text-md md:text-xl font-bold"> <span class="hide-on-320 svelte-j9gjs9"> </span></span></div> <div class="flex-none"><button class="btn btn-square btn-ghost" aria-label="Toggle search"><!></button> <div class="tooltip-bottom tooltip" data-tip="Open filters"><button class="btn btn-square btn-ghost" aria-label="Open filters"><!></button></div> <div class="tooltip-bottom tooltip" data-tip="Select entries"><button class="btn btn-square btn-ghost" aria-label="Select entries"><!></button></div> <button class="btn btn-square btn-ghost inline-block md:hidden" aria-label="Toggle grid columns" title="Toggle grid columns"><!></button> <!></div></div> <!> <div class="tabs tabs-border flex-nowrap gap-3 overflow-x-auto bg-base-200 px-2 pt-2 pb-1 scrollbar-hide"><button class="p-0 m-0" title="Toggle unique entries" aria-label="Show unique entries only"><!></button> <button><div class="z-10">All</div> <span class="bg-base-100 text-xs rounded-3xl px-1.5 py-0.5"> </span></button> <!></div> <button class="z-100 btn fixed right-6 bottom-6 btn-circle shadow-xl btn-lg btn-primary" aria-label="Add new entry"><!></button> <!>  <div class="flex-1 overflow-auto p-4"><!> <!> <!></div></div> <!> <!> <!> <!> <!> <!>',1);function Bl(x,i){Ue(i,!1);const _=()=>ke(Ne,"$searchQuery",o),b=()=>ke(ja,"$filteredEntries",o),f=()=>ke(bt,"$selectedCategory",o),y=()=>ke(He,"$categories",o),c=()=>ke(It,"$entries",o),h=()=>ke(la,"$gridCols",o),[o,N]=gt(),J=k(),q=k();let O=k(!1),E=k(!1),C=k(!1),I=k(!1),U=k(null),g=k(null),w=k(!1),d=k(new Set),p=k(!1);const L=pt();let D=k(!1),H=k(!1),P=k(""),F=k(!1);function Q(){la.update(r=>r===3?4:3)}async function Y(){const r=await oe.getAllEntries();It.set(r),Array.from(new Set(r.map($=>$.category).filter($=>$&&$!=="All"))),He.load()}zt(async()=>{await Y(),Na();const r=localStorage.getItem("selectedCategory");r&&bt.set(r)});function M(){s(U,null),s(I,!0),s(p,!1)}async function W(){s(I,!1),s(U,null),await Y()}function de(){s(I,!1),s(U,null)}async function ce(){s(C,!1),s(g,null),await Y()}function ee(){s(C,!1),s(g,null)}let A;function Z(r){s(P,r),s(F,!0),clearTimeout(A),A=window.setTimeout(()=>{s(F,!1)},1500)}let se=k(!1);async function B(r){s(se,!0),await oe.importFromJSON(r),await Y(),s(se,!1),s(E,!1)}async function T(){const r=await oe.exportToJSON(),$=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),we=URL.createObjectURL($),pe=document.createElement("a");pe.href=we,pe.download=`lib-export-${new Date().toISOString()}.json`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(we),s(E,!1),Z("Exported to JSON üëç :Downloads/")}async function V(){const r=await oe.exportToMarkdown(),$=new Blob([r],{type:"text/markdown"}),we=URL.createObjectURL($),pe=document.createElement("a");pe.href=we,pe.download=`lib-export-${new Date().toISOString()}.md`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(we),s(E,!1),Z("Exported to Markdown üëç :Downloads/")}async function Ce(r){await oe.moveCategoryToAll(r),f()===r&&bt.set("All"),await Y(),s(w,!1)}let X=k(!1);async function K(r){for(const we of e(d))c().find(Dt=>Dt.id===we)&&await oe.updateEntry(we,{category:r});e(d).clear(),s(d,new Set(e(d))),s(p,!1);const $=await oe.getAllEntries();It.set($),s(X,!1)}function ae(r){e(d).has(r)?e(d).delete(r):e(d).add(r),s(d,new Set(e(d)))}let Se=k(!1);async function Ae(){if(e(d).size===0)return;s(Se,!0);const r=Array.from(e(d));for(const $ of r)await oe.deleteEntry($);e(d).clear(),s(d,new Set(e(d))),await Y(),s(p,!1),s(Se,!1)}function fe(){s(d,new Set(b().map(r=>r.id)))}function me(){e(d).clear(),s(d,new Set(e(d)))}Ve(()=>_(),()=>{_().trim().length>0&&s(D,!0)}),Ve(()=>(e(H),b(),aa),()=>{s(J,e(H)?Array.from(new Map(b().map(r=>[aa(r),r])).values()):b())}),Ve(()=>y(),()=>{s(q,y().filter(r=>r!=="All"))}),Vt(),Je();var xe=Ol(),Te=at(xe),Oe=a(Te),Be=a(Oe),re=a(Be),lt=a(re);ge(lt,()=>(le(G),j(()=>G.menu))),t(re),t(Be);var Ge=l(Be,2),st=a(Ge),rt=a(st);rt.nodeValue="Lib ";var At=l(rt),ft=a(At);t(At),t(st),t(Ge);var nt=l(Ge,2),Pe=a(nt),Ut=a(Pe);ge(Ut,()=>(le(G),j(()=>G.search))),t(Pe);var ot=l(Pe,2),Qe=a(ot),mt=a(Qe);ge(mt,()=>(le(G),j(()=>G.filter))),t(Qe),t(ot);var it=l(ot,2),Ye=a(it),Et=a(Ye);ge(Et,()=>(le(G),j(()=>G.select))),t(Ye),t(it);var dt=l(it,2),Tt=a(dt);ge(Tt,()=>(le(G),j(()=>G.toggleGrid))),t(dt);var $t=l(dt,2);Sl($t,{dropdownDirection:"dropdown-bottom dropdown-end"}),t(nt),t(Oe);var Mt=l(Oe,2);{var jt=r=>{Xa(r,{get show(){return e(D)},set show($){s(D,$)},$$legacy:!0})};z(Mt,r=>{e(D)&&r(jt)})}var ct=l(Mt,2),Ze=a(ct),u=a(Ze);{var n=r=>{var $=jl();m(r,$)},R=r=>{var $=Nl();m(r,$)};z(u,r=>{e(H)?r(n):r(R,!1)})}t(Ze);var ve=l(Ze,2);let _e;var $e=l(a(ve),2),Xe=a($e,!0);t($e),t(ve);var Ke=l(ve,2);De(Ke,1,()=>e(q),ze,(r,$)=>{var we=Ll();let pe;var Dt=a(we),qt=a(Dt),ba=a(qt,!0);t(qt);var Yt=l(qt,2),pa=a(Yt,!0);t(Yt),t(Dt),t(we),te(Rt=>{pe=Ie(we,1,"tab",null,pe,{"tab-active":f()===e($)}),ie(ba,Rt),ie(pa,e($))},[()=>(c(),e($),j(()=>c().filter(Rt=>Rt.category===e($)).length))]),v("click",we,()=>bt.set(e($))),m(r,we)}),t(ct);var Ee=l(ct,2),vt=a(Ee);ge(vt,()=>(le(G),j(()=>G.add))),t(Ee);var Me=l(Ee,2);{var et=r=>{Ml(r,{get selectedCount(){return e(d),j(()=>e(d).size)},get categoryList(){return e(q)},get showCategoryDropdown(){return e(X)},$$events:{delete:Ae,selectAll:fe,deselectAll:me,toggleCategoryDropdown:()=>s(X,!e(X)),moveCategory:$=>K($.detail),cancel:()=>{s(p,!1),s(X,!1),e(d).clear(),s(d,new Set(e(d)))}}})};z(Me,r=>{e(p)&&r(et)})}var Re=l(Me,2),Fe=a(Re);{var ye=r=>{var $=Dl();m(r,$)};z(Fe,r=>{e(Se)&&r(ye)})}var ht=l(Fe,2);{var wt=r=>{var $=Il();m(r,$)};z(ht,r=>{e(se)&&r(wt)})}var Nt=l(ht,2);Wa(Nt,{get entries(){return e(J)},get selectionMode(){return e(p)},get selectedEntries(){return e(d)},get gridCols(){return h()},$$events:{toggleSelect:r=>ae(r.detail)}}),t(Re),t(Te);var xt=l(Te,2);{var Lt=r=>{el(r,{get show(){return e(O)},set show($){s(O,$)},$$legacy:!0})};z(xt,r=>{e(O)&&r(Lt)})}var he=l(xt,2);{var ia=r=>{nl(r,{get importing(){return e(se)},get show(){return e(E)},set show($){s(E,$)},$$events:{import:$=>B($.detail),export:T,exportMd:V,showCategories:()=>{s(E,!1),s(w,!0)}},$$legacy:!0})};z(he,r=>{e(E)&&r(ia)})}var Gt=l(he,2);{var da=r=>{yl(r,{get show(){return e(w)},$$events:{close:()=>s(w,!1),rename:$=>L("renameCategory",$.detail),delete:$=>Ce($.detail)}})};z(Gt,r=>{e(w)&&r(da)})}var Pt=l(Gt,2);{var ca=r=>{Ea(r,{get entryId(){return e(g)},$$events:{save:ce,cancel:ee}})};z(Pt,r=>{e(C)&&r(ca)})}var Qt=l(Pt,2);{var va=r=>{pl(r,{get entryId(){return e(U)},$$events:{save:W,cancel:de}})};z(Qt,r=>{e(I)&&r(va)})}var ua=l(Qt,2);oa(ua,{get showAlert(){return e(F)},get message(){return e(P)}}),te(()=>{ie(ft,`(${c(),j(()=>c().length)??""})`),_e=Ie(ve,1,"tab relative",null,_e,{"tab-active":f()==="All"}),ie(Xe,(c(),j(()=>c().length)))}),v("click",re,()=>s(E,!0)),v("click",Pe,()=>{s(D,!e(D)),s(p,!1)}),v("click",Qe,()=>{s(O,!e(O)),s(p,!1)}),v("click",Ye,()=>{e(p)&&(e(d).clear(),s(d,new Set(e(d))),s(X,!1)),s(p,!e(p))}),v("click",dt,Q),v("click",Ze,()=>s(H,!e(H))),v("click",ve,()=>bt.set("All")),v("click",Ee,M),m(x,xe),qe(),N()}function Gl(x){ha("1uha8ag",i=>{fa(()=>{ma.title="lib"})}),Bl(x,{})}export{Gl as component};

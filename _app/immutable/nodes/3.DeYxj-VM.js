import{a as d,f as v}from"../chunks/DX4yK0P1.js";import{i as Ae}from"../chunks/DXBN8Mnz.js";import{o as Me}from"../chunks/by3gx3va.js";import{G as Ce,R as Ea,T as De,J as ia,M as Ee,B as a,U as Be,O as r,Q as o,V as j,$ as Se,u as n,P as t,W as L,K as _,D as Te,X as Le}from"../chunks/RLt0E5kG.js";import{e as M,s as C}from"../chunks/C99UrfaG.js";import{i as g,s as ze,a as Ie}from"../chunks/DF3Y441m.js";import{g as na,d as Q,s as He,b as $e,E as Ne,e as O,i as U,R as Ba,h as Sa}from"../chunks/CmJLYYez.js";import{h as Pe,s as I,r as Ta,a as La,b as za}from"../chunks/D79lr1mI.js";import{s as Re,g as qe}from"../chunks/Dg2EZodX.js";const Oe=!1,Ue=!1,Lt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Oe,ssr:Ue},Symbol.toStringTag,{value:"Module"})),Ve=()=>{const H=Re;return{page:{subscribe:H.page.subscribe},navigating:{subscribe:H.navigating.subscribe},updated:H.updated}},Fe={subscribe(H){return Ve().page.subscribe(H)}};var Ge=v('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50" role="dialog" aria-modal="true"><div class="bg-base-100 rounded-lg p-4 m-4 shadow-lg w-96"><h3 class="text-lg font-bold mb-4">Confirm Delete</h3> <p class="mb-6">Are you sure you want to delete this entry?</p> <div class="flex justify-end gap-2"><button class="btn btn-soft">Cancel</button> <button class="btn btn-error">Delete</button></div></div></div>'),Je=v('<div class="fixed inset-0 bg-base-100/1 backdrop-blur-[3px] flex items-center justify-center z-50 p-4"><img class="max-h-full max-w-full rounded-lg shadow-2xl"/> <button class="absolute top-4 right-4 btn btn-circle btn-md btn-ghost text-white bg-base-300">✕</button></div>'),Ke=v('<img class="w-31 h-46 md:w-35 md:h-55 object-cover rounded-lg"/>'),Qe=v('<div class="w-34 h-50 bg-base-300 rounded-lg flex items-center justify-center text-base-content/20"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-16 h-16 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'),We=v('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words hidden md:inline-block"> </p>'),Xe=v('<span class="badge badge-primary badge-sm md:badge-md"> </span>'),Ye=v('<div class="flex flex-wrap gap-1 md:gap-2 mb-2 md:mb-4" title="badges"></div>'),Ze=v('<button class="btn badge-soft badge-outline badge-sm md:badge-md block break-all whitespace-normal line-clamp-2" title="category"> </button>'),at=v('<div class="badge badge-dash badge-sm md:badge-md" title="dataType"> </div>'),et=v('<span class="text-xm badge badge-sm badge-ghost gap-0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" class="w-3 h-3 stroke-current fill-base-content"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l2.122 6.53a1 1 0 00.95.69h6.866c.969 0 1.371 1.24.588 1.81l-5.556 4.04a1 1 0 00-.364 1.118l2.122 6.53c.3.921-.755 1.688-1.54 1.118l-5.556-4.04a1 1 0 00-1.176 0l-5.556 4.04c-.784.57-1.838-.197-1.539-1.118l2.122-6.53a1 1 0 00-.364-1.118L.47 11.957c-.783-.57-.38-1.81.588-1.81h6.866a1 1 0 00.95-.69l2.122-6.53z"></path></svg> </span>'),tt=v('<input type="radio" name="rating" class="mask mask-star-2 mask-half-1 bg-base-content"/> <input type="radio" name="rating" class="mask mask-star-2 mask-half-2 bg-base-content"/>',1),st=v('<div><div class="rating rating-lg rating-half mt-2"></div></div>'),rt=v('<p class="text-sm text-base-content/70 mb-2 whitespace-pre-wrap break-words inline-block md:hidden"> </p>'),it=v('<span class="badge badge-info badge-sm md:badge-md"> </span>'),nt=v('<div class="flex flex-wrap gap-1 md:gap-2 mb-2 mt-1 justify-end" title="tags"></div>'),ot=v('<img class="w-15 h-15 rounded-full object-cover"/>'),lt=v('<div class="w-19 h-19 md:w-20 md:h-20 rounded-full bg-base-300 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-8 h-8 stroke-current text-base-content/20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div>'),dt=v('<div class="flex flex-col items-center gap-2 flex-shrink-0"><!> <span class="text-sm text-center"> </span></div>'),vt=v('<div class="card bg-base-100 shadow-xl"><div class="card-body p-4 md:p-6"><h2 class="card-title">Characters <button class="btn btn-ghost btn-sm ml-auto" aria-label="Edit Characters"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></h2> <div class="flex gap-2 md:gap-4 overflow-x-auto pb-1 scrollbar-hide"></div></div></div>'),ct=v('<div class="card bg-base-100 shadow-xl"><div class="card-body gap-1 md:gap-2 p-4 md:p-6"><h2 class="card-title">Description <button class="btn btn-square btn-ghost ml-auto" aria-label="Edit Description"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></h2> <div class="ml-2 break-words prose prose-sm max-w-none prose-p:my-1 prose-ul:my-0 prose-li:my-0 prose-h1:my-0 prose-h2:my-0"><!></div></div></div>'),pt=v('<span class="bg-base-200 rounded-lg px-0.5"> </span>'),bt=v('<div class="flex flex-wrap gap-1"></div>'),gt=v('<div class="p-1 text-sm text-base-content/70 bg-base-200/50 border border-base-content/10 rounded-b-lg"><span class="ml-2 text-base-content/60">↳ <span class="font-semibold">Description:</span></span> <span class="inline prose prose-sm prose-neutral prose-p:m-0 prose-strong:inline prose-em:inline prose-code:inline"><!></span></div>'),ut=v('<div class="grid grid-cols-3 gap-4 px-4 py-3 bg-base-100 divide-x-[2px] divide-base-content/10 border border-base-content/10 rounded-t-lg"><div class="font-semibold"> </div> <div> </div> <div><!></div></div> <!>',1),mt=v('<div class="card bg-base-100 shadow-xl"><div class="card-body p-3 md:p-6"><h2 class="card-title ml-1">Chapters <button class="btn btn-ghost btn-sm ml-auto" aria-label="Edit Chapters"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></h2> <div class="overflow-x-auto"><div class="w-full border border-base-300 rounded-lg"><div class="grid grid-cols-3 gap-4 px-4 py-3 font-semibold bg-base-200 rounded-t-lg"><div>Chapter</div> <div>Characters</div> <div>Tags</div></div> <div class="divide-y divide-base-300"></div></div></div></div></div>'),_t=v('<div><span class="font-semibold text-base-content">Created:</span> <span> </span></div>'),ft=v('<div><span class="font-semibold text-base-content">Last opened:</span> <span> </span></div>'),ht=v('<div><span class="font-semibold text-base-content">Last edited:</span> <span> </span></div>'),xt=v('<details class="collapse bg-base-100"><summary class="collapse-title font-semibold">Timestamps</summary> <div class="collapse-content text-sm"><div class="rounded-lg bg-base-200 p-3 text-xs text-gray-500 space-y-1"><!> <!> <!></div></div></details>'),wt=v('<div class="container mx-auto p-2 md:p-4 max-w-4xl space-y-2 md:space-y-6"><div class="card bg-base-100 shadow-xl"><div class="card-body p-4 md:p-6"><div class="flex flex-row md:flex-row gap-3 md:gap-5"><div class="flex-shrink-0"><!></div> <div class="flex-1 min-w-0 flex flex-col justify-center"><h1 class="text-2xl font-bold mb-2 whitespace-pre-wrap break-words" title="Title"> </h1> <!> <!> <div class="flex flex-wrap gap-1.5 md:gap-2 mt-2"><!> <!> <!></div> <!></div></div> <div><!> <!></div></div></div> <!> <!> <!> <!></div>'),kt=v('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),yt=v('<!> <div class="min-h-screen bg-base-200"><div class="sticky top-0 z-50 navbar bg-base-100 shadow-lg"><div class="flex-none"><button class="btn btn-square btn-ghost" aria-label="Go back"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button></div> <div class="flex-1"><span class="text-xl font-bold">Details</span></div> <div class="flex-none gap-2"><button class="btn btn-square btn-ghost" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="btn btn-square btn-ghost text-error" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <!> <!></div> <!>',1);function zt(H,W){Ce(W,!1);const Ia=()=>Ie(Fe,"$page",Ha),[Ha,$a]=ze(),oa=L(),la=L();let e=L(null),F=L(!1),$=L(),G=L(!1),z=L(0),da=L("All");function V(l="All"){j(da,l),j(F,!0)}Me(async()=>{j($,parseInt(Ia().params.id)),await va(),await Q.markAsOpened(a($))});async function va(){j(e,await Q.getEntryById(a($))),j(z,a(e)?.rating??0)}async function ca(l){a($)&&(j(z,l),await Q.updateEntryPartial(a($),{rating:a(z)}),a(e)&&Le(e,a(e).rating=a(z)))}function pa(){history.length>1?window.history.back():qe("/")}async function Na(){j(F,!1),await va()}function Pa(){j(F,!1)}let J=L(!1);function Ra(){j(J,!0)}async function qa(){await Q.deleteEntry(a($)),j(J,!1),pa()}function Oa(){j(J,!1)}function Ua(l){return na.parseInline(l)}function X(l){return l?new Date(l).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null}function Va(l,u){const D=parseFloat(l),B=parseFloat(u),E=!isNaN(D),S=!isNaN(B);return E&&!S?-1:!E&&S?1:E&&S?D-B:l.localeCompare(u,void 0,{numeric:!0,sensitivity:"base"})}Ea(()=>(a(e),na),()=>{j(oa,a(e)?.description?na.parse(a(e).description):"")}),Ea(()=>a(e),()=>{j(la,(a(e)?.rows??[]).slice().sort((l,u)=>Va(l.ChapterSE,u.ChapterSE)))}),De(),Ae();var ba=yt();Pe("9y3fua",l=>{Be(()=>{Se.title=`${a(e),n(()=>a(e)?.title||"Loading...")??""} - lib`})});var ga=ia(ba);{var Fa=l=>{var u=Ge(),D=r(u),B=o(r(D),4),E=r(B),S=o(E,2);t(B),t(D),t(u),M("click",E,Oa),M("click",S,qa),d(l,u)};g(ga,l=>{a(J)&&l(Fa)})}var Y=o(ga,2),Z=r(Y),aa=r(Z),Ga=r(aa);t(aa);var ua=o(aa,4),ma=r(ua),Ja=o(ma,2);t(ua),t(Z);var _a=o(Z,2);{var Ka=l=>{var u=Je(),D=r(u),B=o(D,2);t(u),_(()=>{I(D,"src",(a(e),n(()=>a(e).coverImageUrl))),I(D,"alt",(a(e),n(()=>a(e).title)))}),M("click",D,He(function(E){$e.call(this,W,E)})),M("click",B,()=>j(G,!1)),M("click",u,()=>j(G,!1)),d(l,u)};g(_a,l=>{a(G)&&l(Ka)})}var Qa=o(_a,2);{var Wa=l=>{var u=wt(),D=r(u),B=r(D),E=r(B),S=r(E),ae=r(S);{var ee=i=>{var s=Ke();_(()=>{I(s,"src",(a(e),n(()=>a(e).coverImageUrl))),I(s,"alt",(a(e),n(()=>a(e).title)))}),M("click",s,()=>j(G,!0)),d(i,s)},te=i=>{var s=Qe();d(i,s)};g(ae,i=>{a(e),n(()=>a(e).coverImageUrl)?i(ee):i(te,!1)})}t(S);var fa=o(S,2),ea=r(fa),se=r(ea,!0);t(ea);var ha=o(ea,2);{var re=i=>{var s=We(),c=r(s,!0);t(s),_(b=>C(c,b),[()=>(a(e),n(()=>a(e).alternativeTitles.join(", ")))]),d(i,s)};g(ha,i=>{a(e),n(()=>a(e).alternativeTitles.length>0)&&i(re)})}var xa=o(ha,2);{var ie=i=>{var s=Ye();O(s,5,()=>(a(e),n(()=>a(e).badges)),U,(c,b)=>{var p=Xe(),f=r(p,!0);t(p),_(()=>C(f,a(b))),d(c,p)}),t(s),d(i,s)};g(xa,i=>{a(e),n(()=>a(e).badges.length>0)&&i(ie)})}var ta=o(xa,2),wa=r(ta);{var ne=i=>{var s=Ze(),c=r(s,!0);t(s),_(()=>C(c,(a(e),n(()=>a(e).category)))),M("click",s,()=>V("category")),d(i,s)};g(wa,i=>{a(e),n(()=>a(e).category)&&i(ne)})}var ka=o(wa,2);{var oe=i=>{var s=at(),c=r(s,!0);t(s),_(()=>C(c,(a(e),n(()=>a(e).dataType)))),d(i,s)};g(ka,i=>{a(e),n(()=>a(e).dataType)&&i(oe)})}var le=o(ka,2);{var de=i=>{var s=et(),c=o(r(s));t(s),_(()=>C(c,` ${Te(Ba),a(z),n(()=>Ba[a(z)])??""}`)),d(i,s)};g(le,i=>{a(e),n(()=>a(e).rating)&&i(de)})}t(ta);var ve=o(ta,2);{var ce=i=>{var s=st(),c=r(s);O(c,4,()=>n(()=>Array.from({length:5},(b,p)=>p+1)),U,(b,p)=>{var f=tt(),w=ia(f);Ta(w);var m=o(w,2);Ta(m),_(()=>{La(w,p*2-1),za(w,a(z)===p*2-1),I(w,"aria-label",`${p-.5} star`),La(m,p*2),za(m,a(z)===p*2),I(m,"aria-label",`${p} star`)}),M("change",w,()=>ca(p*2-1)),M("change",m,()=>ca(p*2)),d(b,f)}),t(c),t(s),d(i,s)};g(ve,i=>{a(e),n(()=>a(e).rating)&&i(ce)})}t(fa),t(E);var ya=o(E,2),ja=r(ya);{var pe=i=>{var s=rt(),c=r(s,!0);t(s),_(b=>C(c,b),[()=>(a(e),n(()=>a(e).alternativeTitles.join(", ")))]),d(i,s)};g(ja,i=>{a(e),n(()=>a(e).alternativeTitles.length>0)&&i(pe)})}var be=o(ja,2);{var ge=i=>{var s=nt();O(s,5,()=>(a(e),n(()=>a(e).tags)),U,(c,b)=>{var p=it(),f=r(p,!0);t(p),_(()=>C(f,a(b))),d(c,p)}),t(s),d(i,s)};g(be,i=>{a(e),n(()=>a(e).tags.length>0)&&i(ge)})}t(ya),t(B),t(D);var Aa=o(D,2);{var ue=i=>{var s=vt(),c=r(s),b=r(c),p=o(r(b));t(b);var f=o(b,2);O(f,5,()=>(a(e),n(()=>a(e).characters)),U,(w,m)=>{var N=dt(),h=r(N);{var k=y=>{var P=ot();_(()=>{I(P,"src",(a(m),n(()=>a(m).Image))),I(P,"alt",(a(m),n(()=>a(m).Name)))}),d(y,P)},x=y=>{var P=lt();d(y,P)};g(h,y=>{a(m),n(()=>a(m).Image)?y(k):y(x,!1)})}var A=o(h,2),T=r(A,!0);t(A),t(N),_(()=>C(T,(a(m),n(()=>a(m).Name)))),d(w,N)}),t(f),t(c),t(s),M("click",p,()=>V("characters")),d(i,s)};g(Aa,i=>{a(e),n(()=>a(e).characters.length>0)&&i(ue)})}var Ma=o(Aa,2);{var me=i=>{var s=ct(),c=r(s),b=r(c),p=o(r(b));t(b);var f=o(b,2),w=r(f);Sa(w,()=>a(oa)),t(f),t(c),t(s),M("click",p,()=>V("description")),d(i,s)};g(Ma,i=>{a(e),n(()=>a(e).description)&&i(me)})}var Ca=o(Ma,2);{var _e=i=>{var s=mt(),c=r(s),b=r(c),p=o(r(b));t(b);var f=o(b,2),w=r(f),m=o(r(w),2);O(m,5,()=>a(la),U,(N,h)=>{var k=ut(),x=ia(k),A=r(x),T=r(A,!0);t(A);var y=o(A,2),P=r(y,!0);t(y);var Da=o(y,2),xe=r(Da);{var we=R=>{var q=bt();O(q,5,()=>(a(h),n(()=>a(h).Tags)),U,(K,sa)=>{var ra=pt(),je=r(ra,!0);t(ra),_(()=>C(je,a(sa))),d(K,ra)}),t(q),d(R,q)};g(xe,R=>{a(h),n(()=>a(h).Tags.length>0)&&R(we)})}t(Da),t(x);var ke=o(x,2);{var ye=R=>{var q=gt(),K=o(r(q),2),sa=r(K);Sa(sa,()=>(a(h),n(()=>Ua(a(h).Description)))),t(K),t(q),d(R,q)};g(ke,R=>{a(h),n(()=>a(h).Description)&&R(ye)})}_(()=>{C(T,(a(h),n(()=>a(h).ChapterSE))),C(P,(a(h),n(()=>a(h).Characters)))}),d(N,k)}),t(m),t(w),t(f),t(c),t(s),M("click",p,()=>V("chapters")),d(i,s)};g(Ca,i=>{a(e),n(()=>a(e).rows.length>0)&&i(_e)})}var fe=o(Ca,2);{var he=i=>{var s=xt(),c=o(r(s),2),b=r(c),p=r(b);{var f=k=>{var x=_t(),A=o(r(x),2),T=r(A,!0);t(A),t(x),_(y=>C(T,y),[()=>(a(e),n(()=>X(a(e).createdAt)))]),d(k,x)};g(p,k=>{a(e),n(()=>a(e).createdAt)&&k(f)})}var w=o(p,2);{var m=k=>{var x=ft(),A=o(r(x),2),T=r(A,!0);t(A),t(x),_(y=>C(T,y),[()=>(a(e),n(()=>X(a(e).openedAt)))]),d(k,x)};g(w,k=>{a(e),n(()=>a(e).openedAt)&&k(m)})}var N=o(w,2);{var h=k=>{var x=ht(),A=o(r(x),2),T=r(A,!0);t(A),t(x),_(y=>C(T,y),[()=>(a(e),n(()=>X(a(e).editedAt)))]),d(k,x)};g(N,k=>{a(e),n(()=>a(e).editedAt)&&k(h)})}t(b),t(c),t(s),d(i,s)};g(fe,i=>{a(e),n(()=>a(e).createdAt||a(e).openedAt||a(e).editedAt)&&i(he)})}t(u),_(()=>C(se,(a(e),n(()=>a(e).title)))),d(l,u)},Xa=l=>{var u=kt();d(l,u)};g(Qa,l=>{a(e)?l(Wa):l(Xa,!1)})}t(Y);var Ya=o(Y,2);{var Za=l=>{Ne(l,{get entryId(){return a($)},get editSection(){return a(da)},$$events:{save:Na,cancel:Pa}})};g(Ya,l=>{a(F)&&l(Za)})}M("click",Ga,pa),M("click",ma,()=>V("All")),M("click",Ja,Ra),d(H,ba),Ee(),$a()}export{zt as component,Lt as universal};
